/*! For license information please see bundle.51c97f2bef5c5dea73ae.js.LICENSE.txt */
!function(){var t,e,r,n,o,i={62508:function(t,e,r){"use strict";r.d(e,{Z:function(){return F}});var n=r(92801),o=r(90237),i=r(65337),a=r(95225),c=r(39576),u=r(61378),s=r(69905),l=r(15274),f=r(67294),h=r(55241),p=r(71577),d=r(53807),v=r(57564),y=r(32763),m=r(59755),g=r(35137),w=r(18230),Z=r(28508),b=r(45532),x=r(69165),k=r(52656);function L(){L=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),c=new S(o||[]);return n(a,"_invoke",{value:x(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function h(){}function p(){}function d(){}var v={};u(v,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(E([])));g&&g!==e&&r.call(g,i)&&(v=g);var w=d.prototype=h.prototype=Object.create(v);function Z(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function o(n,i,a,c){var u=l(t[n],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==(0,y.Z)(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:p,configurable:!0}),p.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=E,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}var C=function(t){(0,c.Z)(p,t);var e,r,n,h=(r=p,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,s.Z)(r);if(n){var o=(0,s.Z)(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return(0,u.Z)(this,t)});function p(){var t;(0,o.Z)(this,p);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=h.call.apply(h,[this].concat(r)),(0,l.Z)((0,a.Z)(t),"state",{}),t}return(0,i.Z)(p,[{key:"componentDidMount",value:(e=(0,m.Z)(L().mark((function t(){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})},{key:"render",value:function(){var t=this.props,e=t.formRef,r=t.fields,n=t.value,o=t.onFinish,i=t.onValuesChange,a=t.serverKey;return(0,k.tZ)(f.Fragment,null,(0,k.tZ)(b.Z,{onValuesChange:i,labelWrap:!0,ref:e,name:"control-hooks",onFinish:o},(0,k.tZ)(x.Z,{serverKey:a,formRef:e,nameAttr:"id",fields:r,valueMap:n})))}}]),p}(f.PureComponent);function O(){O=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){var i=e&&e.prototype instanceof h?e:h,a=Object.create(i.prototype),c=new S(o||[]);return n(a,"_invoke",{value:x(t,r,c)}),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function h(){}function p(){}function d(){}var v={};u(v,i,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(E([])));g&&g!==e&&r.call(g,i)&&(v=g);var w=d.prototype=h.prototype=Object.create(v);function Z(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function o(n,i,a,c){var u=l(t[n],t,i);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==(0,y.Z)(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,a,c)}),(function(t){o("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return o("throw",t,a,c)}))}c(u.arg)}var i;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=l(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=l(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=d,n(w,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:p,configurable:!0}),p.displayName=u(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),u(w,c,"Generator"),u(w,i,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=E,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}var S=function(t){(0,c.Z)(b,t);var e,r,h,d,y=(h=b,d=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,s.Z)(h);if(d){var r=(0,s.Z)(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return(0,u.Z)(this,t)});function b(){var t;(0,o.Z)(this,b);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=y.call.apply(y,[this].concat(r)),(0,l.Z)((0,a.Z)(t),"formRef",f.createRef()),(0,l.Z)((0,a.Z)(t),"state",{}),(0,l.Z)((0,a.Z)(t),"reset",(function(){t.formRef.current&&t.formRef.current.resetFields()})),(0,l.Z)((0,a.Z)(t),"onOk",(function(){t.formRef.current.submit()})),t}return(0,i.Z)(b,[{key:"componentDidMount",value:(r=(0,m.Z)(O().mark((function t(){return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"componentDidUpdate",value:(e=(0,m.Z)(O().mark((function t(){return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.reset();case 1:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"render",value:function(){var t=this.props,e=t.title,r=(t.height,t.onOk),o=t.fields,i=t.value,a=t.onCancel,c=t.okButtonType,u=t.needConfirm,s=t.okDanger,l=t.onValuesChange,h=t.serverKey;return(0,n.Z)(this.state),(0,k.tZ)(g.Z,{size:"small",style:{width:1e3},title:e,bodyStyle:{overflow:"auto"},extra:(0,k.tZ)(f.Fragment,null,(0,k.tZ)(w.Z,{size:[8,0]},(0,k.tZ)(p.ZP,{onClick:this.reset},"重置"),function(t){return u?s?(0,k.tZ)(v.Z,{placement:"rightBottom",title:"确定要执行提交吗？",onConfirm:t,okText:"确定",cancelText:"取消",okType:"danger"},(0,k.tZ)(p.ZP,{type:c,danger:!0},"确定")):(0,k.tZ)(v.Z,{placement:"rightBottom",title:"确定要执行提交吗？",onConfirm:t,okText:"确定",cancelText:"取消"},(0,k.tZ)(p.ZP,{type:c},"确定")):(0,k.tZ)(p.ZP,{type:c,onClick:t},"确定")}(this.onOk),a?(0,k.tZ)(p.ZP,{onClick:a},(0,k.tZ)(Z.Z,null)):""))},(0,k.tZ)(C,{serverKey:h,onValuesChange:l,fields:o,formRef:this.formRef,value:i,onFinish:r}))}}]),b}(f.PureComponent);(0,l.Z)(S,"defaultProps",{forceRender:!0,style:{maxWidth:"calc(100vw - 60px)",maxHeight:"calc(100vh - 50px)"},needConfirm:!1,okButtonType:"primary",okDanger:!1});var E=r(93378),P=r(19619),j=r(88284),I=r(73218),R=r(84189),_=r(52125);var N={FileDoneOutlined:P.Z,CheckOutlined:j.Z,CloseCircleOutlined:I.Z,FileAddOutlined:R.Z,ThunderboltOutlined:_.Z},T=function(t){(0,c.Z)(a,t);var e,r,n=(e=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,s.Z)(e);if(r){var o=(0,s.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,u.Z)(this,t)});function a(){return(0,o.Z)(this,a),n.apply(this,arguments)}return(0,i.Z)(a,[{key:"render",value:function(){var t=this.props.type;return N[t]?f.createElement(N[t]):(0,k.tZ)(_.Z,null)}}]),a}(f.PureComponent);function D(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return A(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?A(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var F=function(t){(0,c.Z)(m,t);var e,r,y=(e=m,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,s.Z)(e);if(r){var o=(0,s.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,u.Z)(this,t)});function m(){var t;(0,o.Z)(this,m);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=y.call.apply(y,[this].concat(r)),(0,l.Z)((0,a.Z)(t),"state",{popoverOpen:!1}),(0,l.Z)((0,a.Z)(t),"isShow",(function(){var e=t.props,r=e.actionConfig,n=e.data,o=e.formRef;return E.Z.isShow(r,n,o)})),(0,l.Z)((0,a.Z)(t),"getValue",(function(){var e,r=t.props,n=r.data,o=r.formRef,i=r.actionConfig,a={},c=n?n[0]:void 0,u=o?o.current:void 0,s=D(i.writes);try{for(s.s();!(e=s.n()).done;){var l=e.value;l&&(u&&u.getFieldValue(l.id)?a[l.id]=E.Z.getFormRefValue(o,l.id):c&&(c.fieldMap?a[l.id]=c?c.fieldMap[l.id]:void 0:a[l.id]=c?c[l.id]:void 0))}}catch(t){s.e(t)}finally{s.f()}return console.log("actionValue:",a),a})),(0,l.Z)((0,a.Z)(t),"onOk",(function(e){console.log("action form value:",e);var r=t.props,n=r.actionConfig,o=r.doAction;t.setState({popoverOpen:!1}),o(n.id,t.getCodes(),e)})),(0,l.Z)((0,a.Z)(t),"onCancel",(function(){t.setState({popoverOpen:!1})})),(0,l.Z)((0,a.Z)(t),"onValuesChange",(function(e){var r=t.props.formRef;r&&r.current&&r.current.setFieldsValue(e)})),(0,l.Z)((0,a.Z)(t),"getButtonType",(function(){var e=t.props,r=e.buttonType,n=e.actionConfig,o=r?"dashed"==r.split("-")[0]?"dashed":"primary":"dashed";return r?o:n.buttonType?n.buttonType:"dashed"})),(0,l.Z)((0,a.Z)(t),"blockButton",(function(){var e=t.props.buttonType;return e&&e.includes("block")})),(0,l.Z)((0,a.Z)(t),"formButton",(function(){var e=t.state.popoverOpen,r=t.props,n=r.actionConfig,o=r.disabled,i=r.hiddenType,a=r.buttonSize,c=r.serverKey,u=o;if(!t.isShow()){if(!i||"hidden"==i)return null;u=!0}return(0,k.tZ)(h.Z,{placement:"bottom",open:e,trigger:"click",content:(0,k.tZ)(S,{serverKey:c,okDanger:"danger"==n.beforeExeConfirm,needConfirm:!0,title:n.title,onCancel:function(){return t.onCancel()},fields:n.writes,value:t.getValue(),onOk:t.onOk,onValuesChange:t.onValuesChange})},(0,k.tZ)(p.ZP,{danger:n.danger,type:t.getButtonType(),shape:n.buttonShape,block:t.blockButton(),size:a,onClick:function(){return t.setState({popoverOpen:!e})},disabled:u},t.getTitle()))})),(0,l.Z)((0,a.Z)(t),"getTitle",(function(){var e=t.props,r=e.actionConfig,n=e.iconType,o=null;return o=r.icon?"icon-title"==n?(0,k.tZ)(f.Fragment,null,(0,k.tZ)(T,{type:r.icon}),r.title):"icon"==n?(0,k.tZ)(d.Z,{placement:"top",title:r.title},(0,k.tZ)(T,{type:r.icon}),""):r.title:r.title,r.tip&&"icon"!=n&&(o=(0,k.tZ)(f.Fragment,null,(0,k.tZ)(d.Z,{title:r.tip},o))),o})),(0,l.Z)((0,a.Z)(t),"getCodes",(function(){var e=t.props.data,r=[];if(e&&e instanceof Array){var n,o=D(e);try{for(o.s();!(n=o.n()).done;){var i=n.value;i&&r.push(i.code)}}catch(t){o.e(t)}finally{o.f()}}return r})),(0,l.Z)((0,a.Z)(t),"withoutFormButton",(function(){var e=t.props,r=e.actionConfig,n=e.doAction,o=(e.data,e.disabled),i=(e.buttonType,e.hiddenType),a=e.buttonSize,c=o;if(!t.isShow()){if(!i||"hidden"==i)return null;c=!0}var u=t.getCodes(),s=t.blockButton(),l=t.getButtonType();return r.beforeExeConfirm&&"default"!=r.beforeExeConfirm?"danger"==r.beforeExeConfirm?(0,k.tZ)(v.Z,{key:r.id,placement:"rightBottom",title:"确定要执行【".concat(r.title,"】吗？"),onConfirm:function(){n(r.id,u,{})},disabled:c,okText:"确定",cancelText:"取消",okType:"danger"},(0,k.tZ)(p.ZP,{type:l,block:s,danger:!0,shape:r.buttonShape,size:a,disabled:c},t.getTitle())):(0,k.tZ)(p.ZP,{type:l,block:s,size:a,shape:r.buttonShape,danger:r.danger,onClick:function(){return n(r.id,u,{})},disabled:c},t.getTitle()):(0,k.tZ)(v.Z,{key:r.id,placement:"rightBottom",title:"确定要执行【".concat(r.title,"】吗？"),onConfirm:function(){n(r.id,u,{})},disabled:c,okText:"确定",cancelText:"取消"},(0,k.tZ)(p.ZP,{size:a,danger:r.danger,type:l,shape:r.buttonShape,block:s,disabled:c},t.getTitle()))})),t}return(0,i.Z)(m,[{key:"componentDidMount",value:function(){(0,n.Z)(this.props),this.setState({})}},{key:"componentDidUpdate",value:function(t){(0,n.Z)(this.props),this.props}},{key:"render",value:function(){(0,n.Z)(this.state);var t=this.props.actionConfig;return(0,k.tZ)(f.Fragment,null,t.writes&&t.writes.length>0?this.formButton():this.withoutFormButton())}}]),m}(f.PureComponent);(0,l.Z)(F,"defaultProps",{hiddenType:"hidden",buttonSize:void 0,iconType:"icon-title"})},93378:function(t,e,r){"use strict";r.d(e,{Z:function(){return c}});var n=r(90237),o=r(65337);function i(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return c=t.done,t},e:function(t){u=!0,i=t},f:function(){try{c||null==r.return||r.return()}finally{if(u)throw i}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var c=function(){function t(){(0,n.Z)(this,t)}return(0,o.Z)(t,null,[{key:"isShow",value:function(t,e,r){var n=t.preposes;if(!n||n.length<=0)return!0;var o=!0;if(r&&r.current){var a,c=i(n);try{for(c.s();!(a=c.n()).done;){var u=a.value;if(u){var s=this.getFormRefValue(r,u.id);if(!this.comparator(u.comparator,s,u.defaultValue)){o=!1;break}}}}catch(t){c.e(t)}finally{c.f()}}else if(e){var l,f=i(e);try{for(f.s();!(l=f.n()).done;){var h=l.value;if(!o)break;if(!h){o=!1;break}var p,d=i(n);try{for(d.s();!(p=d.n()).done;){var v=p.value;if(h.fieldMap){if(!this.comparator(v.comparator,h.fieldMap[v.id],v.defaultValue)){o=!1;break}}else if(!this.comparator(v.comparator,h[v.id],v.defaultValue)){o=!1;break}}}catch(t){d.e(t)}finally{d.f()}}}catch(t){f.e(t)}finally{f.f()}}else o=!1;return o}},{key:"comparator",value:function(t,e,r){if(t||(t="equal"),!r)return!0;if(!e&&"0"!=e)return!1;switch(t){case"equal":return e==r;case"exclude":return!("string"==typeof r?r.split(","):r).includes(e);case"includeOne":return("string"==typeof r?r.split(","):r).includes(e);case"noGreater":return e<=r;case"noLess":return e>=r;case"unequal":return e!=r}}},{key:"getFormRefValue",value:function(t,e){return!(!t||!t.current)&&t.current.getFieldValue(e)}}]),t}()},28101:function(t,e,r){"use strict";var n=r(30698),o=(r(67294),r(4107)),i=r(49288),a=r(49073),c=r(52656),u=o.Z.TextArea;e.Z=function(t){var e=t.id,r=t.value,o=(t.itemType,t.fieldConfig),s=t.onChange,l={id:e,placeholder:o.disabled?"无需输入":"请输入".concat(o.title),disabled:o.disabled};return(0,c.tZ)(i.Z,{allowClear:!0,dropdownMatchSelectWidth:!0,options:function(){var t=a.Z.getEnums(o.mstrucId);if(!t)return[];var e=[];return t.map((function(t){var r={value:"@@"+t.value,label:t.title};return e.push(r),!1})),e}(),onChange:function(t){if(s){var e;if(void 0===t)return"";e=t.startsWith("@@")?(r||"")+t.substring(2,t.length):t,s(e)}},value:r},(0,c.tZ)(u,(0,n.Z)({style:{height:150}},l)))}},22364:function(t,e,r){"use strict";r.d(e,{Z:function(){return L}});var n=r(32763),o=r(30698),i=r(20511),a=r(59755),c=r(90237),u=r(65337),s=r(95225),l=r(39576),f=r(61378),h=r(69905),p=r(15274),d=r(67294),v=r(17356),y=r(49073),m=r(52656),g=["fieldConfig","onChange","value"];function w(){w=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new S(n||[]);return o(a,"_invoke",{value:k(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(E([])));g&&g!==e&&r.call(g,a)&&(y=g);var Z=v.prototype=p.prototype=Object.create(y);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function i(o,a,c,u){var s=f(t[o],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,n.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,c,u)}),(function(t){i("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return i("throw",t,c,u)}))}u(s.arg)}var a;o(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=L(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function L(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,L(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=v,o(Z,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(Z),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(Z),s(Z,u,"Generator"),s(Z,a,(function(){return this})),s(Z,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=E,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function Z(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function b(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(r),!0).forEach((function(e){(0,p.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function x(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return k(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var L=function(t){(0,l.Z)(Z,t);var e,r,n,d=(r=Z,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,h.Z)(r);if(n){var o=(0,h.Z)(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return(0,f.Z)(this,t)});function Z(){var t;(0,c.Z)(this,Z);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=d.call.apply(d,[this].concat(r)),(0,p.Z)((0,s.Z)(t),"state",{options:[]}),(0,p.Z)((0,s.Z)(t),"handleChange",(function(e){var r=t.props.onChange,n=void 0;e&&(n=e.join("->")),r&&r(n)})),(0,p.Z)((0,s.Z)(t),"getOptions",(0,a.Z)(w().mark((function e(){var r,n,o,i,a,c,u,s,l;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.props,n=r.fieldConfig,o=r.baseValue,i=r.serverKey,e.next=3,y.Z.getOptions(i,n.mstrucId);case 3:return a=e.sent,c=[],s=a,l=u=[],o.length>0?o.map((function(t,e){if(e>0&&(l[0].subOptions=[],l=l[0].subOptions),s){var r,n=x(s);try{for(n.s();!(r=n.n()).done;){var o=r.value;o.title==t&&(l.push(b({},o)),s=o.subOptions)}}catch(t){n.e(t)}finally{n.f()}}})):u=a,t.buildOptions(u,c),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})))),(0,p.Z)((0,s.Z)(t),"buildOptions",(function(e,r){e.forEach((function(e){var n={};if(n.value=e.title,n.label=e.title,n.key=e.id,r.push(n),e.subOptions){var o=[];n.children=o,t.buildOptions(e.subOptions,o)}else n.isLeaf=!0}))})),t}return(0,u.Z)(Z,[{key:"componentDidMount",value:(e=(0,a.Z)(w().mark((function t(){var e;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getOptions();case 2:e=t.sent,this.setState({options:e});case 4:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"render",value:function(){var t=this.state.options,e=this.props,r=(e.fieldConfig,e.onChange,e.value),n=(0,i.Z)(e,g);return(0,m.tZ)(v.Z,(0,o.Z)({displayRender:function(t){return t.join("->")},options:t,value:r?r.split("->"):void 0,onChange:this.handleChange},n))}}]),Z}(d.PureComponent);(0,p.Z)(L,"defaultProps",{baseValue:[]})},41307:function(t,e,r){"use strict";r.d(e,{Z:function(){return Z}});var n=r(30698),o=r(20511),i=r(90237),a=r(65337),c=r(95225),u=r(39576),s=r(61378),l=r(69905),f=r(15274),h=r(67294),p=r(71577),d=r(35137),v=r(43929),y=r(34804),m=r(45136),g=r(52656),w=["extra","title","className","initCollapse"];var Z=function(t){(0,u.Z)(b,t);var e,r,Z=(e=b,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,l.Z)(e);if(r){var o=(0,l.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,s.Z)(this,t)});function b(){var t;(0,i.Z)(this,b);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=Z.call.apply(Z,[this].concat(r)),(0,f.Z)((0,c.Z)(t),"state",{collapse:!1}),(0,f.Z)((0,c.Z)(t),"cardTitle",(function(){var e=t.props,r=e.title,n=e.tip,o=t.state.collapse;if(!r||"null"==r)return null;var i;return i=o?(0,g.tZ)(p.ZP,{type:"text",onClick:function(){t.setState({collapse:!1})}},(0,g.tZ)(v.Z,null),r):(0,g.tZ)(p.ZP,{type:"text",onClick:function(){t.setState({collapse:!0})}},(0,g.tZ)(y.Z,null),r),(0,g.tZ)(h.Fragment,null,i,(0,g.tZ)(m.Z,{content:n}))})),t}return(0,a.Z)(b,[{key:"componentDidMount",value:function(){var t=this.props.initCollapse;this.setState({collapse:t})}},{key:"componentDidUpdate",value:function(t){var e=this.props.initCollapse;this.props!=t&&this.setState({collapse:e})}},{key:"render",value:function(){var t=this.state.collapse,e=this.props,r=e.extra,i=(e.title,e.className),a=(e.initCollapse,(0,o.Z)(e,w));return(0,g.tZ)(d.Z,(0,n.Z)({},a,{size:"small",extra:t?"":r,className:"".concat(i," ").concat(t?"collapse":""),title:this.cardTitle()}),t?null:this.props.children)}}]),b}(h.PureComponent)},74499:function(t,e,r){"use strict";var n=r(30698),o=r(20511),i=r(90237),a=r(65337),c=r(95225),u=r(39576),s=r(61378),l=r(69905),f=r(15274),h=r(67294),p=r(71577),d=r(99160),v=r(18230),y=r(70832),m=r(47389),g=r(94716),w=r(85932),Z=r(52656),b=["cQueryConfig","mainCode","type","pageType","serverKey"];var x={EditOutlined:(0,Z.tZ)(m.Z,null)},k=function(t){(0,u.Z)(k,t);var e,r,m=(e=k,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,l.Z)(e);if(r){var o=(0,l.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,s.Z)(this,t)});function k(){var t;(0,i.Z)(this,k);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=m.call.apply(m,[this].concat(r)),(0,f.Z)((0,c.Z)(t),"state",{showDraw:!1}),(0,f.Z)((0,c.Z)(t),"showDraw",(function(e){t.setState({showDraw:!0})})),(0,f.Z)((0,c.Z)(t),"closeDrawer",(function(){t.setState({showDraw:!1})})),t}return(0,a.Z)(k,[{key:"render",value:function(){var t=this,e=this.props,r=e.cQueryConfig,i=e.mainCode,a=e.type,c=e.pageType,u=e.serverKey,s=(0,o.Z)(e,b),l=this.state.showDraw,f=i&&i.indexOf("@R@")>0?i.split("@R@")[0]:i;return(0,Z.tZ)(h.Fragment,null,"text"==a?(0,Z.tZ)("span",{className:"cquickTextButton",onClick:function(){t.setState({showDraw:!l})}},r.title):(0,Z.tZ)(p.ZP,(0,n.Z)({},s,{onClick:function(){t.setState({showDraw:!l})}}),x[r.title]?x[r.title]:r.title),l?"edit"==r.type?(0,Z.tZ)(w.Z,{serverKey:u,pageType:c,open:l,onCancel:function(){t.setState({showDraw:!1})},sourceId:r.id,code:f,onOk:this.closeDrawer}):(0,Z.tZ)(d.Z,{placement:"left",title:"关联查询",closable:!0,mask:!1,onClose:this.closeDrawer,open:l,width:"calc(100% - 280px)",style:{maxWidth:1960},extra:(0,Z.tZ)(v.Z,null,(0,Z.tZ)(p.ZP,{onClick:this.closeDrawer},"关闭"))},r.path?h.createElement(g.Z.getCustomPage(r.path)):(0,Z.tZ)(y.Z,{serverKey:u,sourceId:r.id,mainCode:f})):null)}}]),k}(h.PureComponent);(0,f.Z)(k,"defaultProps",{pageType:"modal"}),e.Z=k},97182:function(t,e,r){"use strict";r.r(e);var n=r(15274),o=(r(67294),r(16748)),i=r(68351),a=r(27484),c=r.n(a),u=r(94716),s=r(52656);function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){(0,n.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var h=o.default.RangePicker;e.default=function(t){var e,r=t.id,n=t.value,a=t.itemType,l=t.fieldConfig,p=t.onChange,d=t.style,v=t.min,y=t.max,m=n,g=u.Z.getDayjsFormat(a),w=function(t){p&&p(t?t.format(g):void 0)},Z=function(t){p&&(t?2===t.length&&t[0]&&t[1]&&p(t[0].format(g)+"~"+t[1].format(g)):p(t))},b=function(t){return t&&(y&&c()(t.format(g),g)>c()(y,g)||v&&c()(t.format(g),g)<c()(v,g))},x=void 0,k="date";switch(a){case"date-YY":case"date-M1":case"date":e=m?c()(m,g):void 0,k="date-YY"==a?"year":"date-M1"==a?"month":"date",x=(0,s.tZ)(o.default,{id:r,style:f({},d),picker:k,format:g,disabledDate:b,value:e,disabled:l.disabled,onChange:w});break;case"datetime-HH":case"datetime-mm":case"datetime":e=m?c()(m,g):void 0,x=(0,s.tZ)(o.default,{id:r,style:f({},d),disabledDate:b,showTime:{format:u.Z.getDateTimeFormat(a)},picker:"date",format:g,value:e,disabled:l.disabled,onChange:w});break;case"daterange-YY":case"daterange-M1":case"daterange":var L=m&&m.indexOf("~")>0?m.split("~")[0]:void 0,C=m&&m.indexOf("~")>0?m.split("~")[1]:void 0;e=[L?c()(L,g):void 0,C?c()(C,g):void 0],k="daterange-YY"==a?"year":"daterange-M1"==a?"month":"date",x=(0,s.tZ)(h,{id:r,picker:k,style:f({},d),format:g,disabledDate:b,value:e,disabled:l.disabled,onChange:Z});break;case"datetimerange-HH":case"datetimerange-mm":case"datetimerange":var O=m&&m.indexOf("~")>0?m.split("~")[0]:void 0,S=m&&m.indexOf("~")>0?m.split("~")[1]:void 0;e=[O?c()(O,g):void 0,S?c()(S,g):void 0],x=(0,s.tZ)(h,{id:r,showTime:{format:u.Z.getDateTimeFormat(a)},format:g,style:f({},d),value:e,disabledDate:b,disabled:l.disabled,onChange:Z});break;case"time-HH":case"time-mm":case"time":e=m?c()(m,g):void 0,x=(0,s.tZ)(i.Z,{id:r,value:e,style:f({},d),disabled:l.disabled,onChange:w,format:g});break;case"timerange-HH":case"timerange-mm":case"timerange":var E=m&&m.indexOf("~")>0?m.split("~")[0]:void 0,P=m&&m.indexOf("~")>0?m.split("~")[1]:void 0;e=[E?c()(E,g):void 0,P?c()(P,g):void 0],x=(0,s.tZ)(i.Z.RangePicker,{id:r,value:e,style:f({},d),disabled:l.disabled,onChange:Z,format:g})}return x}},13575:function(t,e,r){"use strict";r.d(e,{Z:function(){return B}});var n=r(32763),o=r(1252),i=r(59755),a=r(90237),c=r(65337),u=r(95225),s=r(39576),l=r(61378),f=r(69905),h=r(15274),p=r(67294),d=r(65460),v=r(71230),y=r(15746),m=r(71577),g=r(12513),w=r(34041),Z=r(36646),b=r(92570),x=r(51042),k=r(32779),L=r(76880),C=r(47389),O=r(40110),S=r(23279),E=r.n(S),P=r(49811),j=r(49073),I=r(42638),R=r(85932),_=r(7935),N=r(5301),T=r(52656);function D(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function A(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?D(Object(r),!0).forEach((function(e){(0,h.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function F(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return G(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?G(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function G(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function M(){M=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(n||[]);return o(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function i(o,a,c,u){var s=f(t[o],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,n.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,c,u)}),(function(t){i("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return i("throw",t,c,u)}))}u(s.arg)}var a;o(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),s(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}var B=function(t){(0,s.Z)(S,t);var e,r,n=(e=S,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,f.Z)(e);if(r){var o=(0,f.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,l.Z)(this,t)});function S(){var t;(0,a.Z)(this,S);for(var e=arguments.length,r=new Array(e),c=0;c<e;c++)r[c]=arguments[c];return t=n.call.apply(n,[this].concat(r)),(0,h.Z)((0,u.Z)(t),"state",{titleId:void 0,optionCacheKey:void 0,pageNo:1,loading:!1,optionsCache:{},codeLabel:{},ltmplConfig:void 0,showView:!1,showEdit:!1,showTable:!1,drawCode:void 0,preMainCode:void 0}),(0,h.Z)((0,u.Z)(t),"dropdownRender",(function(e){var r=t.props.fieldConfig.actions;return(0,T.tZ)(p.Fragment,null,e,(0,T.tZ)(p.Fragment,null,(0,T.tZ)(d.Z,{style:{margin:"8px 0"}}),(0,T.tZ)(v.Z,{justify:"end"},r&&r.indexOf("table")>=0?(0,T.tZ)(y.Z,null,(0,T.tZ)(m.ZP,{type:"text",icon:(0,T.tZ)(b.Z,{style:{color:"#0958d9"}}),onClick:function(){return t.showTable()}})):null,r&&r.indexOf("add")>=0?(0,T.tZ)(y.Z,null,(0,T.tZ)(m.ZP,{type:"text",icon:(0,T.tZ)(x.Z,{style:{color:"#0958d9"}}),onClick:function(){return t.editItem()}})):null,(0,T.tZ)(y.Z,null,(0,T.tZ)(m.ZP,{type:"text",icon:(0,T.tZ)(k.Z,{style:{color:"#0958d9"}}),onClick:function(){return t.initCache()}})))))})),(0,h.Z)((0,u.Z)(t),"editItem",function(){var e=(0,i.Z)(M().mark((function e(r){var n;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadLtmplConfig();case 2:n=e.sent,t.setState({showEdit:!0,showTable:!1,showView:!1,drawCode:r,ltmplConfig:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,h.Z)((0,u.Z)(t),"showTable",(0,i.Z)(M().mark((function e(){return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.setState({showEdit:!1,showTable:!0,showView:!1,drawCode:void 0});case 1:case"end":return e.stop()}}),e)})))),(0,h.Z)((0,u.Z)(t),"loadLtmplConfig",(0,i.Z)(M().mark((function e(){var r,n,o,i,a;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.props,n=r.fieldConfig,o=r.serverKey,i=t.state.ltmplConfig,a=i){e.next=7;break}return e.next=6,j.Z.requestLtmplConfig(o,n.id);case 6:a=e.sent.ltmplConfig;case 7:return t.setState({ltmplConfig:a}),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})))),(0,h.Z)((0,u.Z)(t),"showItem",function(){var e=(0,i.Z)(M().mark((function e(r){var n;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadLtmplConfig();case 2:n=e.sent,t.setState({showEdit:!1,showTable:!1,showView:!0,drawCode:r,ltmplConfig:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,h.Z)((0,u.Z)(t),"initCache",(function(){t.setState({optionsCache:{},codeLabel:{}})})),(0,h.Z)((0,u.Z)(t),"toOption",(function(e,r,n){var o=t.props.fieldConfig.actions;return t.state.codeLabel[e]=r,{value:e,label:(0,T.tZ)(p.Fragment,null,r,o&&o.indexOf("detail")>=0?(0,T.tZ)(m.ZP,{size:"small",type:"text",onClick:function(r){r.stopPropagation(),t.showItem(e)}},(0,T.tZ)(L.Z,{style:{color:"#0958d9"}})):null,o&&o.indexOf("edit")>=0?(0,T.tZ)(m.ZP,{size:"small",type:"text",onClick:function(r){r.stopPropagation(),t.editItem(e)}},(0,T.tZ)(C.Z,{style:{color:"#0958d9"}})):null)}})),(0,h.Z)((0,u.Z)(t),"doClose",(function(){t.setState({drawCode:void 0,showEdit:!1,showView:!1,showTable:!1})})),(0,h.Z)((0,u.Z)(t),"drawSubmited",(function(){t.initCache(),t.doClose()})),(0,h.Z)((0,u.Z)(t),"closeTable",(function(){t.drawSubmited()})),(0,h.Z)((0,u.Z)(t),"toValueArray",(function(e){var r,n=[],o=F(t.toArray(e));try{for(o.s();!(r=o.n()).done;){var i=r.value;if(i){var a=i.split("@R@");"null"!=a[1]&&n.push(a[0])}}}catch(t){o.e(t)}finally{o.f()}return n})),(0,h.Z)((0,u.Z)(t),"toArray",(function(t){return t instanceof Array?t:t?t.split(","):[]})),(0,h.Z)((0,u.Z)(t),"toOptions",(function(e,r){var n,o=t.props.fieldConfig,i=[],a=F(t.toArray(e));try{for(a.s();!(n=a.n()).done;){var c=n.value;if(c){var u=c.split("@R@");"null"!=u[1]&&i.push(t.toOption(u[0],u[1],r))}}}catch(t){a.e(t)}finally{a.f()}return o.suppleOptions&&o.suppleOptions.forEach((function(e){var r=!1;i.forEach((function(t){t.value!=e.code||(r=!0)})),r||i.push(t.toOption(e.code,e.title,void 0))})),i})),(0,h.Z)((0,u.Z)(t),"fetchNextPage",(0,i.Z)(M().mark((function e(){var r,n,i,a,c,u,s;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.state,n=r.optionCacheKey,i=r.titleId,a=r.optionsCache,c=a[n],u=c.pageInfo,c.touchEnd){e.next=10;break}return u.pageNo=u.pageNo+1,e.next=7,t.loadData(c.queryKey.key,A({},u),i);case 7:(s=e.sent)&&(c.options=[].concat((0,o.Z)(c.options),(0,o.Z)(s.options)),c.touchEnd=s.touchEnd),t.setState({pageNo:u.pageNo});case 10:case"end":return e.stop()}}),e)})))),(0,h.Z)((0,u.Z)(t),"fetchOptions",function(){var e=(0,i.Z)(M().mark((function e(r){var n,o,i,a,c,u,s,l,f,h,p,d,v,y,m,g,w,Z,b,x,k;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.props,o=n.fieldConfig,i=n.mainCode,a=n.baseCriteria,c=n.serverKey,u=t.state,s=u.optionsCache,l=u.ltmplConfig,f=u.preMainCode,h=i||o.mainCode,f!=h&&(t.setState({preMainCode:h.toString()}),t.initCache()),p="withoutValue",r&&(p=r),d=t.state.titleId,v=s[p]){e.next=36;break}if(t.setState({loading:!0}),y=l){e.next=15;break}return e.next=14,t.loadLtmplConfig();case 14:y=e.sent;case 15:return m={pageNo:1,pageSize:6,virtualEndPageNo:void 0},d=y.primaryColumn.id,g=y.primaryCriteria,w="undefinedCriteria",g&&(w="c_"+g.id),(Z=y.defaultPageSize)&&(m.pageSize=Z),b={},a&&(b=A({},a)),b[w]=r,e.next=27,P.Z.requestLtmplQueryKey(c,o.id,A(A(A({},b),m),{},{mainCode:h}));case 27:return x=e.sent,e.next=30,t.loadData(x.key,m,d);case 30:k=e.sent,v={options:k.options,pageInfo:m,queryKey:x,searchValue:r,touchEnd:k.touchEnd},s[p]=v,t.setState({optionCacheKey:p,titleId:d,optionsCache:A({},s),loading:!1}),e.next=37;break;case 36:t.state.optionCacheKey==p&&"withoutValue"==p?t.setState({loading:!1,optionCacheKey:p}):E()((function(){t.setState({loading:!1,optionCacheKey:p})}),500)();case 37:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,h.Z)((0,u.Z)(t),"onChange",(function(e){var r=t.state.codeLabel,n=(0,o.Z)(e);e&&e.length>t.props.maxSelected&&n.shift();var i=[];n.forEach((function(t){t.indexOf("@R@")>0?i.push(t):i.push(t+"@R@"+r[t])})),t.props.onChange(i)})),(0,h.Z)((0,u.Z)(t),"tagRender",(function(t){var e=t.label,r=t.closable,n=t.onClose;return(0,T.tZ)(g.Z,{onMouseDown:function(t){t.preventDefault(),t.stopPropagation()},closable:r,onClose:n,style:{marginRight:3}},e)})),(0,h.Z)((0,u.Z)(t),"loadData",function(){var e=(0,i.Z)(M().mark((function e(r,n,o){var i,a,c,u,s;return M().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.props,a=i.onEntityClick,i.baseCriteria,c=i.serverKey,e.next=3,P.Z.requestQueryData(c,r,n);case 3:return u=e.sent,s=[],n=u.pageInfo,u.entities.forEach((function(e,r){var n=e.fieldMap[o];if(j.Z.cache(e),n){var i=n.split("@R@"),c=i&&i.length>0?i[i.length-1]:n;if("null"!=c){var u=t.toOption(e.code,c,a);s.push(u)}}})),e.abrupt("return",{options:s,touchEnd:u.touchEnd});case 8:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()),(0,h.Z)((0,u.Z)(t),"debounceFetcher",(function(){return E()((function(e){t.fetchOptions(e)}),800)})),(0,h.Z)((0,u.Z)(t),"debounceFetchNextPage",(function(){E()(t.fetchNextPage,200)()})),t}return(0,c.Z)(S,[{key:"componentDidUpdate",value:function(t){var e=this.props,r=e.baseCriteria,n=e.mainCode,o=e.fieldConfig,i=t.baseCriteria,a=t.mainCode,c=t.fieldConfig;(r&&JSON.stringify(r)!=JSON.stringify(i)||n&&n!=a||o&&c&&o.id!=c.id)&&this.initCache()}},{key:"render",value:function(){var t,e=this,r=this.props,n=r.id,i=r.value,a=r.fieldConfig,c=(r.onChange,r.disabled),u=r.style,s=(r.maxSelected,r.onEntityClick),l=r.mainCode,f=r.serverKey,h=a.actions,d=this.state,v=d.optionCacheKey,y=d.loading,m=d.optionsCache,g=d.drawCode,b=d.showEdit,x=d.showView,k=d.showTable,L=d.ltmplConfig,C=this.toOptions(i,s),S=(0,o.Z)(C),P=256;if(v&&m[v]){var j=m[v];j.pageInfo&&j.pageInfo.pageSize<8&&(P=32*j.pageInfo.pageSize-10);var D,G=F(j.options);try{for(G.s();!(D=G.n()).done;){var M=D.value;t=!1;var B,K=F(C);try{for(K.s();!(B=K.n()).done;){var q=B.value;q.value==M.value&&(t=!0,q.label=M.label)}}catch(t){K.e(t)}finally{K.f()}t||S.push(M)}}catch(t){G.e(t)}finally{G.f()}}return(0,T.tZ)(p.Fragment,null,(0,T.tZ)(w.default,{disabled:c,id:n,listHeight:P,style:A({},u),onChange:this.onChange,value:this.toValueArray(i),mode:"multiple",placeholder:"请选择".concat(a.title),notFoundContent:y?(0,T.tZ)(Z.Z,{size:"small"}):"无数据",allowClear:!0,showArrow:!0,suffixIcon:(0,T.tZ)(O.Z,null),filterOption:!1,dropdownRender:this.dropdownRender,tagRender:h&&(h.indexOf("detail")>=0||h.indexOf("edit")>=0)?this.tagRender:void 0,onSearch:this.debounceFetcher(),onClick:c?null:function(){E()(e.fetchOptions,100)(void 0)},options:y?[]:S,onPopupScroll:function(t){var r=t.target;r.scrollTop+r.offsetHeight+1>=r.scrollHeight&&e.debounceFetchNextPage()}}),x&&g?(0,T.tZ)(I.Z,{serverKey:f,placement:"left",onClose:this.doClose,open:x,sourceId:a.id,code:g}):null,b&&L?L.customEditPagePath?(0,T.tZ)(_.Z,{open:b,onOk:function(){e.drawSubmited()},customPath:L.customEditPagePath,sourceId:a.id,mainCode:l,code:g}):(0,T.tZ)(R.Z,{serverKey:f,pageType:"modal",open:b,onCancel:this.doClose,mainCode:l,sourceId:a.id,code:g,onOk:this.drawSubmited}):null,k?(0,T.tZ)(N.Bf,{serverKey:f,open:k,height:"76vh",onCancel:this.closeTable,sourceId:a.id,mainCode:l}):null)}}]),S}(p.PureComponent);(0,h.Z)(B,"defaultProps",{maxSelected:100})},39481:function(t,e,r){"use strict";r.d(e,{Z:function(){return g}});var n=r(32763),o=r(1252),i=r(59755),a=r(90237),c=r(65337),u=r(95225),s=r(39576),l=r(61378),f=r(69905),h=r(15274),p=r(67294),d=r(61239),v=r(49811),y=r(52656);function m(){m=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new S(n||[]);return o(a,"_invoke",{value:k(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(E([])));w&&w!==e&&r.call(w,a)&&(y=w);var Z=v.prototype=p.prototype=Object.create(y);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function i(o,a,c,u){var s=f(t[o],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,n.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,c,u)}),(function(t){i("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return i("throw",t,c,u)}))}u(s.arg)}var a;o(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=L(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function L(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,L(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=v,o(Z,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(Z),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(Z),s(Z,u,"Generator"),s(Z,a,(function(){return this})),s(Z,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=E,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}var g=function(t){(0,s.Z)(g,t);var e,r,n,p=(r=g,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,f.Z)(r);if(n){var o=(0,f.Z)(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return(0,l.Z)(this,t)});function g(){var t;(0,a.Z)(this,g);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=p.call.apply(p,[this].concat(r)),(0,h.Z)((0,u.Z)(t),"state",{treeData:[]}),(0,h.Z)((0,u.Z)(t),"loadSchoolLevelUnit",(0,i.Z)(m().mark((function t(){var e,r;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],t.next=3,v.Z.requestLtmplQueryTop(null,"221036732522497",{});case 3:return(r=t.sent).entities&&r.entities.forEach((function(t,r){var n={};n.id=t.code,n.level=1,n.pId=0,n.title=t.fieldMap[0xcfc1f06ca002],n.value=n.id+"@R@"+n.title,n.key=n.value,n.selectable=!1,e.push(n)})),t.abrupt("return",e);case 6:case"end":return t.stop()}}),t)})))),(0,h.Z)((0,u.Z)(t),"loadLab",function(){var t=(0,i.Z)(m().mark((function t(e){var r,n;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],t.next=3,v.Z.requestLtmplQueryTop(null,"228261345665025",{mainCode:e});case 3:return(n=t.sent).entities&&n.entities.forEach((function(t,n){var o={};o.id=t.code,o.level=2,o.pId=e,o.title=t.fieldMap[0xcec62beca003],o.value=o.id+"@R@"+o.title,o.key=o.value,o.selectable=!1,r.push(o)})),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),(0,h.Z)((0,u.Z)(t),"loadRoom",function(){var t=(0,i.Z)(m().mark((function t(e){var r,n;return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],t.next=3,v.Z.requestLtmplQueryTop(null,"228261733638145",{mainCode:e});case 3:return(n=t.sent).entities&&n.entities.forEach((function(t,n){var o={};o.id=t.code,o.level=3,o.pId=e,o.title=t.fieldMap[0xd239b3eca005],o.value=o.id+"@R@"+o.title,o.key=o.value,o.isLeaf=!0,r.push(o)})),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),(0,h.Z)((0,u.Z)(t),"onChange",(function(e){(0,t.props.onChange)(e)})),(0,h.Z)((0,u.Z)(t),"onLoadData",function(){var e=(0,i.Z)(m().mark((function e(r){var n,i,a;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.state.treeData,1!=r.level){e.next=8;break}return e.next=4,t.loadLab(r.id);case 4:i=e.sent,t.setState({treeData:[].concat((0,o.Z)(n),(0,o.Z)(i))}),e.next=13;break;case 8:if(2!=r.level){e.next=13;break}return e.next=11,t.loadRoom(r.id);case 11:a=e.sent,t.setState({treeData:[].concat((0,o.Z)(n),(0,o.Z)(a))});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t}return(0,c.Z)(g,[{key:"componentDidMount",value:(e=(0,i.Z)(m().mark((function t(){return m().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.loadSchoolLevelUnit();case 3:t.t1=t.sent,t.t2={treeData:t.t1},t.t0.setState.call(t.t0,t.t2);case 6:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"render",value:function(){var t,e=this.props,r=(e.id,e.value),n=(e.fieldConfig,e.style,this.state.treeData);return r&&(t=r.split("@R@")[1]),(0,y.tZ)(d.Z,{treeDataSimpleMode:!0,style:{width:"100%",minWidth:"260px"},value:t,dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"--请选择--",onChange:this.onChange,loadData:this.onLoadData,treeData:n})}}]),g}(p.PureComponent);(0,h.Z)(g,"defaultProps",{maxSelected:100})},97038:function(t,e,r){"use strict";r.d(e,{Z:function(){return b}});var n=r(92801),o=r(90237),i=r(65337),a=r(95225),c=r(39576),u=r(61378),s=r(69905),l=r(15274),f=r(67294),h=r(71577),p=r(55241),d=r(34041),v=r(40110),y=r(55707),m=r(52656);function g(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function w(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?g(Object(r),!0).forEach((function(e){(0,l.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Z(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var b=function(t){(0,c.Z)(b,t);var e,r,g=(e=b,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,s.Z)(e);if(r){var o=(0,s.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,u.Z)(this,t)});function b(){var t;(0,o.Z)(this,b);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=g.call.apply(g,[this].concat(r)),(0,l.Z)((0,a.Z)(t),"state",{}),(0,l.Z)((0,a.Z)(t),"onClick",(function(){t.setState({showSelectTable:!0})})),(0,l.Z)((0,a.Z)(t),"onSelect",(function(e){var r=t.props,n=(r.value,r.onChange),o=[];if(e){var i,a=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Z(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Z(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(e);try{for(a.s();!(i=a.n()).done;){var c=i.value,u=null;if(u=c.title instanceof Array?c.title[0]:c.title,c.title&&c.title.includes("@R@")){var s=u.split("@R@");u=s[s.length-1]}o.push(c.code+"@R@"+u)}}catch(t){a.e(t)}finally{a.f()}}n(o)})),t}return(0,i.Z)(b,[{key:"render",value:function(){var t=this.props,e=t.id,r=t.value,o=(t.itemType,t.fieldConfig),i=t.onChange,a=t.style,c=t.maxSelected,u=t.onEntityClick,s=t.mainCode,l=t.serverKey;(0,n.Z)(this.state);var g=[],Z=[];return(r instanceof Array?r:r?[r]:[]).forEach((function(t){if(t.indexOf("@R@")>0){var e=t.split("@R@");g.push({code:e[0],title:e[1]}),Z.push({value:t,label:u?(0,m.tZ)(h.ZP,{size:"small",style:{padding:"0px"},type:"link",title:"",onClick:function(t){t.stopPropagation(),u(e[0])}},e[1]):e[1]})}})),(0,m.tZ)(f.Fragment,null,(0,m.tZ)(p.Z,{overlayClassName:"-popover",placement:"bottom",color:"#f0f0f0",overlayStyle:{maxWidth:"calc(100vw - 60px)",maxHeight:"calc(100vh - 50px)"},overlayInnerStyle:{padding:"0px"},content:(0,m.tZ)("div",{style:{height:300,backgroundColor:"#fafafa",overflow:"auto",borderStyle:"solid",borderRadius:"6px",borderWidth:"0px",borderColor:"#8c8c8c"}},(0,m.tZ)(y.Z,{serverKey:l,mainCode:s,maxSelectedRows:c,selectedRows:g,sourceId:o.id,onChange:this.onSelect})),trigger:"click"},(0,m.tZ)(d.default,{id:e,style:w({},a),value:r,mode:"multiple",placeholder:"请选择".concat(o.title),notFoundContent:"请选择",allowClear:!0,showArrow:!0,suffixIcon:(0,m.tZ)(v.Z,null),dropdownStyle:{display:"none"},onChange:function(t){i(t)},options:Z})))}}]),b}(f.PureComponent);(0,l.Z)(b,"defaultProps",{maxSelected:100})},67077:function(t,e,r){"use strict";var n=r(20511),o=r(30698),i=r(15274),a=r(67294),c=r(9676),u=r(16117),s=r(36646),l=r(58998),f=r(4107),h=r(34041),p=r(72985),d=r(15128),v=r(91118),y=r(74809),m=r(48565),g=r(28101),w=r(40684),Z=r(49073),b=r(2131),x=r(840),k=r(22364),L=r(13575),C=r(97038),O=r(39481),S=r(94716),E=r(5301),P=r(2603),j=r(52656),I=["value","onChange","style"],R=["value"],_=["fieldConfig","value","onChange","id","mainCode"];function N(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function T(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?N(Object(r),!0).forEach((function(e){(0,i.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var D=c.Z.Group,A=u.ZP.Group,F=(0,j.tZ)(s.Z,{tip:"Loading..."},(0,j.tZ)(l.Z,{message:"正在加载数据。。。",description:"初次访问加载数据较多，可能需要几秒或几分钟，请耐心等待！！",type:"info"})),G=(0,w.ZP)({resolved:{},chunkName:function(){return"signature"},isReady:function(t){var e=this.resolve(t);return!0===this.resolved[e]&&!!r.m[e]},importAsync:function(){return Promise.all([r.e(592),r.e(958)]).then(r.bind(r,21931))},requireAsync:function(t){var e=this,r=this.resolve(t);return this.resolved[r]=!1,this.importAsync(t).then((function(t){return e.resolved[r]=!0,t}))},requireSync:function(t){var e=this.resolve(t);return r(e)},resolve:function(){return 21931}},{fallback:F}),M=(0,w.ZP)({resolved:{},chunkName:function(){return"chemstruc-graph"},isReady:function(t){var e=this.resolve(t);return!0===this.resolved[e]&&!!r.m[e]},importAsync:function(){return Promise.all([r.e(592),r.e(76),r.e(556),r.e(466),r.e(14),r.e(66),r.e(836),r.e(367),r.e(429),r.e(486),r.e(623),r.e(636),r.e(211),r.e(591),r.e(590)]).then(r.bind(r,42888))},requireAsync:function(t){var e=this,r=this.resolve(t);return this.resolved[r]=!1,this.importAsync(t).then((function(t){return e.resolved[r]=!0,t}))},requireSync:function(t){var e=this.resolve(t);return r(e)},resolve:function(){return 42888}},{fallback:F}),B=(0,w.ZP)({resolved:{},chunkName:function(){return"html-editor-draft"},isReady:function(t){var e=this.resolve(t);return!0===this.resolved[e]&&!!r.m[e]},importAsync:function(){return Promise.all([r.e(592),r.e(76),r.e(556),r.e(510)]).then(r.bind(r,51768))},requireAsync:function(t){var e=this,r=this.resolve(t);return this.resolved[r]=!1,this.importAsync(t).then((function(t){return e.resolved[r]=!0,t}))},requireSync:function(t){var e=this.resolve(t);return r(e)},resolve:function(){return 51768}},{fallback:F}),K=(0,w.ZP)({resolved:{},chunkName:function(){return"code-editor-sql-code-editor"},isReady:function(t){var e=this.resolve(t);return!0===this.resolved[e]&&!!r.m[e]},importAsync:function(){return Promise.all([r.e(592),r.e(867),r.e(679)]).then(r.bind(r,98274))},requireAsync:function(t){var e=this,r=this.resolve(t);return this.resolved[r]=!1,this.importAsync(t).then((function(t){return e.resolved[r]=!0,t}))},requireSync:function(t){var e=this.resolve(t);return r(e)},resolve:function(){return 98274}},{fallback:F}),q=(0,w.ZP)({resolved:{},chunkName:function(){return"color-picker"},isReady:function(t){var e=this.resolve(t);return!0===this.resolved[e]&&!!r.m[e]},importAsync:function(){return Promise.all([r.e(592),r.e(432)]).then(r.bind(r,19221))},requireAsync:function(t){var e=this,r=this.resolve(t);return this.resolved[r]=!1,this.importAsync(t).then((function(t){return e.resolved[r]=!0,t}))},requireSync:function(t){var e=this.resolve(t);return r(e)},resolve:function(){return 19221}},{fallback:F}),V=(0,w.ZP)({resolved:{},chunkName:function(){return"date-picker"},isReady:function(t){var e=this.resolve(t);return!0===this.resolved[e]&&!!r.m[e]},importAsync:function(){return Promise.resolve().then(r.bind(r,97182))},requireAsync:function(t){var e=this,r=this.resolve(t);return this.resolved[r]=!1,this.importAsync(t).then((function(t){return e.resolved[r]=!0,t}))},requireSync:function(t){var e=this.resolve(t);return r(e)},resolve:function(){return 97182}},{fallback:F}),H=f.Z.TextArea;function Y(t){var e=[],r=Z.Z.getEnums(t);return r&&r.map((function(t){e.push({label:(t.order?t.order+".":"")+t.title,value:t.value})})),e}e.Z=function(t){var e=t.fieldConfig,r=t.value,i=t.onChange;return function(t,e,r,i,c,s,l){var w=d.Z.getControlType(r,i),Z=void 0,_=r.disabled?"无需输入":"请输入".concat(r.title),N=r.disabled,F=r.min,z=F||"0"==F?S.Z.configParamTrans(F):void 0,U=(F=r.max)||"0"==F?S.Z.configParamTrans(F):void 0,W=T({id:t,mainCode:e,fieldConfig:r,min:z,max:U,itemType:w,viewOrEdit:"edit",onChange:c,disabled:N,value:i,style:{minWidth:220,width:"100%"}},l),Q=T({id:t,placeholder:_,disabled:N,value:i,onChange:c,style:{minWidth:220,width:"100%"}},l),$=(0,j.tZ)(f.Z,{type:"text",placeholder:"暂未实现-".concat(w),disabled:!0});if(E.cB.getCustomEditControl(w))return a.createElement(E.cB.getCustomEditControl(w),W);switch(w){case"int":case"decimal":case"float":case"double":case"intrange":case"decimalrange":Z=(0,j.tZ)(y.Z,W);break;case"text":Z=(0,j.tZ)(f.Z,(0,o.Z)({allowClear:!0,type:"text"},Q));break;case"range":Z=(0,j.tZ)(m.Z,W);break;case"select":Z=(0,j.tZ)(h.default,(0,o.Z)({},Q,{notFoundContent:"暂无选项",allowClear:!0,showSearch:!0,optionLabelProp:"value",optionFilterProp:"label",options:Y(r.mstrucId)}));break;case"multiselect":case"texttags":Z=(0,j.tZ)(h.default,(0,o.Z)({mode:"multiple"},Q,{value:i&&""!=i?"string"==typeof i?i.split(","):i:void 0,notFoundContent:"暂无选项",allowClear:!0,showSearch:!0,optionLabelProp:"value",optionFilterProp:"label",showArrow:!0,options:Y(r.mstrucId)}));break;case"checkbox":Z=(0,j.tZ)(D,(0,o.Z)({},Q,{options:Y(r.mstrucId),value:"string"==typeof i?i.split(","):i}));break;case"radio":Z=(0,j.tZ)(A,(0,o.Z)({},Q,{options:Y(r.mstrucId),value:"string"==typeof i?i.split(",")[0]:i}));break;case"yes-no-switch":var J=Q.value,X=Q.onChange,tt=(Q.style,(0,n.Z)(Q,I));Z=(0,j.tZ)(p.Z,(0,o.Z)({style:{width:"60px"},checkedChildren:"是",unCheckedChildren:"否",checked:"是"==J,onChange:function(t){X(t?"是":"否")}},tt));break;case"yes-no-radio":var et=Q.value,rt=(0,n.Z)(Q,R);Z=(0,j.tZ)(A,(0,o.Z)({value:et?"是"==et?"是":"否":null},rt),(0,j.tZ)(u.ZP,{value:"是"},"是"),(0,j.tZ)(u.ZP,{value:"否"},"否"));break;case"date-YY":case"daterange-YY":case"date-M1":case"daterange-M1":case"date":case"daterange":case"datetime-HH":case"datetimerange-HH":case"datetime-mm":case"datetimerange-mm":case"datetime":case"datetimerange":case"time-HH":case"timerange-HH":case"time-mm":case"timerange-mm":case"time":case"timerange":Z=(0,j.tZ)(V,W);break;case"textarea":case"url":Z=(0,j.tZ)(H,(0,o.Z)({rows:3,allowClear:!0},Q));break;case"html":Z=(0,j.tZ)(B,(0,o.Z)({viewOrEdit:"edit"},W));break;case"steps":Z=(0,j.tZ)(v.Z,(0,o.Z)({},W,{options:Y(r.mstrucId)}));break;case"password":Z=(0,j.tZ)(f.Z.Password,(0,o.Z)({},Q,{autoComplete:"new-password",prefix:(0,j.tZ)(P.Z,{className:"site-form-item-icon"})}));break;case"preselect":Z=(0,j.tZ)(g.Z,W);break;case"caselect":Z=(0,j.tZ)(k.Z,W);break;case"relation":default:Z=$;break;case"file":case"video":case"picture":case"non-download-file":Z=(0,j.tZ)(b.Z,W);break;case"chemstruc":Z=(0,j.tZ)(M,(0,o.Z)({viewOrEdit:"edit"},W));break;case"sql-code-editor":Z=(0,j.tZ)(K,(0,o.Z)({viewOrEdit:"edit"},W));break;case"relselect":case"refselect":case"entity-select":Z=(0,j.tZ)(L.Z,(0,o.Z)({maxSelected:U?parseInt(U):void 0},W));break;case"table-entity-select":Z=(0,j.tZ)(C.Z,(0,o.Z)({maxSelected:U?parseInt(U):void 0},W));break;case"lab-tree-select":Z=(0,j.tZ)(O.Z,(0,o.Z)({maxSelected:U?parseInt(U):void 0},W));break;case"progress":Z=(0,j.tZ)(x.Z,W);break;case"signature":Z=(0,j.tZ)(G,W);break;case"color":Z=(0,j.tZ)(q,W);break;case"hidden":Z=(0,j.tZ)(f.Z,{type:"hidden",value:i,disabled:!0})}return Z}(t.id,t.mainCode,e,r,i,0,(0,n.Z)(t,_))}},15989:function(t,e,r){"use strict";r(67294);var n=r(44644),o=r(49073),i=r(52656);e.Z=function(t){var e=t.value,r=(t.itemType,t.fieldConfig),a=o.Z.getEnumValueColor(r.mstrucId,e);return(0,i.tZ)("span",{className:"infoStyle"},e?(0,i.tZ)(n.Z,{color:a||"green",text:e}):null)}},75645:function(t,e,r){"use strict";r(67294);var n=r(12513),o=r(49073),i=r(52656);e.Z=function(t){var e=t.value,r=(t.itemType,t.fieldConfig),a=[];if(e){var c=e;e instanceof Array||(c=e.split(",")),c.forEach((function(t){var c=o.Z.getEnumValueColor(r.mstrucId,e);a.push((0,i.tZ)(n.Z,{key:t,color:c||"blue"},t))}))}return(0,i.tZ)("span",{className:"infoStyle"},a)}},74809:function(t,e,r){"use strict";var n=r(30698),o=r(15274),i=(r(67294),r(35697)),a=r(18230),c=r(94716),u=r(52656);function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function l(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){(0,o.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}e.Z=function(t){var e=t.id,r=t.value,o=t.itemType,s=t.fieldConfig,f=t.onChange,h=t.style,p=t.min,d=t.max,v=void 0,y=function(t){f&&f(t)},m=c.Z.splitValue(r),g=m.valueBegin,w=m.valueEnd,Z=r||0==r?r:null,b=function(t){f&&f(c.Z.concatValue(t,w))},x=function(t){f&&f(c.Z.concatValue(g,t))},k=function(t){(!t.target.value&&0!=t.target.value||isNaN(t.target.value))&&(t.target.value=null)},L=s.disabled?"无需输入":"请输入".concat(s.title),C=s.disabled,O={id:e,placeholder:L,disabled:C,value:r};switch(o){case"int":v=(0,u.tZ)(i.Z,(0,n.Z)({style:l({},h),min:p,max:d,stringMode:!0},O,{value:Z,onChange:y}));break;case"decimal":case"float":case"double":v=(0,u.tZ)(i.Z,(0,n.Z)({style:l({},h)},O,{value:Z,min:p,max:d,step:.1,onChange:y}));break;case"intrange":v=(0,u.tZ)(a.Z,null,(0,u.tZ)(i.Z,{min:p,max:d,placeholder:"开始",value:g,onKeyUp:k,onChange:b}),"~",(0,u.tZ)(i.Z,{min:p,max:d,placeholder:"结束",value:w,onKeyUp:k,onChange:x}));break;case"decimalrange":v=(0,u.tZ)(a.Z,null,(0,u.tZ)(i.Z,{min:p,max:d,placeholder:"开始",value:g,onChange:b,step:.1,disabled:C}),"~",(0,u.tZ)(i.Z,{min:p,max:d,placeholder:"结束",value:w,step:.1,onChange:x,disabled:C}))}return v}},48565:function(t,e,r){"use strict";r(67294);var n=r(4107),o=r(94716),i=r(52656);e.Z=function(t){var e,r=t.id,a=t.value,c=(t.itemType,t.fieldConfig),u=t.onChange,s=(t.style,o.Z.splitValue(a)),l=s.valueBegin,f=s.valueEnd,h=c.disabled;return e=(0,i.tZ)(n.Z.Group,{compact:!0},(0,i.tZ)(n.Z,{id:r,style:{width:"45%"},disabled:h,min:c.min,max:c.max,placeholder:"开始",value:l,onChange:function(t){var e=t.target.value;u&&u(o.Z.concatValue(e,f))}}),"~",(0,i.tZ)(n.Z,{style:{width:"45%"},disabled:h,min:c.min,max:c.max,placeholder:"结束",value:f,onChange:function(t){var e=t.target.value;u&&u(o.Z.concatValue(l,e))}})),e}},840:function(t,e,r){"use strict";var n=r(30698),o=r(15274),i=(r(67294),r(98879)),a=r(35697),c=r(52656);function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){(0,o.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}e.Z=function(t){var e,r=t.value,o=(t.itemType,t.fieldConfig),u=t.onChange,l=t.style,f=t.viewOrEdit;e=r?isNaN(r)?r:r.toString():0;var h,p={placeholder:o.disabled?"无需输入":"请输入".concat(o.title),disabled:o.disabled,value:r};return h="view"==f||o.disabled?(0,c.tZ)(i.Z,{width:90,percent:e}):(0,c.tZ)(a.Z,(0,n.Z)({style:s({},l),min:0,max:100},p,{onKeyUp:function(t){t.target.value&&!isNaN(t.target.value)?t.target.value=parseInt(t.target.value):t.target.value=0},onChange:function(t){u&&u(t)}})),h}},84680:function(t,e,r){"use strict";r.d(e,{Z:function(){return m}});var n=r(90237),o=r(65337),i=r(95225),a=r(39576),c=r(61378),u=r(69905),s=r(15274),l=r(67294),f=r(18230),h=r(71577),p=r(55241),d=r(24019),v=r(52656);function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var m=function(t){(0,a.Z)(g,t);var e,r,m=(e=g,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,u.Z)(e);if(r){var o=(0,u.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,c.Z)(this,t)});function g(){var t;(0,n.Z)(this,g);for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return t=m.call.apply(m,[this].concat(r)),(0,s.Z)((0,i.Z)(t),"state",{showDtmplView:!1,showSelectTable:!1,selectedCodes:void 0,openCode:void 0}),(0,s.Z)((0,i.Z)(t),"showRfieldDtmplView",(function(e){t.setState({openCode:e,showDtmplView:!0})})),(0,s.Z)((0,i.Z)(t),"hiddenDtmplView",(function(){t.setState({showDtmplView:!1})})),(0,s.Z)((0,i.Z)(t),"handleRFieldSelect",(function(t){})),(0,s.Z)((0,i.Z)(t),"deleteRFieldValue",(function(t){})),(0,s.Z)((0,i.Z)(t),"showCount",(function(){var e=t.props.value,r="";if(e instanceof Array){var n,o=0,i=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(o++,(r+=a&&a.indexOf("@R@")>0?a.split("@R@")[1]:a).length>=20)break}}catch(t){i.e(t)}finally{i.f()}return o}return 1})),(0,s.Z)((0,i.Z)(t),"needMore",(function(){var e=t.props.value,r=t.showCount();return(e instanceof Array?e.length:1)>r})),(0,s.Z)((0,i.Z)(t),"getValue",(function(e){var r,n=t.props,o=n.fieldConfig,i=n.value,a=o.buttons;return r=i instanceof Array?e&&e>0&&i.length>e?i.slice(0,e):i:i?i.split(","):[],a&&a.includes("detail")?(0,v.tZ)(f.Z,{key:e?e+1:1,size:[0,4],wrap:!0},r.map((function(e,r){var n=!!e&&e.indexOf("@R@")>0,o=n?e.split("@R@")[1]:e,i=e?e.split("@R@")[0]:void 0;return n?(0,v.tZ)(h.ZP,{key:r,style:{padding:"0px 0px",height:"100%"},type:"link",title:"",onClick:function(){t.showRfieldDtmplView(i)}},o):(0,v.tZ)("span",{key:r},o)}))):(0,v.tZ)(f.Z,{key:e?e+2:2,size:[8,16],wrap:!0},r.map((function(t,e){var r=t&&t.indexOf("@R@")>0?t.split("@R@")[1]:t;return t&&t.split("@R@")[0],(0,v.tZ)("span",{key:e},r)})))})),t}return(0,o.Z)(g,[{key:"render",value:function(){var t=this.props,e=t.fieldConfig,r=(t.value,t.itemType,t.serverKey),n=this.state,o=n.showDtmplView,i=n.openCode,a=e.buttons,c=this.getValue(this.showCount());return(0,v.tZ)(l.Fragment,null,(0,v.tZ)(f.Z,{key:3,size:[8,16],wrap:!0,style:{minWidth:"80px"}},c,this.needMore()?(0,v.tZ)(p.Z,{overlayStyle:{maxWidth:"400px"},placement:"leftBottom",trigger:"click",content:this.getValue()},(0,v.tZ)(h.ZP,{key:"more",type:"link",size:"small"},"更多...")):null,a&&a.includes("detail")?(0,v.tZ)(d.Z,{serverKey:r,key:"mdv",open:o,onCancel:this.hiddenDtmplView,sourceId:e.id,code:i}," "):""))}}]),g}(l.PureComponent)},91118:function(t,e,r){"use strict";var n=r(20511),o=(r(67294),r(91718)),i=r(34041),a=r(49073),c=r(52656),u=["viewOrEdit"];e.Z=function(t){var e,r=t.viewOrEdit,s=void 0===r?"view":r,l=(0,n.Z)(t,u),f=l.value,h=l.fieldConfig,p=l.onChange,d=l.options,v=a.Z.getEnums(h.mstrucId),y=void 0;for(var m in v)f==v[m].value&&(y=parseInt(m));var g=[];return v.map((function(t){return g.push({title:t.title})})),e=h.disabled||"view"==s?(0,c.tZ)(o.Z,{items:g,current:y,size:"small"}):(0,c.tZ)(i.default,{placeholder:"请选择".concat(h.title),notFoundContent:"暂无选项",allowClear:!0,showSearch:!0,value:f,onChange:function(t){p&&p(t)},options:d}),e}},95026:function(t,e,r){"use strict";r.d(e,{Z:function(){return v}});var n=r(90237),o=r(65337),i=r(95225),a=r(39576),c=r(61378),u=r(69905),s=r(15274),l=r(67294),f=r(94716),h=r(55241),p=r(71577),d=r(52656);var v=function(t){(0,a.Z)(y,t);var e,r,v=(e=y,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,u.Z)(e);if(r){var o=(0,u.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,c.Z)(this,t)});function y(){var t;(0,n.Z)(this,y);for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return t=v.call.apply(v,[this].concat(r)),(0,s.Z)((0,i.Z)(t),"state",{}),(0,s.Z)((0,i.Z)(t),"toString",(function(t){return t?t.toString():t})),(0,s.Z)((0,i.Z)(t),"viewButton",(function(){var e=t.props,r=e.value,n=e.isHtml,o=e.maxWidth;return(0,d.tZ)(l.Fragment,null,(0,d.tZ)(h.Z,{overlayStyle:{maxWidth:o},placement:"leftBottom",trigger:"click",content:(0,d.tZ)(l.Fragment,null,n?(0,d.tZ)("div",{style:{padding:"6px"},dangerouslySetInnerHTML:{__html:r}}):(0,d.tZ)("div",{style:{padding:"6px"}},r))},(0,d.tZ)(p.ZP,{type:"link",size:"small"},"查看")," "))})),t}return(0,o.Z)(y,[{key:"render",value:function(){var t=this.props,e=t.value,r=t.isHtml,n=t.showMax,o=this.toString(e);if(r){var i=new RegExp("<[^<>]+>","g");o=e.replace(i,"")}var a=f.Z.getLongTextStyle(o.substring(0,n));return(0,d.tZ)(l.Fragment,null,o.length<=n||n<=0?(0,d.tZ)("span",{className:"infoStyle",style:a},o):(0,d.tZ)("span",{className:"infoStyle",style:a},o.substring(0,n),"...",this.viewButton()))}}]),y}(l.PureComponent);(0,s.Z)(v,"defaultProps",{isHtml:!1,showMax:30,maxWidth:"1024px"})},2131:function(t,e,r){"use strict";r.d(e,{Z:function(){return x}});var n=r(32763),o=r(59755),i=r(90237),a=r(65337),c=r(95225),u=r(39576),s=r(61378),l=r(69905),f=r(15274),h=r(67294),p=r(32823),d=r(63807),v=r(71577),y=r(84391),m=r(49811),g=r(38763),w=r(94716),Z=r(52656);function b(){b=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new S(n||[]);return o(a,"_invoke",{value:k(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(E([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function i(o,a,c,u){var s=f(t[o],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,n.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,c,u)}),(function(t){i("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return i("throw",t,c,u)}))}u(s.arg)}var a;o(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=L(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function L(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,L(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(x.prototype),s(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=E,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}var x=function(t){(0,u.Z)(h,t);var e,r,n=(e=h,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,l.Z)(e);if(r){var o=(0,l.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,s.Z)(this,t)});function h(){var t;(0,i.Z)(this,h);for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t=n.call.apply(n,[this].concat(r)),(0,f.Z)((0,c.Z)(t),"state",{}),(0,f.Z)((0,c.Z)(t),"handleRemove",(function(e){t.props.onChange(JSON.stringify({valid:"delete"}))})),(0,f.Z)((0,c.Z)(t),"handleChange",function(){var e=(0,o.Z)(b().mark((function e(r){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("file change:",r),"done"==r.file.status&&(n={valid:"new",fileKey:r.file.response.fileKey,fileName:r.file.originFileObj.name},(0,t.props.onChange)(JSON.stringify(n)));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,f.Z)((0,c.Z)(t),"beforeUpload",(function(t){return!!(t.size/1024/1024<40)||(p.ZP.error("超过40M限制 不允许上传~"),!1)})),t}return(0,a.Z)(h,[{key:"render",value:function(){var t=this.props,e=t.id,r=t.itemType,n=t.disabled,o=t.value,i=t.serverKey,a=[];if(o){var c=o;"string"==typeof c&&(c=JSON.parse(o)),!0===c.valid?a.push({uid:"-1",name:c.base.fileName,status:"done",url:w.Z.joinPath(w.Z.joinPath(w.Z.api(),"/v3/files"),c.base.path)+"?@token=".concat(w.Z.hydrocarbonToken(),"&@programToken=").concat(w.Z.programCode(),"&disposition=attachment")}):"new"==c.valid&&a.push({uid:"-2",name:c.fileName})}return(0,Z.tZ)("div",null,(0,Z.tZ)(d.Z,{id:e,maxCount:1,accept:"picture"===r?".png, .jpg, .jpeg":"video"===r?".mp4":void 0,listType:"picture"==r?"picture":"text",fileList:0==a.length?void 0:a,disabled:n,name:"file",headers:g.Z.getHeaderObj(),action:function(t){return m.Z.postFileAction(i,t)},beforeUpload:this.beforeUpload,onChange:this.handleChange,onRemove:this.handleRemove},a&&a.length>=1?"":(0,Z.tZ)(v.ZP,{disabled:n},(0,Z.tZ)(y.Z,null)," ",n?"无需上传":"点击上传")))}}]),h}(h.PureComponent)},25291:function(t,e,r){"use strict";var n=r(20511),o=r(30698),i=r(15274),a=r(67294),c=r(36646),u=r(58998),s=r(44644),l=r(53807),f=r(4107),h=r(40684),p=r(15128),d=r(75645),v=r(15989),y=r(91118),m=r(94716),g=r(84680),w=r(27484),Z=r.n(w),b=r(840),x=r(95026),k=r(5301),L=r(52656),C=["fieldConfig","value","holderType"];function O(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var S=(0,L.tZ)(c.Z,{tip:"Loading..."},(0,L.tZ)(u.Z,{message:"正在加载数据。。。",description:"初次访问加载数据较多，可能需要几秒或几分钟，请耐心等待！！",type:"info"})),E=(0,h.ZP)({resolved:{},chunkName:function(){return"signature"},isReady:function(t){var e=this.resolve(t);return!0===this.resolved[e]&&!!r.m[e]},importAsync:function(){return Promise.all([r.e(592),r.e(958)]).then(r.bind(r,21931))},requireAsync:function(t){var e=this,r=this.resolve(t);return this.resolved[r]=!1,this.importAsync(t).then((function(t){return e.resolved[r]=!0,t}))},requireSync:function(t){var e=this.resolve(t);return r(e)},resolve:function(){return 21931}},{fallback:S}),P=(0,h.ZP)({resolved:{},chunkName:function(){return"chemstruc-graph"},isReady:function(t){var e=this.resolve(t);return!0===this.resolved[e]&&!!r.m[e]},importAsync:function(){return Promise.all([r.e(592),r.e(76),r.e(556),r.e(466),r.e(14),r.e(66),r.e(836),r.e(367),r.e(429),r.e(486),r.e(623),r.e(636),r.e(211),r.e(591),r.e(590)]).then(r.bind(r,42888))},requireAsync:function(t){var e=this,r=this.resolve(t);return this.resolved[r]=!1,this.importAsync(t).then((function(t){return e.resolved[r]=!0,t}))},requireSync:function(t){var e=this.resolve(t);return r(e)},resolve:function(){return 42888}},{fallback:S}),j=(0,h.ZP)({resolved:{},chunkName:function(){return"code-editor-sql-code-editor"},isReady:function(t){var e=this.resolve(t);return!0===this.resolved[e]&&!!r.m[e]},importAsync:function(){return Promise.all([r.e(592),r.e(867),r.e(679)]).then(r.bind(r,98274))},requireAsync:function(t){var e=this,r=this.resolve(t);return this.resolved[r]=!1,this.importAsync(t).then((function(t){return e.resolved[r]=!0,t}))},requireSync:function(t){var e=this.resolve(t);return r(e)},resolve:function(){return 98274}},{fallback:S}),I=(0,h.ZP)({resolved:{},chunkName:function(){return"color-picker"},isReady:function(t){var e=this.resolve(t);return!0===this.resolved[e]&&!!r.m[e]},importAsync:function(){return Promise.all([r.e(592),r.e(432)]).then(r.bind(r,19221))},requireAsync:function(t){var e=this,r=this.resolve(t);return this.resolved[r]=!1,this.importAsync(t).then((function(t){return e.resolved[r]=!0,t}))},requireSync:function(t){var e=this.resolve(t);return r(e)},resolve:function(){return 19221}},{fallback:S}),R=(0,h.ZP)({resolved:{},chunkName:function(){return"controls-file-view"},isReady:function(t){var e=this.resolve(t);return!0===this.resolved[e]&&!!r.m[e]},importAsync:function(){return Promise.all([r.e(592),r.e(441)]).then(r.bind(r,76994))},requireAsync:function(t){var e=this,r=this.resolve(t);return this.resolved[r]=!1,this.importAsync(t).then((function(t){return e.resolved[r]=!0,t}))},requireSync:function(t){var e=this.resolve(t);return r(e)},resolve:function(){return 76994}},{fallback:S});function _(t,e,r,n,c){var u=p.Z.getControlType(t,e),h=r;h||(h="descriptions");t.colNum;var w=void 0,C=(t.disabled||"请输入".concat(t.title),t.disabled,e||(t.defaultValue&&!m.Z.isConfigDefaultValue(t.defaultValue)?t.defaultValue:"")),S=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?O(Object(r),!0).forEach((function(e){(0,i.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({fieldConfig:t,itemType:u,value:C,viewOrEdit:"view"},c);if(k.cB.getCustomEditControl(u))return a.createElement(k.cB.getCustomViewControl(u),S);var _=(0,L.tZ)("span",{className:"infoStyle"},"暂未完成-".concat(u));switch(u){case"int":case"decimal":case"float":case"double":case"intrange":case"decimalrange":case"range":case"daterange-YY":case"daterange-M1":case"daterange":case"datetimerange-HH":case"datetimerange-mm":case"datetimerange":case"timerange-HH":case"timerange-mm":case"timerange":case"caselect":w=(0,L.tZ)("span",{className:"infoStyle"},C);break;case"date-YY":case"date-M1":case"date":case"datetime-HH":case"datetime-mm":case"datetime":case"time-HH":case"time-mm":case"time":w=(0,L.tZ)("span",{className:"infoStyle"},C?Z()(C).format(m.Z.getDayjsFormat(u)):void 0);break;case"text":case"textarea":case"preselect":w="table"==h?(0,L.tZ)(x.Z,{maxWidth:"400px",isHtml:!1,value:C,showMax:t.ellipsisLength}):(0,L.tZ)("span",{className:"infoStyle"},C);break;case"select":case"radio":case"yes-no-switch":w=(0,L.tZ)(v.Z,S);break;case"yes-no-radio":w=(0,L.tZ)("span",{className:"infoStyle"},C?(0,L.tZ)(s.Z,{color:"是"==C?"green":"red",text:C}):null);break;case"multiselect":case"checkbox":w=(0,L.tZ)(d.Z,S);break;case"html":w="table"==h?(0,L.tZ)(x.Z,{isHtml:!0,value:C}):(0,L.tZ)("div",{dangerouslySetInnerHTML:{__html:C}});break;case"steps":w=(0,L.tZ)(y.Z,S);break;case"password":w=C?(0,L.tZ)(l.Z,(0,o.Z)({title:C,color:"#fff1b8"},S),(0,L.tZ)("span",{className:"infoStyle"},"********")):null;break;case"relation":default:w=_;break;case"file":case"picture":case"video":w=(0,L.tZ)(R,S);break;case"non-download-file":w=(0,L.tZ)(R,(0,o.Z)({},S,{downloadable:!1}));break;case"chemstruc":w=(0,L.tZ)(P,S);break;case"sql-code-editor":w=(0,L.tZ)(j,(0,o.Z)({viewOrEdit:"view"},S));break;case"relselect":case"refselect":case"entity-select":case"table-entity-select":w=(0,L.tZ)(g.Z,S);break;case"progress":w=(0,L.tZ)(b.Z,S);break;case"signature":w=(0,L.tZ)(E,S);break;case"color":w=(0,L.tZ)(I,S);break;case"url":w=(0,L.tZ)("a",{target:"_blank",href:C},"网址");break;case"hidden":w=(0,L.tZ)(f.Z,{type:"hidden",value:e,disabled:!0})}return w}e.Z=function(t){return _(t.fieldConfig,t.value,t.holderType,0,(0,n.Z)(t,C))}},4264:function(t,e,r){"use strict";r.d(e,{Z:function(){return h}});var n=r(90237),o=r(65337),i=r(39576),a=r(61378),c=r(69905),u=r(67294),s=r(88710),l=r(52656);var f=s.Z.Title,h=function(t){(0,i.Z)(h,t);var e,r,s=(e=h,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,c.Z)(e);if(r){var o=(0,c.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,a.Z)(this,t)});function h(){return(0,n.Z)(this,h),s.apply(this,arguments)}return(0,o.Z)(h,[{key:"render",value:function(){return(0,l.tZ)(u.Fragment,null,(0,l.tZ)(f,null,"没有找到自定义页面"),(0,l.tZ)(f,{level:5},"url:/",this.props.pageName),(0,l.tZ)(f,{level:5},"请确认配置"))}}]),h}(u.Component)},7935:function(t,e,r){"use strict";r.d(e,{Z:function(){return y}});var n=r(90237),o=r(65337),i=r(95225),a=r(39576),c=r(61378),u=r(69905),s=r(15274),l=r(67294),f=r(71577),h=r(24071),p=r(4264),d=r(5301),v=r(52656);var y=function(t){(0,a.Z)(m,t);var e,r,y=(e=m,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,u.Z)(e);if(r){var o=(0,u.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,c.Z)(this,t)});function m(){var t;(0,n.Z)(this,m);for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return t=y.call.apply(y,[this].concat(r)),(0,s.Z)((0,i.Z)(t),"state",{}),(0,s.Z)((0,i.Z)(t),"getFooter",(function(){var e=t.props.onOk,r=[];return r.unshift((0,v.tZ)(f.ZP,{onClick:e,type:"primary"},"关 闭")),r})),(0,s.Z)((0,i.Z)(t),"customPage",(function(){var e=t.props,r=e.code,n=e.sourceId,o=e.open,i=e.mainCode,a=e.customPath;if(o){var c=d.cB.getCustomPage(a)||p.Z;return l.createElement(c,{code:r,sourceId:n,mainCode:i,pageName:a})}})),t}return(0,o.Z)(m,[{key:"render",value:function(){var t=this.props,e=t.height,r=t.onOk,n=t.open,o=t.width,i=t.title,a=t.bodyWidth;return(0,v.tZ)(h.Z,{open:n,width:o,title:i,closable:!1,bodyStyle:{height:e,width:a,overflow:"auto"},destroyOnClose:!0,centered:!0,onCancel:r,footer:[(0,v.tZ)(f.ZP,{onClick:function(){return r()}},"关 闭")]},this.customPage())}}]),m}(l.PureComponent);(0,s.Z)(y,"defaultProps",{height:"82vh",width:"82vw",bodyWidth:"100%",forceRender:!0,style:{maxWidth:"calc(100vw - 60px)",maxHeight:"calc(100vh - 50px)"}})},72670:function(t,e,r){"use strict";var n=r(92801),o=r(90237),i=r(65337),a=r(95225),c=r(39576),u=r(61378),s=r(69905),l=r(15274),f=r(67294),h=r(18230),p=r(22217),d=r(55241),v=r(71577),y=r(37653),m=r(74499),g=r(52656);var w=function(t){(0,c.Z)(w,t);var e,r,f=(e=w,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,s.Z)(e);if(r){var o=(0,s.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,u.Z)(this,t)});function w(){var t;(0,o.Z)(this,w);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=f.call.apply(f,[this].concat(r)),(0,l.Z)((0,a.Z)(t),"state",{}),(0,l.Z)((0,a.Z)(t),"calcOffsetBottom",(function(t){return t.length>=3?120:2==t.length?86:80})),t}return(0,i.Z)(w,[{key:"render",value:function(){(0,n.Z)(this.state);var t=this.props,e=t.dtmplConfig,r=t.mainCode,o=t.serverKey;if(!e)return null;e.buttons;var i,a=e.cQuerys;return a&&a.length>3&&(i=(0,g.tZ)("div",{style:{width:"100px"},className:"btns"},(0,g.tZ)(h.Z,{direction:"vertical"},a.map((function(t,e){if(e>2)return(0,g.tZ)(m.Z,{serverKey:o,block:!0,key:t.id,mainCode:r,cQueryConfig:t})}))))),a&&a.length>0&&r?(0,g.tZ)(p.Z,{style:{position:"absolute",top:180,right:10,maxHeight:90},offsetTop:300},(0,g.tZ)("div",{className:"submitButtonBar"},(0,g.tZ)("ul",null,a?a.map((function(t,e){if(e<3)return(0,g.tZ)("li",{key:e},(0,g.tZ)(m.Z,{serverKey:o,type:"text",block:!0,key:t.id,mainCode:r,cQueryConfig:t}))})):"",a&&a.length>2?(0,g.tZ)(d.Z,{placement:"leftTop",content:i,trigger:"hover"},(0,g.tZ)(v.ZP,{block:!0},(0,g.tZ)(y.Z,null),"更多")):""))):""}}]),w}(f.PureComponent);e.Z=w},1233:function(t,e,r){"use strict";r.d(e,{Z:function(){return p}});var n=r(90237),o=r(65337),i=r(95225),a=r(39576),c=r(61378),u=r(69905),s=r(15274),l=r(67294),f=r(22217),h=r(52656);var p=function(t){(0,a.Z)(p,t);var e,r,l=(e=p,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,u.Z)(e);if(r){var o=(0,u.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,c.Z)(this,t)});function p(){var t;(0,n.Z)(this,p);for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return t=l.call.apply(l,[this].concat(r)),(0,s.Z)((0,i.Z)(t),"scrollToAnchor",(function(e){if(e){var r=document.getElementById(t.props.parentId+e.id);r&&r.scrollIntoView({behavior:"smooth",block:"end"})}})),(0,s.Z)((0,i.Z)(t),"scroll",(function(t){t.preventDefault(),t.stopPropagation();var e=document.getElementsByClassName("rightBar")[0];e&&(e.getElementsByTagName("ul")[0].style.marginTop="")})),t}return(0,o.Z)(p,[{key:"render",value:function(){var t=this,e=this.props,r=e.dtmplConfig,n=e.positionRight,o=[];return r&&r.groups.forEach((function(t){o.push({title:t.title,id:t.id})})),r&&r.premises&&r.premises.length>0&&o.push({id:r.premises[0].id,title:"默认字段"}),o&&o.length>3?(0,h.tZ)(f.Z,{style:{position:"absolute",top:60,right:n},offsetTop:80},(0,h.tZ)("div",{className:"rightBar",onScroll:this.scroll},(0,h.tZ)("ul",null,o?o.map((function(e,r){return(0,h.tZ)("li",{onClick:function(){return t.scrollToAnchor(e)},key:r},e.title)})):""))):""}}]),p}(l.PureComponent);(0,s.Z)(p,"defaultProps",{positionRight:15})},45136:function(t,e,r){"use strict";r.d(e,{Z:function(){return m}});var n=r(30698),o=r(20511),i=r(90237),a=r(65337),c=r(39576),u=r(61378),s=r(69905),l=r(15274),f=r(67294),h=r(63783),p=r(55241),d=r(71577),v=r(52656),y=["placement","icon","content"];var m=function(t){(0,c.Z)(f,t);var e,r,l=(e=f,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,s.Z)(e);if(r){var o=(0,s.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,u.Z)(this,t)});function f(){return(0,i.Z)(this,f),l.apply(this,arguments)}return(0,a.Z)(f,[{key:"render",value:function(){var t=this.props,e=t.placement,r=t.icon,i=t.content,a=(0,o.Z)(t,y);return i?(0,v.tZ)(p.Z,{placement:e,content:(0,v.tZ)("div",{dangerouslySetInnerHTML:{__html:i}})},(0,v.tZ)(d.ZP,(0,n.Z)({},a,{icon:r||(0,v.tZ)(h.Z,null)}))):null}}]),f}(f.PureComponent);(0,l.Z)(m,"defaultProps",{placement:"right",size:"small",type:"text"})},28202:function(t,e,r){"use strict";r.d(e,{Z:function(){return G}});var n=r(32763),o=r(59755),i=r(90237),a=r(65337),c=r(95225),u=r(39576),s=r(61378),l=r(69905),f=r(15274),h=r(67294),p=r(35137),d=r(71577),v=r(53807),y=r(47389),m=r(53191),g=r(59879),w=r(49073),Z=r(56440),b=r(99160),x=r(49811),k=r(94716),L=r(29336),C=r(82362),O=r(1233),S=r(41307),E=r(72670),P=r(52656);function j(){j=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(n||[]);return o(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function i(o,a,c,u){var s=f(t[o],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,n.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,c,u)}),(function(t){i("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return i("throw",t,c,u)}))}u(s.arg)}var a;o(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),s(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}var I=function(t){(0,u.Z)(d,t);var e,r,n,h,p=(n=d,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,l.Z)(n);if(h){var r=(0,l.Z)(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return(0,s.Z)(this,t)});function d(){var t;(0,i.Z)(this,d);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=p.call.apply(p,[this].concat(r)),(0,f.Z)((0,c.Z)(t),"state",{loading:!0,id:"dtmplView"+k.Z.getRandomNum(6),snapshotOpen:!1,dtmplData:void 0,premisesTitle:"默认字段",layout:{labelCol:{span:8},wrapperCol:{span:16}}}),(0,f.Z)((0,c.Z)(t),"loadData",(0,o.Z)(j().mark((function e(){var r,n,o,i,a,c,u,s;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.props,n=r.sourceId,o=r.code,i=r.versionId,a=r.serverKey,c=r.codeSource,(u=o)||!c){e.next=6;break}return e.next=5,x.Z.queryCode(n,c,a);case 5:u=e.sent;case 6:if(!u){e.next=14;break}return t.setState({loading:!0}),e.next=10,x.Z.requestViewDtmplData(a,n,u,i);case 10:s=e.sent,t.setState({dtmplData:s,loading:!1}),e.next=15;break;case 14:t.setState({loading:!1});case 15:case"end":return e.stop()}}),e)})))),(0,f.Z)((0,c.Z)(t),"fieldGroupList",(function(){var e=t.props,r=e.dtmplConfig,n=e.serverKey,o=t.state,i=o.dtmplData,a=o.loading,c=o.id,u=[];return r&&(u=r.groups),u.map((function(t){if("relation"!=t.type)return(0,P.tZ)(S.Z,{tip:t.tip,title:t.title,key:t.id,id:c+t.id,className:"hoverable",headStyle:{background:"#f2f4f5"},loading:a},(0,P.tZ)(C.Z,{serverKey:n,fields:t.fields,valueMap:i?i.fieldMap:void 0,width:220}));if(t.fields){var e=void 0;return i&&(e=i.arrayMap[t.id]),(0,P.tZ)(L.Z,{serverKey:n,initCollapse:i&&(!e||e.length<=0),loading:a,parentId:c,key:t.id,fieldGroupConfig:t,value:e,viewOrEdit:"view"})}}))})),t}return(0,a.Z)(d,[{key:"componentDidMount",value:(r=(0,o.Z)(j().mark((function t(){return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadData();case 2:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"componentDidUpdate",value:(e=(0,o.Z)(j().mark((function t(e){var r,n,o,i,a,c;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=this.props).sourceId,n=r.code,o=r.versionId,i=r.refreshCode,a=e.code,e.versionId,c=e.refreshCode,!(n!=a||o&&o!=e.versionId||i&&i!=c)){t.next=5;break}return t.next=5,this.loadData();case 5:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"render",value:function(){var t=this.props,e=t.showRightNav,r=t.rightBarPositionRight,n=t.code,o=(t.sourceId,t.dtmplConfig),i=t.serverKey,a=this.state,c=a.premisesTitle,u=a.loading,s=(a.dtmplData,a.layout,a.snapshotOpen,a.id),l=o?o.premises:void 0;return(0,P.tZ)("div",null,this.fieldGroupList(),l&&l.length>0?(0,P.tZ)(S.Z,{title:c,key:c,id:s+l[0].id,className:"hoverable",headStyle:{background:"#f2f4f5"},loading:u},(0,P.tZ)(C.Z,{serverKey:i,fields:l})):"",e?(0,P.tZ)(O.Z,{parentId:s,positionRight:r,dtmplConfig:o}):"",(0,P.tZ)(E.Z,{serverKey:i,dtmplConfig:o,mainCode:n}))}}]),d}(h.PureComponent);(0,f.Z)(I,"defaultProps",{showRightNav:!0});var R=I;function _(){_=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(n||[]);return o(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function i(o,a,c,u){var s=f(t[o],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,n.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,c,u)}),(function(t){i("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return i("throw",t,c,u)}))}u(s.arg)}var a;o(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),s(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}var N=function(t){(0,u.Z)(y,t);var e,r,n,p,v=(n=y,p=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,l.Z)(n);if(p){var r=(0,l.Z)(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return(0,s.Z)(this,t)});function y(){var t;(0,i.Z)(this,y);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=v.call.apply(v,[this].concat(r)),(0,f.Z)((0,c.Z)(t),"state",{list:void 0,loading:!1,current:void 0}),(0,f.Z)((0,c.Z)(t),"loadData",(0,o.Z)(_().mark((function e(){var r,n,o,i,a,c;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.props,n=r.sourceId,o=r.code,r.showSnapshot,i=r.serverKey,a=t.state.current,!o){e.next=8;break}return t.setState({loading:!0}),e.next=6,x.Z.requestVersionList(i,n,o);case 6:c=e.sent,t.setState({list:c,current:!a&&c.length>0?c[0].code:a,loading:!1});case 8:case"end":return e.stop()}}),e)})))),(0,f.Z)((0,c.Z)(t),"onChange",(function(e){var r=t.props.showSnapshot;t.setState({current:e}),r(e)})),(0,f.Z)((0,c.Z)(t),"detailHistory",(function(){var e=t.state,r=e.list,n=e.current;if(r.length>0)return r.map((function(e,r){var o=!!n&&e.code===n,i=o?"red":"blue";return(0,P.tZ)(Z.Z.Item,{color:i,key:r},k.Z.formateDate(e.time),(0,P.tZ)("br",null),""+e.userName,o?"":(0,P.tZ)(d.ZP,{style:{marginLeft:10},type:"primary",size:"small",onClick:function(){return t.onChange(e.code)}},"查看"))}))})),t}return(0,a.Z)(y,[{key:"componentDidMount",value:(r=(0,o.Z)(_().mark((function t(){return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"componentDidUpdate",value:(e=(0,o.Z)(_().mark((function t(e){var r,n;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=this.props.open,n=this.state.list,r&&!n&&this.loadData();case 3:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"render",value:function(){var t=this.props,e=t.open,r=t.onClose,n=t.dtmplConfig,o=t.sourceId,i=t.code,a=t.serverKey,c=this.state,u=c.list,s=c.current;return(0,P.tZ)(h.Fragment,null,(0,P.tZ)(b.Z,{title:"快照列表",closable:!0,onClose:r,open:e,width:350},u&&u.length>0?(0,P.tZ)(Z.Z,{mode:"alternate"},this.detailHistory()):"暂无历史记录"),(0,P.tZ)(b.Z,{placement:"left",title:"快照查看",closable:!0,mask:!1,onClose:r,open:e,width:"calc(100% - 380px)",style:{maxWidth:1960}},(0,P.tZ)(R,{serverKey:a,showRightNav:!1,dtmplConfig:n,sourceId:o,code:i,versionId:s})))}}]),y}(h.PureComponent);(0,f.Z)(N,"defaultProps",{});var T=N,D=r(45136);function A(){A=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(n||[]);return o(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function i(o,a,c,u){var s=f(t[o],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,n.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,c,u)}),(function(t){i("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return i("throw",t,c,u)}))}u(s.arg)}var a;o(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),s(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}var F=function(t){(0,u.Z)(Z,t);var e,r,n,h=(r=Z,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,l.Z)(r);if(n){var o=(0,l.Z)(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return(0,s.Z)(this,t)});function Z(){var t;(0,i.Z)(this,Z);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=h.call.apply(h,[this].concat(r)),(0,f.Z)((0,c.Z)(t),"state",{loading:!0,dtmplConfig:void 0,snapshotOpen:!1,premisesTitle:"默认字段",layout:{labelCol:{span:8},wrapperCol:{span:16}},refreshCode:void 0}),(0,f.Z)((0,c.Z)(t),"doRefresh",(0,o.Z)(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.setState({refreshCode:k.Z.getRandomNum(6)});case 1:case"end":return e.stop()}}),e)})))),(0,f.Z)((0,c.Z)(t),"goEdit",(function(){var e=t.props;(0,e.goDtmpl)(e.code)})),(0,f.Z)((0,c.Z)(t),"showSnapshot",(function(){t.setState({snapshotOpen:!0})})),(0,f.Z)((0,c.Z)(t),"onSnapshotClose",(function(){t.setState({snapshotOpen:!1})})),(0,f.Z)((0,c.Z)(t),"toSnapshot",(function(){})),t}return(0,a.Z)(Z,[{key:"componentDidMount",value:(e=(0,o.Z)(A().mark((function t(){var e,r,n,o;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.props,r=e.sourceId,n=e.serverKey,t.next=3,w.Z.requestViewDtmplConfig(n,r);case 3:o=t.sent,this.setState({dtmplConfig:o});case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"render",value:function(){var t=this.props,e=t.showRightNav,r=t.rightBarPositionRight,n=t.code,o=t.sourceId,i=t.goDtmpl,a=t.serverKey,c=t.codeSource,u=this.state,s=u.dtmplConfig,l=(u.premisesTitle,u.loading,u.layout,u.snapshotOpen),f=u.refreshCode,h=s?s.buttons:void 0,w=(s&&s.premises,e);return s&&s.groups.length<4&&(w=!1),(0,P.tZ)("div",{className:"detailPage ".concat(w?"showRightNav":"noRightNav")},(0,P.tZ)(p.Z,{bordered:!1,size:"small",key:"detailTitle",className:"hoverable pageHeader"},(0,P.tZ)("h3",null,"详情",s?(0,P.tZ)(D.Z,{content:s.tip}):null,(0,P.tZ)("div",{className:"fr"},h&&h.includes("dtmplEdit")&&i&&!s.editAction?(0,P.tZ)(d.ZP,{className:"hoverbig",onClick:this.goEdit},(0,P.tZ)(y.Z,null)):"",h&&h.includes("history")?(0,P.tZ)(v.Z,{title:"数据快照"},(0,P.tZ)(d.ZP,{className:"hoverbig",onClick:this.showSnapshot},(0,P.tZ)(m.Z,null))):"",(0,P.tZ)(d.ZP,{className:"hoverbig",title:"刷新",onClick:this.doRefresh},(0,P.tZ)(g.Z,null)),(0,P.tZ)(T,{serverKey:a,dtmplConfig:s,code:n,onClose:this.onSnapshotClose,showSnapshot:this.toSnapshot,sourceId:o,open:l})))),(0,P.tZ)(R,{codeSource:c,serverKey:a,refreshCode:f,showRightNav:w,rightBarPositionRight:r,dtmplConfig:s,sourceId:o,code:n}))}}]),Z}(h.PureComponent);(0,f.Z)(F,"defaultProps",{showRightNav:!0,rightBarPositionRight:15});var G=F},82362:function(t,e,r){"use strict";r.d(e,{Z:function(){return d}});var n=r(90237),o=r(65337),i=r(95225),a=r(39576),c=r(61378),u=r(69905),s=r(15274),l=r(67294),f=r(57995),h=r(25291),p=r(52656);var d=function(t){(0,a.Z)(d,t);var e,r,l=(e=d,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,u.Z)(e);if(r){var o=(0,u.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,c.Z)(this,t)});function d(t){var e;return(0,n.Z)(this,d),e=l.call(this,t),(0,s.Z)((0,i.Z)(e),"initViewList",(function(){var t=e.props,r=t.fields,n=t.valueMap,o=t.serverKey,i=[];return r.length>0&&r.forEach((function(t,e){t.title;var r=n?n[t.id]:void 0;if(r=r||(t.defaultValue?t.defaultValue:void 0),t.id,Math.random(),"hidden"!=t.extControlType){var a=(0,p.tZ)(f.Z.Item,{label:t.title,span:t.colNum,key:e,className:"labelcss"},(0,p.tZ)(h.Z,{serverKey:o,holderType:"descriptions",value:r,fieldConfig:t}));i.push(a)}})),i})),e.state={fileList:[]},e}return(0,o.Z)(d,[{key:"render",value:function(){return(0,p.tZ)(f.Z,{column:2},this.initViewList())}}]),d}(l.PureComponent)},24019:function(t,e,r){"use strict";r.d(e,{Z:function(){return y}});var n=r(90237),o=r(65337),i=r(39576),a=r(61378),c=r(69905),u=r(15274),s=r(67294),l=r(24071),f=r(71577),h=r(45532),p=r(28202),d=r(31298),v=r(52656);var y=function(t){(0,i.Z)(s,t);var e,r,u=(e=s,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,c.Z)(e);if(r){var o=(0,c.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,a.Z)(this,t)});function s(){return(0,n.Z)(this,s),u.apply(this,arguments)}return(0,o.Z)(s,[{key:"render",value:function(){var t=this.props,e=t.height,r=(t.onOk,t.onCancel),n=t.code,o=(t.style,t.sourceId),i=t.open,a=t.serverKey;return(0,v.tZ)(l.Z,{open:i,title:"查看",width:"82vw",centered:!0,wrapClassName:"aaa",bodyStyle:{height:e,overflow:"auto"},onCancel:r,footer:[(0,v.tZ)(f.ZP,{key:"back",onClick:r},"取 消")]},(0,v.tZ)(d.ZP,{autoHide:!0,autoHideTimeout:1e3},n?(0,v.tZ)(p.Z,{serverKey:a,showRightNav:!1,sourceId:o,code:n}):""))}}]),s}(s.PureComponent);(0,u.Z)(y,"defaultProps",{showConfirm:!0,height:500,forceRender:!0,style:{maxWidth:"calc(100vw - 60px)",maxHeight:"calc(100vh - 50px)"},cancelText:"取消",form:h.Z.useForm}),(0,u.Z)(y,"state",{viewOrEdit:"view"})},87200:function(t,e,r){"use strict";var n=r(30698),o=r(48418),i=r(67294),a=r(18430),c=r(45532),u=r(71577),s=r(34041),l=r(71230),f=r(15746),h=r(18230),p=r(35137),d=r(57564),v=r(67077),y=r(62508),m=r(74499),g=r(52656),w=a.Z.Panel,Z=c.Z.Item,b=function(t){var e=t.ltmplConfig,r=t.doSearch,b=t.doAction,x=t.doJump,k=t.doDelete,L=t.selectedRows,C=t.data,O=t.open,S=(t.loading,t.selectedDatas),E=t.doCQuery,P=t.serverKey,j=c.Z.useForm(),I=(0,o.Z)(j,1)[0],R=e.buttons,_=e.actions,N=e.jumps,T=e.cQuerys,D=e.criterias,A=e.drillingParams,F=e.columns,G={};(0,i.useEffect)((function(){I.resetFields()}));var M=R.includes("query")&&r,B=R.includes("batchDelete")&&k,K=!(L&&L.length>0),q=function(e){if(e){var n=t.hiddenCriteriaIds,o=t.serverKey;return e.map((function(t){var e="c_"+t.id,r=C?C[e]:void 0;G[e]=r})),r?e.map((function(e){var r="c_"+e.id,i=C?C[r]:void 0;if(!n.includes(e.id))return(0,g.tZ)(Z,{label:e.title,name:r,key:e.id,tooltip:e.tip,rules:e.required?[{required:!0,message:"请选择".concat(e.title)}]:void 0},(0,g.tZ)(v.Z,{serverKey:o,mainCode:t.mainCode,value:i,fieldConfig:e}))})):void 0}};return(0,g.tZ)(c.Z,{form:I,name:"control-hooks",initialValues:G,layout:"inline",onFinish:function(t){r&&r(t)},style:{width:"100%"}},R.includes("drilling")&&O&&(A.length>0||(F.forEach((function(t){if("dimension"==t.statColType)return!0})),0))?(0,g.tZ)(a.Z,{style:{width:"100%"},defaultActiveKey:["1"]},(0,g.tZ)(w,{header:"设置-数据上钻",key:"1"},(0,g.tZ)(l.Z,null,(0,g.tZ)(f.Z,null,(0,g.tZ)(h.Z,{size:"small",wrap:!0},q(A),function(){var t="drillingColIds",e=[],r=[];F.forEach((function(t){"dimension"==t.statColType&&(r.push({label:t.title,value:t.id}),e.push(t.id))})),r.push({label:"无",value:"5"}),G[t]=C&&C[t]?C[t]:e;var o={placeholder:"请选择维度",disabled:!1,value:C?C[t]:e,style:{minWidth:220,width:"100%"}};return(0,g.tZ)(Z,{label:"维度",name:t,key:t,rules:[{required:!0,message:"请选择维度,上钻到顶层请只选【无】"}]},(0,g.tZ)(s.default,(0,n.Z)({mode:"multiple"},o,{notFoundContent:"暂无选项",allowClear:!0,showSearch:!0,showArrow:!0,options:r})))}()))))):"",(0,g.tZ)(p.Z,{className:"hoverable",style:{display:O?"block":"none",width:"100%"},headStyle:{background:"#f2f4f5"}},(0,g.tZ)(l.Z,null,(0,g.tZ)(f.Z,null,(0,g.tZ)(h.Z,{size:"small",wrap:!0},q(D),(0,g.tZ)(h.Z,{className:"btns"},M?(0,g.tZ)(u.ZP,{type:"primary",htmlType:"submit"},"查询"):"",B?(0,g.tZ)(d.Z,{placement:"rightBottom",title:"确定要【删除】选中数据吗？",onConfirm:function(){k()},okText:"确定",cancelText:"取消",okType:"danger"},(0,g.tZ)(u.ZP,{danger:!0,disabled:K},"删除选中")):"",function(){if(b&&_&&_.length>0)return _.map((function(t){var e=!0;return L&&(L.length>0&&t.multible||1==L.length)&&(e=!1),(0,g.tZ)(y.Z,{serverKey:P,hiddenType:"disabled",key:t.id,disabled:e,data:S,actionConfig:t,doAction:b,serial:1})}))}(),function(){if(x&&N&&N.length>0)return N.map((function(t){var e=!0;return L&&1==L.length&&(e=!1),(0,g.tZ)(u.ZP,{key:t.id,onClick:function(){return x(t)},disabled:e},t.title)}))}(),function(){var e=t.serverKey;if(E&&T&&T.length>0)return T.map((function(t){var r=!0;return L&&1==L.length&&(r=!1),(0,g.tZ)(m.Z,{serverKey:e,key:t.id,disabled:r,cQueryConfig:t,mainCode:r?void 0:L[0].code})}))}()))))))};b.defaultProps={hiddenCriteriaIds:[],open:!0},e.Z=b},53984:function(t,e,r){"use strict";r.d(e,{Z:function(){return I}});var n=r(32763),o=r(59755),i=r(90237),a=r(65337),c=r(95225),u=r(39576),s=r(61378),l=r(69905),f=r(15274),h=r(67294),p=r(32823),d=r(35137),v=r(72985),y=r(71577),m=r(45532),g=r(49811),w=r(69165),Z=r(59879),b=r(82362),x=r(29336),k=r(41307),L=r(5301),C=r(45136),O=r(52656);function S(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return E(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function P(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function j(){j=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(n||[]);return o(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function i(o,a,c,u){var s=f(t[o],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,n.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,c,u)}),(function(t){i("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return i("throw",t,c,u)}))}u(s.arg)}var a;o(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),s(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}var I=function(t){(0,u.Z)(R,t);var e,r,n,E,I=(n=R,E=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,l.Z)(n);if(E){var r=(0,l.Z)(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return(0,s.Z)(this,t)});function R(){var t;(0,i.Z)(this,R);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=I.call.apply(I,[this].concat(r)),(0,f.Z)((0,c.Z)(t),"fuseMode",!1),(0,f.Z)((0,c.Z)(t),"premisestitle","默认字段"),(0,f.Z)((0,c.Z)(t),"state",{loading:!0,currentDtmplData:void 0,appDtmplConfig:void 0}),(0,f.Z)((0,c.Z)(t),"loadData",(0,o.Z)(j().mark((function e(){var r,n,o,i,a,c,u,s,l;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.props,n=r.sourceId,o=r.code,i=r.formRef,a=r.dtmplData,c=r.dtmplConfig,u=r.serverKey,!o){e.next=8;break}return t.setState({loading:!0}),e.next=5,g.Z.requestDtmplData(u,n,o,null);case 5:s=e.sent,e.next=9;break;case 8:s=a||{code:void 0,title:void 0,fieldMap:{},arrayMap:{}};case 9:l=L.cB.getAppDtmplConfig(c,a,t.props),t.setState({appDtmplConfig:l,currentDtmplData:s,loading:!1}),setTimeout((function(){return i.current?i.current.resetFields():void 0}),200);case 12:case"end":return e.stop()}}),e)})))),(0,f.Z)((0,c.Z)(t),"doRefresh",(0,o.Z)(j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.loadData();case 2:p.ZP.info("已刷新！");case 3:case"end":return e.stop()}}),e)})))),(0,f.Z)((0,c.Z)(t),"onGroupChange",(function(e,r){var n=t.state.currentDtmplData;n.arrayMap[e.id]=r;var o=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?P(Object(r),!0).forEach((function(e){(0,f.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},n);t.setState({currentDtmplData:o})})),(0,f.Z)((0,c.Z)(t),"changeFuseMode",(function(e){t.fuseMode=!e})),(0,f.Z)((0,c.Z)(t),"postForm",function(){var e=(0,o.Z)(j().mark((function e(r){var n,o,i,a,c,u;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({loading:!0}),n=t.props,o=n.sourceId,i=n.code,a=n.dtmplData,c=n.serverKey,i?r["唯一编码"]=i:a&&a.code&&(r["唯一编码"]=a.code),e.next=5,g.Z.postDtmplData(c,o,r,p.ZP);case 5:u=e.sent,t.setState({loading:!1}),"success"===u.status&&t.props.onFinish(u.code);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,f.Z)((0,c.Z)(t),"onSubmit",function(){var e=(0,o.Z)(j().mark((function e(r){var n,o,i,a,c,u,s;return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.props).showConfirm,n.code,o=n.dtmplConfig,i=t.state.currentDtmplData,a=r,c=S(o.groups),e.prev=5,s=j().mark((function t(){var e,r;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"relation"==(e=u.value).type&&(a["".concat(e.id,".$$flag$$")]=!0,(r=i.arrayMap[e.id])&&r.forEach((function(t,r){if(a["".concat(e.id,"[").concat(r,"].$$relation$$")]=t.relationLabel,t.editStatus&&"new"==t.editStatus){var n,o=S(e.fields);try{for(o.s();!(n=o.n()).done;){var i=n.value;a["".concat(e.id,"[").concat(r,"].").concat(i.id)]=t.fieldMap[i.id]}}catch(t){o.e(t)}finally{o.f()}}else if(t.editStatus&&"changed"==t.editStatus){a["".concat(e.id,"[").concat(r,"].唯一编码")]=t.code;var c,u=S(e.fields);try{for(u.s();!(c=u.n()).done;){var s=c.value;a["".concat(e.id,"[").concat(r,"].").concat(s.id)]=t.fieldMap[s.id]}}catch(t){u.e(t)}finally{u.f()}}else a["".concat(e.id,"[").concat(r,"].唯一编码")]=t.code})));case 2:case"end":return t.stop()}}),t)})),c.s();case 8:if((u=c.n()).done){e.next=12;break}return e.delegateYield(s(),"t0",10);case 10:e.next=8;break;case 12:e.next=17;break;case 14:e.prev=14,e.t1=e.catch(5),c.e(e.t1);case 17:return e.prev=17,c.f(),e.finish(17);case 20:return e.next=22,t.postForm(a);case 22:e.sent;case 23:case"end":return e.stop()}}),e,null,[[5,14,17,20]])})));return function(t){return e.apply(this,arguments)}}()),(0,f.Z)((0,c.Z)(t),"fieldGroupList",(function(e,r){var n=t.props,o=n.parentId,i=n.maxColsOnRow,a=n.mainCode,c=n.formRef,u=n.serverKey,s=t.state.loading,l=[];return e&&(l=e.groups),l.map((function(e){if("relation"!=e.type)return(0,O.tZ)(k.Z,{tip:e.tip,title:e.title,key:e.id,id:o+e.id,className:"hoverable",headStyle:{background:"#f2f4f5"},loading:s,bodyStyle:{padding:"6px"}},(0,O.tZ)(w.Z,{serverKey:u,formRef:c,mainCode:a,maxColsOnRow:i,fields:e?e.fields:void 0,valueMap:r?r.fieldMap:void 0}));if(e.fields){var n=void 0;return r&&(n=r.arrayMap[e.id]),(0,O.tZ)(x.Z,{serverKey:u,mainCode:a||o,loading:s,parentId:o,key:e.id,fieldGroupConfig:e,value:n,viewOrEdit:"edit",onChange:t.onGroupChange})}}))})),(0,f.Z)((0,c.Z)(t),"onValuesChange",(function(e,r){var n=t.props,o=n.onValuesChange,i=n.formRef,a=n.code,c=t.state,u=c.appDtmplConfig,s=c.currentDtmplData;u.onValuesChange&&u.onValuesChange(e,{code:a,fieldMap:r,arrayMap:s.arrayMap},i.current),o()})),t}return(0,a.Z)(R,[{key:"componentDidMount",value:(r=(0,o.Z)(j().mark((function t(){return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadData();case 2:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"componentDidUpdate",value:(e=(0,o.Z)(j().mark((function t(e){return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.code,e==this.props){t.next=4;break}return t.next=4,this.loadData();case 4:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"render",value:function(){var t=this.props,e=t.formRef,r=t.dtmplConfig,n=t.code,o=t.parentId,i=t.showHeader,a=t.serverKey,c=this.state,u=c.currentDtmplData,s=c.appDtmplConfig;if(!r)return(0,O.tZ)(d.Z,{loading:!0},"加载中... ...");var l=s||{buttons:void 0,premises:void 0},f=l.buttons,p=l.premises;return(0,O.tZ)(h.Fragment,null,i?(0,O.tZ)(d.Z,{bordered:!1,key:"detailTitle",className:"hoverable pageHeader"},(0,O.tZ)("h3",null,n||u&&u.code?"[编辑]":"[新增]",r?(0,O.tZ)(C.Z,{content:r.tip}):null,(0,O.tZ)("div",{className:"fr"},f&&f.includes("fusionMode")?(0,O.tZ)(v.Z,{checkedChildren:"开",unCheckedChildren:"关",style:{marginRight:10},title:"融合模式",onChange:this.changeFuseMode}):"",(0,O.tZ)(y.ZP,{className:"hoverbig",title:"刷新",onClick:this.doRefresh},(0,O.tZ)(Z.Z,null))))):null,(0,O.tZ)(m.Z,{scrollToFirstError:!0,labelWrap:!0,ref:e,name:"control-hooks",onValuesChange:this.onValuesChange,onFinish:this.onSubmit},(0,O.tZ)(m.Z.Item,{hidden:!0,name:"actionId"}),(0,O.tZ)(m.Z.Item,{hidden:!0,name:"mainCode"}),this.fieldGroupList(s,u)),p&&p.length>0?(0,O.tZ)(k.Z,{title:this.premisestitle,key:this.premisestitle,id:o+p[0].id,className:"hoverable",headStyle:{background:"#f2f4f5"}},(0,O.tZ)(b.Z,{serverKey:a,fields:p})):"")}}]),R}(h.PureComponent);(0,f.Z)(I,"defaultPorps",{maxCols:2,showHeader:!0})},69165:function(t,e,r){"use strict";r.d(e,{Z:function(){return w}});var n=r(32763),o=r(90237),i=r(65337),a=r(95225),c=r(39576),u=r(61378),s=r(69905),l=r(15274),f=r(67294),h=r(45532),p=r(15746),d=r(71230),v=r(67077),y=r(94716),m=r(52656);var g=h.Z.Item,w=function(t){(0,c.Z)(h,t);var e,r,f=(e=h,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,s.Z)(e);if(r){var o=(0,s.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,u.Z)(this,t)});function h(t){var e;return(0,o.Z)(this,h),e=f.call(this,t),(0,l.Z)((0,a.Z)(e),"isPromise",(function(t){return!!t&&("object"===(0,n.Z)(t)||"function"==typeof t)&&"function"==typeof t.then})),(0,l.Z)((0,a.Z)(e),"getMainCode",(function(t,r){var n=e.props.formRef;return t.mainCode?"function"==typeof t.mainCode?t.mainCode(n.current):t.mainCode:r})),(0,l.Z)((0,a.Z)(e),"getFieldConfig",(function(t){var r=e.props.formRef;return t.updateSelf?t.updateSelf(r.current):t})),(0,l.Z)((0,a.Z)(e),"initFormItem",(function(t,r){var n=e.props,o=n.nameAttr,i=n.maxColsOnRow,a=n.mainCode,c=n.serverKey,u=e.getFieldConfig(t),s=u.title;return(0,m.tZ)(g,{label:u.title,name:u[o],key:u.id,labelCol:1==i||1==u.colNum?{span:6}:{span:3},wrapperCol:1==i?{span:18}:1==u.colNum?{span:15}:{span:19},tooltip:u.tip,initialValue:r,style:{margin:4},rules:u.required?[{required:!0,message:"请输入".concat(s)}]:void 0},(0,m.tZ)(v.Z,{serverKey:c,mainCode:e.getMainCode(u,a),value:r,fieldConfig:u}))})),(0,l.Z)((0,a.Z)(e),"initFormList",(function(){var t=e.props,r=t.fields,n=t.valueMap,o=t.nameAttr,i=t.maxColsOnRow,a=t.mainCode,c=t.serverKey,u=[];r&&r.length>0&&r.forEach((function(t,r){var i=n?n[t.id]:void 0;t.id,Math.random(),i=i||0==i?i:t.defaultValue?y.Z.configParamTrans(t.defaultValue):void 0;var s;s="hidden"==t.extControlType?(0,m.tZ)(g,{hidden:!0,initialValue:i,name:t[o],key:t.id},(0,m.tZ)(v.Z,{serverKey:c,mainCode:e.getMainCode(t,a),value:i,fieldConfig:t})):t.shouldUpdate?(0,m.tZ)(g,{noStyle:!0,shouldUpdate:t.shouldUpdate},(function(){return e.initFormItem(t,i)})):e.initFormItem(t,i),u.push(s)}));for(var s=[],l=0;l<u.length;l+=1){var f=r[l].colNum;"hidden"==r[l].extControlType?f=0:i&&1==i&&(f=2);var h=(0,m.tZ)(p.Z,{key:l,span:12*f},u[l]);s.push(h)}return(0,m.tZ)(d.Z,{gutter:[16,8],key:1},s)})),e.state={fileList:[]},e}return(0,i.Z)(h,[{key:"render",value:function(){return this.initFormList()}}]),h}(f.PureComponent);(0,l.Z)(w,"defaultProps",{nameAttr:"id",maxColsOnRow:2})},5301:function(t,e,r){"use strict";r.d(e,{UL:function(){return Ge},H5:function(){return sr},zM:function(){return Le},C0:function(){return Pe},B$:function(){return Rr},QC:function(){return o.Z},xe:function(){return Ne},Bf:function(){return xr},cS:function(){return dr},hE:function(){return ie},cB:function(){return n.Z}});var n=r(94716),o=r(49811),i=r(32763),a=r(20511),c=r(59755),u=r(90237),s=r(65337),l=r(95225),f=r(39576),h=r(61378),p=r(69905),d=r(15274),v=r(67294),y=r(44644),m=r(71577),g=r(35137),w=r(18230),Z=r(94627),b=(r(32733),r(49073)),x=r(52656),k=["title"];function L(){L=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new S(o||[]);return n(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(E([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function o(n,a,c,u){var s=f(t[n],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,i.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return o("throw",t,c,u)}))}u(s.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),s(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=E,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function C(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return O(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var S=function(t){(0,f.Z)(v,t);var e,r,n,i=(r=v,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,p.Z)(r);if(n){var o=(0,p.Z)(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return(0,h.Z)(this,t)});function v(){var t;(0,u.Z)(this,v);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=i.call.apply(i,[this].concat(r)),(0,d.Z)((0,l.Z)(t),"state",{l2Menus:void 0}),(0,d.Z)((0,l.Z)(t),"intervals",[]),t}return(0,s.Z)(v,[{key:"componentDidMount",value:(e=(0,c.Z)(L().mark((function t(){var e,r,n,i,a=this;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.Z.quickEntranceMenus();case 2:e=t.sent,r=C(e),t.prev=4,i=L().mark((function t(){var e,r,i;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(1!=(e=n.value).displayTotal){t.next=9;break}return r=setInterval((0,c.Z)(L().mark((function t(){var r;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.Z.requestLtmplCount(null,e.id);case 2:r=t.sent,e.count=r,a.setState({});case 5:case"end":return t.stop()}}),t)}))),18e4),a.intervals.push(r),t.next=6,o.Z.requestLtmplCount(null,e.id);case 6:i=t.sent,e.count=i,a.setState({});case 9:case"end":return t.stop()}}),t)})),r.s();case 7:if((n=r.n()).done){t.next=11;break}return t.delegateYield(i(),"t0",9);case 9:t.next=7;break;case 11:t.next=16;break;case 13:t.prev=13,t.t1=t.catch(4),r.e(t.t1);case 16:return t.prev=16,r.f(),t.finish(16);case 19:this.setState({l2Menus:e});case 20:case"end":return t.stop()}}),t,this,[[4,13,16,19]])}))),function(){return e.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){if(this.intervals.length>0){var t,e=C(this.intervals);try{for(e.s();!(t=e.n()).done;){var r=t.value;clearInterval(r)}}catch(t){e.e(t)}finally{e.f()}}this.intervals=[]}},{key:"render",value:function(){var t=this.props,e=(t.title,(0,a.Z)(t,k)),r=this.state.l2Menus,n=[];return r&&r.forEach((function(t){var e=(0,x.tZ)(y.Z,{key:t.id,count:t.count},(0,x.tZ)(m.ZP,{shape:"round",icon:(0,x.tZ)(Z.Z,null),href:"#/".concat(t.id,"/act-table?menuId=").concat(t.id),size:"large"},t.title));n.push(e)})),(0,x.tZ)(g.Z,e,(0,x.tZ)(w.Z,{size:[16,16],wrap:!0},n))}}]),v}(v.PureComponent),E=S,P=r(30698),j=r(44524),I=r(86623),R=["title"];function _(){_=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function o(n,a,c,u){var s=f(t[n],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,i.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return o("throw",t,c,u)}))}u(s.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),s(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function N(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return T(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?T(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function T(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var D=function(t){(0,f.Z)(v,t);var e,r,n,i=(r=v,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,p.Z)(r);if(n){var o=(0,p.Z)(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return(0,h.Z)(this,t)});function v(){var t;(0,u.Z)(this,v);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=i.call.apply(i,[this].concat(r)),(0,d.Z)((0,l.Z)(t),"state",{l2Menus:void 0}),(0,d.Z)((0,l.Z)(t),"intervals",[]),t}return(0,s.Z)(v,[{key:"componentDidMount",value:(e=(0,c.Z)(_().mark((function t(){var e,r,n,i,a=this;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.Z.workbenchMenus();case 2:e=t.sent,r=N(e),t.prev=4,i=_().mark((function t(){var e,r,i;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.value,r=setInterval((0,c.Z)(_().mark((function t(){var r;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.Z.requestLtmplCount(null,e.id);case 2:r=t.sent,e.count=r,a.setState({});case 5:case"end":return t.stop()}}),t)}))),18e4),a.intervals.push(r),t.next=5,o.Z.requestLtmplCount(null,e.id);case 5:i=t.sent,e.count=i,a.setState({});case 8:case"end":return t.stop()}}),t)})),r.s();case 7:if((n=r.n()).done){t.next=11;break}return t.delegateYield(i(),"t0",9);case 9:t.next=7;break;case 11:t.next=16;break;case 13:t.prev=13,t.t1=t.catch(4),r.e(t.t1);case 16:return t.prev=16,r.f(),t.finish(16);case 19:this.setState({l2Menus:e});case 20:case"end":return t.stop()}}),t,this,[[4,13,16,19]])}))),function(){return e.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){if(this.intervals.length>0){var t,e=N(this.intervals);try{for(e.s();!(t=e.n()).done;){var r=t.value;console.log("workbanch移除定时任务"),clearInterval(r)}}catch(t){e.e(t)}finally{e.f()}}this.intervals=[]}},{key:"render",value:function(){var t=this.props,e=t.title,r=(0,a.Z)(t,R),n=this.state.l2Menus,o=[];return n&&n.forEach((function(t){var e=(0,x.tZ)(g.Z,{size:"small",key:t.id},(0,x.tZ)(j.Z,{prefix:(0,x.tZ)(I.Z,null),title:t.title,value:t.count}),(0,x.tZ)(m.ZP,{style:{marginTop:12},href:"#/".concat(t.id,"/act-table?menuId=").concat(t.id)},"查看"));o.push(e)})),(0,x.tZ)(g.Z,(0,P.Z)({size:"small"},r,{title:e||"工作台"}),(0,x.tZ)(w.Z,{size:[16,16],wrap:!0},o))}}]),v}(v.PureComponent),A=D,F=(r(97038),r(38763)),G=r(97183);var M=G.Z.Footer,B=function(t){(0,f.Z)(o,t);var e,r,n=(e=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,p.Z)(e);if(r){var o=(0,p.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,h.Z)(this,t)});function o(){return(0,u.Z)(this,o),n.apply(this,arguments)}return(0,s.Z)(o,[{key:"render",value:function(){return(0,x.tZ)(M,{style:{textAlign:"center"}},(0,x.tZ)("div",{className:"footer"},"Enterprise Applications ©2022 Created by  旷识科技"))}}]),o}(v.Component),K=r(39372),q=r(71230),V=r(15746),H=r(1351),Y=r(76629),z=r(30826),U=r(79655);function W(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Q(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Q(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Q(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var $={getMenu:function(t,e){return t.l1Menus?this.toL1Menu(t.l1Menus,e,""):this.toSubMenu(t.items,e,"")},toL1Menu:function(t,e){var r,n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=[];return t&&t.map((function(t){r={key:t.id};var a=t.l2Menus;a&&(r.label=t.title,r.children=n.toSubMenu(a,e,o)),i.push(r)})),i},toSubMenu:function(t,e){var r,n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=[];return t&&t.map((function(t){r={key:t.id};var a=t.items;if(a)r.label=t.title,r.children=n.toSubMenu(a,e,o);else{var c=t;r.label=n.toL2MenuTitle(c,e,o)}i.push(r)})),i},getRoutePath:function(t,e,r){if(t){var n="act-table",o="";switch(t.pageType){case"列表":n="act-table";break;case"添加":n="detail-edit",o="&codeSource=new";break;case"编辑":n="detail-edit",o="&codeSource=listop";break;case"编辑或添加":n="detail-edit",o="&codeSource=listop-new";break;case"详情":n="detail-view",o="&codeSource=listop"}return"".concat(e,"/").concat(t.id,"/").concat(n,"?menuId=").concat(t.id).concat(o).concat(r)}return null},toL2MenuTitle:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!t)return null;var o="/",i=t.customPath;i&&(i.startsWith("/")||i.startsWith("\\"))&&(o="");var a="";t.defaultCriteriaValue&&(a="&"+n.Z.transQueryParamsToStr(t.defaultCriteriaValue));var c=i?"".concat(r,"/page/").concat(t.id).concat(o).concat(i,"?menuId=").concat(t.id):this.getRoutePath(t,r,a);return(0,x.tZ)(U.OL,{to:c,target:e},t.title)},findOpenId:function(t,e){var r=void 0;if(t.l1Menus){var n,o=W(t.l1Menus);try{for(o.s();!(n=o.n()).done;){var i,a=n.value,c=W(a.l2Menus);try{for(c.s();!(i=c.n()).done;)if(i.value.id==e)return r=a.id}catch(t){c.e(t)}finally{c.f()}}}catch(t){o.e(t)}finally{o.f()}}else{var u,s=W(t.items);try{for(s.s();!(u=s.n()).done;){var l=u.value;if(l.items){var f,h=W(l.items);try{for(h.s();!(f=h.n()).done;)if(f.value.id==e)return r=l.id}catch(t){h.e(t)}finally{h.f()}}else if(l.id==e)return r=l.id}}catch(t){s.e(t)}finally{s.f()}}return r}};function J(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return X(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?X(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function X(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var tt=function(t){(0,f.Z)(o,t);var e,r,n=(e=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,p.Z)(e);if(r){var o=(0,p.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,h.Z)(this,t)});function o(t){var e;return(0,u.Z)(this,o),e=n.call(this,t),(0,d.Z)((0,l.Z)(e),"getSubMenu",(function(t){return $.getMenu(t,null)})),(0,d.Z)((0,l.Z)(e),"findBlockId",(function(t,e){var r,n=void 0,o=J(t);try{for(o.s();!(r=o.n()).done;){var i=r.value;if(i.l1Menus){var a,c=J(i.l1Menus);try{for(c.s();!(a=c.n()).done;){var u,s=J(a.value.l2Menus);try{for(s.s();!(u=s.n()).done;)if(u.value.id===e)return n=i.id}catch(t){s.e(t)}finally{s.f()}}}catch(t){c.e(t)}finally{c.f()}}else{var l,f=J(i.items);try{for(f.s();!(l=f.n()).done;){var h,p=J(l.value.items);try{for(p.s();!(h=p.n()).done;)if(h.value.id===e)return n=i.id}catch(t){p.e(t)}finally{p.f()}}}catch(t){f.e(t)}finally{f.f()}}}}catch(t){o.e(t)}finally{o.f()}return n})),e}return(0,s.Z)(o,[{key:"render",value:function(){var t=this,e=this.props,r=e.currentBlockId,n=e.blocks,o=e.currentL2MenuId,i=e.activeColor,a={"--header-block-active-bottom-color":i||"#1E90FF","--header-top-active-background":i||"#1E90FF"};if(!n||n.length<1)return(0,x.tZ)(v.Fragment,null);var c=r;return o&&!c&&(c=this.findBlockId(n,o)),c||(c=n.at(0).id),n.map((function(e,r){return(0,x.tZ)("div",{key:r,className:"".concat(e.id==c?"active":""," header-block"),style:a},(0,x.tZ)(z.Z,{menu:{items:t.getSubMenu(e)}},(0,x.tZ)("a",{className:"dropdown-link",style:e.id==c?{color:"#fff"}:{color:i},rel:"noopener noreferrer"},e.title)))}))}}]),o}(v.PureComponent),et=tt,rt=r(8505),nt=r(89317);function ot(){ot=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function o(n,a,c,u){var s=f(t[n],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,i.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return o("throw",t,c,u)}))}u(s.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),s(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function it(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return at(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?at(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function at(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var ct=function(t){(0,f.Z)(m,t);var e,r,i,a=(r=m,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,p.Z)(r);if(i){var n=(0,p.Z)(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return(0,h.Z)(this,t)});function m(){var t;(0,u.Z)(this,m);for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return t=a.call.apply(a,[this].concat(r)),(0,d.Z)((0,l.Z)(t),"state",{messageBars:void 0,anyState:!1}),(0,d.Z)((0,l.Z)(t),"renderMessageBar",(function(e){var r=t.props.backgroudColor,o=0,i={"--message-bar-backgroupd":r},a=(0,x.tZ)(rt.Z,{key:1},e.map((function(t,e){t.count&&(o+=t.count);var r="";return t.l2Menu.defaultCriteriaValue&&(r="&"+n.Z.transQueryParamsToStr(t.l2Menu.defaultCriteriaValue)),(0,x.tZ)(rt.Z.Item,{key:e},(0,x.tZ)(U.OL,{to:"/".concat(t.l2Menu.id,"/act-table?menuId=").concat(t.l2Menu.id).concat(r)},t.l2Menu.title,(0,x.tZ)(y.Z,{count:t.count,overflowCount:99,offset:[2,-2],size:"small"})))})));if(e&&0!=e.length){if(1==e.length){var c=e[0],u=c.l2Menu,s="";return u.defaultCriteriaValue&&(s="&"+n.Z.transQueryParamsToStr(u.defaultCriteriaValue)),(0,x.tZ)("div",{className:"message-bar",style:i},(0,x.tZ)("a",{href:u.customPath?"/page/".concat(u.id).concat(u.customPath,"?menuId=").concat(u.id):"#/".concat(u.id,"/act-table?menuId=").concat(u.id).concat(s),className:"head-example"},(0,x.tZ)(y.Z,{count:c.count,overflowCount:99,offset:[8,-2]},(0,x.tZ)("span",{style:{fontSize:"20px",color:"#08c"}},(0,x.tZ)(nt.Z,null)))))}return(0,x.tZ)(z.Z,{overlay:a,placement:"bottomCenter"},(0,x.tZ)("div",{className:"message-bar",style:i},(0,x.tZ)(y.Z,{count:o,overflowCount:99,offset:[8,-2]},(0,x.tZ)("span",{style:{fontSize:"20px",color:"#08c"}},(0,x.tZ)(nt.Z,null)))))}})),t}return(0,s.Z)(m,[{key:"componentDidMount",value:(e=(0,c.Z)(ot().mark((function t(){var e,r,n,i,a,u=this;return ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.Z.messageMenus();case 2:e=t.sent,r=[],n=it(e),t.prev=5,a=ot().mark((function t(){var e,n,a;return ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.value,n={l2Menu:e,count:0},setInterval((0,c.Z)(ot().mark((function t(){var r;return ot().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.Z.requestLtmplCount(null,e.id);case 2:r=t.sent,n.count=r,u.setState({anyState:!u.state.anyState});case 5:case"end":return t.stop()}}),t)}))),18e4),t.next=6,o.Z.requestLtmplCount(null,e.id);case 6:a=t.sent,n.count=a,r.push(n);case 9:case"end":return t.stop()}}),t)})),n.s();case 8:if((i=n.n()).done){t.next=12;break}return t.delegateYield(a(),"t0",10);case 10:t.next=8;break;case 12:t.next=17;break;case 14:t.prev=14,t.t1=t.catch(5),n.e(t.t1);case 17:return t.prev=17,n.f(),t.finish(17);case 20:this.setState({messageBars:r});case 21:case"end":return t.stop()}}),t,this,[[5,14,17,20]])}))),function(){return e.apply(this,arguments)})},{key:"render",value:function(){var t=this.state.messageBars;return(0,x.tZ)(v.Fragment,null,t?this.renderMessageBar(t):"")}}]),m}(v.PureComponent);(0,d.Z)(ct,"defaultProps",{backgroudColor:"#4a5f74"});var ut=ct,st=r(99160),lt=r(5405),ft=r(70832);function ht(){ht=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function o(n,a,c,u){var s=f(t[n],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,i.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return o("throw",t,c,u)}))}u(s.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),s(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function pt(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return dt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var vt=function(t){(0,f.Z)(i,t);var e,r,n,o=(r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,p.Z)(r);if(n){var o=(0,p.Z)(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return(0,h.Z)(this,t)});function i(){var t;(0,u.Z)(this,i);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=o.call.apply(o,[this].concat(r)),(0,d.Z)((0,l.Z)(t),"state",{quickBars:void 0,anyState:!1,currentId:void 0,showDraw:!1}),(0,d.Z)((0,l.Z)(t),"showDraw",(function(e){t.setState({currentId:e,showDraw:!0})})),(0,d.Z)((0,l.Z)(t),"closeDrawer",(function(){t.setState({showDraw:!1})})),(0,d.Z)((0,l.Z)(t),"renderQuickBar",(function(e){var r={"--message-bar-backgroupd":t.props.backgroudColor},n=(0,x.tZ)(rt.Z,{key:1},e.map((function(e,r){return e.count&&e.count,(0,x.tZ)(rt.Z.Item,{key:r},(0,x.tZ)("span",{onClick:function(){return t.showDraw(e.l2Menu.id)}},e.l2Menu.title))})));if(e&&0!=e.length){if(1==e.length){var o=e[0];return o.l2Menu,(0,x.tZ)("div",{className:"message-bar",style:r,onClick:function(){return t.showDraw(o.l2Menu.id)}},(0,x.tZ)("span",{style:{fontSize:"20px",color:"#08c"}},(0,x.tZ)(lt.Z,null)))}return(0,x.tZ)(z.Z,{overlay:n,placement:"bottomCenter"},(0,x.tZ)("div",{className:"message-bar",style:r},(0,x.tZ)("span",{style:{fontSize:"20px",color:"#08c"}},(0,x.tZ)(lt.Z,null))))}})),t}return(0,s.Z)(i,[{key:"componentDidMount",value:(e=(0,c.Z)(ht().mark((function t(){var e,r,n,o,i,a;return ht().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.Z.quickEntranceMenus();case 2:e=t.sent,r=[],n=pt(e);try{for(n.s();!(o=n.n()).done;)i=o.value,a={l2Menu:i,count:0},r.push(a)}catch(t){n.e(t)}finally{n.f()}this.setState({quickBars:r});case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"render",value:function(){var t=this.state,e=t.quickBars,r=t.showDraw,n=t.currentId;return(0,x.tZ)(v.Fragment,null,e?this.renderQuickBar(e):"",(0,x.tZ)(st.Z,{placement:"left",title:"快捷查询",closable:!0,mask:!1,onClose:this.closeDrawer,open:r,width:"calc(100% - 280px)",style:{maxWidth:1960},extra:(0,x.tZ)(w.Z,null,(0,x.tZ)(m.ZP,{onClick:this.closeDrawer},"关闭"))},(0,x.tZ)(ft.Z,{serverKey:null,sourceId:n})))}}]),i}(v.PureComponent);(0,d.Z)(vt,"defaultProps",{backgroudColor:"#4a5f74"});var yt=vt,mt=r(53807),gt=r(47759),wt=r(55035),Zt=r(94e3),bt=r(89366),xt=r(42638);function kt(){kt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function o(n,a,c,u){var s=f(t[n],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,i.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return o("throw",t,c,u)}))}u(s.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),s(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}var Lt=function(t){(0,f.Z)(i,t);var e,r,n,o=(r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,p.Z)(r);if(n){var o=(0,p.Z)(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return(0,h.Z)(this,t)});function i(){var t;(0,u.Z)(this,i);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=o.call.apply(o,[this].concat(r)),(0,d.Z)((0,l.Z)(t),"state",{showDraw:!1}),(0,d.Z)((0,l.Z)(t),"showDraw",(function(){t.setState({showDraw:!0})})),(0,d.Z)((0,l.Z)(t),"closeDrawer",(function(){t.setState({showDraw:!1})})),t}return(0,s.Z)(i,[{key:"componentDidMount",value:(e=(0,c.Z)(kt().mark((function t(){return kt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})},{key:"render",value:function(){var t=this.state.showDraw,e=this.props,r=e.gtmplSourceId,n=e.userCode,o=e.editable;return(0,x.tZ)(v.Fragment,null,n?(0,x.tZ)(v.Fragment,null,(0,x.tZ)("span",{onClick:this.showDraw},"个人信息"),t?(0,x.tZ)(xt.Z,{serverKey:null,editable:o,title:"个人信息",width:"calc(100% - 280px)",sourceId:r,open:t,code:n,onClose:this.closeDrawer}):null):null," ")}}]),i}(v.PureComponent);(0,d.Z)(Lt,"defaultProps",{editable:!1});var Ct=Lt,Ot=r(32823),St=r(45532),Et=r(4107),Pt=r(55241),jt=r(2603);function It(){It=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function o(n,a,c,u){var s=f(t[n],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,i.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return o("throw",t,c,u)}))}u(s.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),s(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}var Rt=function(t){(0,f.Z)(a,t);var e,r,n,i=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,p.Z)(r);if(n){var o=(0,p.Z)(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return(0,h.Z)(this,t)});function a(){var t;(0,u.Z)(this,a);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=i.call.apply(i,[this].concat(r)),(0,d.Z)((0,l.Z)(t),"state",{showPopover:!1,pubkey:void 0,loading:!1}),(0,d.Z)((0,l.Z)(t),"formRef",v.createRef()),(0,d.Z)((0,l.Z)(t),"handleSubmit",function(){var e=(0,c.Z)(It().mark((function e(r){var n,i;return It().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({loading:!0}),n=t.state.pubkey,i=t.props.serverKey,e.next=5,o.Z.resetPassword(i,r.oldPassword,r.newPassword,n);case 5:"success"==e.sent.status&&(Ot.ZP.info("密码已重置,请重新登录"),o.Z.logout()),t.setState({loading:!1});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,d.Z)((0,l.Z)(t),"handleBlurCapture",(function(){var e=t.formRef.current.getFieldValue("newPassword"),r=t.formRef.current.getFieldValue("reNewPassword");e&&r&&e!=r?t.formRef.current.setFields([{name:"reNewPassword",value:r,errors:["两次密码输入不一致！"]}]):t.formRef.current.setFields([{name:"reNewPassword",value:r,errors:[]}])})),(0,d.Z)((0,l.Z)(t),"getForm",(function(){var e=t.state.loading;return(0,x.tZ)(q.Z,{justify:"center",align:"middle"},(0,x.tZ)(V.Z,null,(0,x.tZ)(St.Z,{style:{width:350},ref:t.formRef,name:"normal_login",className:"login-form",onFinish:t.handleSubmit},(0,x.tZ)(St.Z.Item,{label:"原密码",name:"oldPassword",rules:[{required:!0,message:"请输入原密码!"}]},(0,x.tZ)(Et.Z.Password,{placeholder:"密码",prefix:(0,x.tZ)(jt.Z,{className:"site-form-item-icon"})})),(0,x.tZ)(St.Z.Item,{label:"新设密码",name:"newPassword",rules:[{required:!0,message:"请输入新密码!"}]},(0,x.tZ)(Et.Z.Password,{placeholder:"新设密码",onBlurCapture:t.handleBlurCapture,prefix:(0,x.tZ)(jt.Z,{className:"site-form-item-icon"})})),(0,x.tZ)(St.Z.Item,{label:"确认密码",name:"reNewPassword",rules:[{required:!0,message:"请输入确认密码!"},function(t){var e=t.getFieldValue;return{validator:function(t,r){return r&&e("newPassword")!==r?Promise.reject(new Error("两次密码输入不一致!")):Promise.resolve()}}}]},(0,x.tZ)(Et.Z.Password,{placeholder:"确认密码",prefix:(0,x.tZ)(jt.Z,{className:"site-form-item-icon"})})),(0,x.tZ)(St.Z.Item,null,(0,x.tZ)(q.Z,{align:"middle",gutter:32},(0,x.tZ)(V.Z,{span:12},(0,x.tZ)(m.ZP,{style:{width:"100%"},type:"primary",loading:e,onClick:function(){return t.formRef.current.submit()}},"确定")),(0,x.tZ)(V.Z,{span:12},(0,x.tZ)(m.ZP,{style:{width:"100%"},onClick:function(){t.setState({showPopover:!1})}},"取消")))))))})),t}return(0,s.Z)(a,[{key:"componentDidMount",value:(e=(0,c.Z)(It().mark((function t(){var e,r;return It().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.props.serverKey,t.next=3,o.Z.getRasPubkey(e);case 3:r=t.sent,this.setState({pubkey:r});case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"render",value:function(){var t=this,e=this.state,r=e.showPopover;return e.loading,(0,x.tZ)(v.Fragment,null,(0,x.tZ)(Pt.Z,{destroyTooltipOnHide:!0,open:r,overlayStyle:{maxWidth:"400px"},title:"修改密码",placement:"leftBottom",trigger:"click",content:this.getForm()},(0,x.tZ)("span",{onClick:function(){t.setState({showPopover:!r})}},"修改密码")))}}]),a}(v.PureComponent),_t=Rt;function Nt(){Nt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function o(n,a,c,u){var s=f(t[n],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,i.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return o("throw",t,c,u)}))}u(s.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),s(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function Tt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Dt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Tt(Object(r),!0).forEach((function(e){(0,d.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var At=function(t){(0,f.Z)(a,t);var e,r,n,i=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,p.Z)(r);if(n){var o=(0,p.Z)(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return(0,h.Z)(this,t)});function a(){var t;(0,u.Z)(this,a);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=i.call.apply(i,[this].concat(r)),(0,d.Z)((0,l.Z)(t),"state",{id:void 0,name:void 0,roles:[],context:void 0,cleanCachable:!1,gtmplSourceId:void 0,changePasswordable:void 0,changePersonalInfoable:void 0,viewPersonalInfoable:void 0}),(0,d.Z)((0,l.Z)(t),"cleanCache",(function(){var e=t.state.roles,r=document.getElementById("ajaxLoading");r.style.display="block",b.Z.reload(e),r.style.display="none"})),(0,d.Z)((0,l.Z)(t),"getContext",(function(){var e=t.state.context;return e?(console.log("context",e),(0,x.tZ)(v.Fragment,null,e.map((function(t){return(0,x.tZ)(q.Z,null,(0,x.tZ)(V.Z,null,t.label," : ",t.content))})))):"无"})),(0,d.Z)((0,l.Z)(t),"toSetContext",(function(){window.location.hash="#/context-setter"})),(0,d.Z)((0,l.Z)(t),"getTitle",(function(){var e=t.state,r=e.name,n=e.context;return(0,x.tZ)(v.Fragment,null,(0,x.tZ)("p",null,r),n?n.map((function(t){return(0,x.tZ)("p",null,t.label," : ",t.content)})):null)})),t}return(0,s.Z)(a,[{key:"componentDidMount",value:(e=(0,c.Z)(Nt().mark((function t(){var e,r;return Nt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.Z.getUser();case 2:return e=t.sent,t.next=5,o.Z.getContextSourceValue();case 5:r=t.sent,this.setState(Dt({context:r},e));case 7:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"render",value:function(){var t=this.props,e=t.backgroudColor,r=t.showUserInfo,n=t.showChangePassword,i=t.menu,a=this.state,c=a.name,u=a.context,s=a.cleanCachable,l=a.gtmplSourceId,f=a.changePasswordable,h=a.changePersonalInfoable,p=a.viewPersonalInfoable,d=a.id,y={"--message-bar-backgroupd":e},m=[];return c?(r&&p&&m.push({key:"1",label:(0,x.tZ)(Ct,{gtmplSourceId:l,editable:h,userCode:d})}),u&&u.length>0&&m.push({key:"2",label:(0,x.tZ)("span",{onClick:this.toSetContext},"全局配置")}),n&&f&&m.push({key:"3",label:(0,x.tZ)(_t,null)}),s&&m.push({key:"4",label:(0,x.tZ)("span",{onClick:this.cleanCache},"清空缓存")}),m.push({key:"5",label:(0,x.tZ)("span",{onClick:o.Z.logout},(0,x.tZ)(wt.Z,null)," 退出")})):m.push({key:"2",label:(0,x.tZ)("span",{onClick:o.Z.logout},(0,x.tZ)(Zt.Z,null)," 登 录")}),(0,x.tZ)(v.Fragment,null,(0,x.tZ)(z.Z,{menu:i||{items:m},placement:"bottom",trigger:["click"]},(0,x.tZ)("div",{className:"userLogin",style:y},(0,x.tZ)(mt.Z,{placement:"left",title:this.getTitle()},(0,x.tZ)(gt.C,{className:"loginAvatar",icon:(0,x.tZ)(bt.Z,null),size:"large"})))))}}]),a}(v.PureComponent);(0,d.Z)(At,"defaultProps",{backgroudColor:"#4a5f74",showUserInfo:!0,showChangePassword:!0});var Ft=At,Gt=G.Z.Header,Mt=K.default.useToken,Bt=function(t){var e=Mt().token,r=t.collapsed,n={"--antd-color-primary":e.colorPrimary};return(0,x.tZ)(Gt,{style:{padding:0,height:"auto"}},(0,x.tZ)(q.Z,{className:"header-top",style:n,wrap:!1},(0,x.tZ)(V.Z,{span:20,className:"header-col"},(0,x.tZ)("div",{style:{float:"left"}},v.createElement(r?H.Z:Y.Z,{className:"trigger",onClick:function(){t.toggle()}})),(0,x.tZ)(et,(0,P.Z)({},t,{activeColor:e.colorPrimary}))),(0,x.tZ)(V.Z,{span:1,style:{width:"100%"}},(0,x.tZ)(yt,{backgroudColor:e.colorPrimary})),(0,x.tZ)(V.Z,{span:1,style:{width:"100%"}},(0,x.tZ)(ut,{backgroudColor:e.colorPrimary})),(0,x.tZ)(V.Z,{span:2},(0,x.tZ)(Ft,{backgroudColor:e.colorPrimary}))))},Kt=["blockMenu","collapsed","currentL2MenuId","basePath"];var qt=function(t){(0,f.Z)(o,t);var e,r,n=(e=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,p.Z)(e);if(r){var o=(0,p.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,h.Z)(this,t)});function o(t){var e;return(0,u.Z)(this,o),e=n.call(this,t),(0,d.Z)((0,l.Z)(e),"handleOpen",(function(t){t&&t.length>1&&t.splice(0,1),e.setState({openKeys:t})})),e.state={openKeys:[]},e}return(0,s.Z)(o,[{key:"componentDidMount",value:function(){var t=this.props,e=t.currentL2MenuId,r=t.blockMenu,n=(t.collapsed,this.state.openKeys),o=r?$.findOpenId(r,e):void 0;o&&n.length<1&&this.setState({openKeys:[o.toString()]})}},{key:"componentDidUpdate",value:function(t){var e=this.props,r=e.currentL2MenuId,n=e.blockMenu,o=(e.collapsed,t.currentL2MenuId),i=t.blockMenu;if(this.state.openKeys,i&&n&&n.id==i.id){var a=n?$.findOpenId(n,r):void 0,c=n?$.findOpenId(i,o):void 0;(!c&&a||a&&a!=c)&&this.setState({openKeys:[a]})}else{var u=n?$.findOpenId(n,r):void 0;u&&this.setState({openKeys:[u]})}}},{key:"render",value:function(){var t=this.props,e=t.blockMenu,r=t.collapsed,n=t.currentL2MenuId,o=t.basePath,i=(0,a.Z)(t,Kt),c=this.state.openKeys;return(0,x.tZ)(rt.Z,(0,P.Z)({},i,{onOpenChange:this.handleOpen,selectedKeys:n?[n.toString()]:void 0,openKeys:r?void 0:c,items:e?$.getMenu(e,void 0,o):[]}))}}]),o}(v.PureComponent),Vt=r(31298),Ht=r(48769),Yt=K.default.useToken,zt=function(t){var e={"--logo-blue-background":Yt().token.colorPrimary},r=t.collapsed;return(0,x.tZ)("div",null,(0,x.tZ)(Vt.ZP,{style:{height:"calc(100vh)"},autoHide:!0,autoHideTimeout:1e3},(0,x.tZ)("div",{className:r?"logonly":"logo-blue",style:e},(0,x.tZ)("a",{href:"#/home"},r?(0,x.tZ)(Ht.Z,{src:n.Z.programName_Logo()}):(0,x.tZ)("h1",{style:{overflow:"hidden",height:"58px"}},t.title?t.title:n.Z.programName_NavLeft()))),(0,x.tZ)(qt,(0,P.Z)({mode:"inline",theme:"light"},t))))},Ut=r(49611),Wt=r.n(Ut),Qt=r(48418),$t=r(89250),Jt=function(t){return function(e){var r=(0,$t.TH)(),n=(0,$t.s0)(),o=(0,$t.UO)(),i=(0,U.lr)(),a=(0,Qt.Z)(i,2),c=a[0];return a[1],(0,x.tZ)(t,(0,P.Z)({},e,{location:r,navigate:n,params:o,searchParams:c}))}};function Xt(){Xt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function o(n,a,c,u){var s=f(t[n],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,i.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return o("throw",t,c,u)}))}u(s.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),s(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function te(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return ee(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ee(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function ee(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var re=G.Z.Content,ne=G.Z.Sider,oe=function(t){(0,f.Z)(y,t);var e,r,o,i,a=(o=y,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,p.Z)(o);if(i){var r=(0,p.Z)(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return(0,h.Z)(this,t)});function y(){var t;(0,u.Z)(this,y);for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return t=a.call.apply(a,[this].concat(r)),(0,d.Z)((0,l.Z)(t),"scrollbarRef",v.createRef()),(0,d.Z)((0,l.Z)(t),"state",{collapsed:!1,blocks:[],currentL2MenuId:void 0,currentBlockId:void 0,isImporter:!1,sideBartitle:void 0}),(0,d.Z)((0,l.Z)(t),"findBlockTitle",(function(e){var r,o=t.state.blocks;if(e){var i,a=te(o);try{for(a.s();!(i=a.n()).done;){var c=i.value;if(c.id==e){r=c.title;break}}}catch(t){a.e(t)}finally{a.f()}}return(r?r+"-":"")+(n.Z.programName()?n.Z.programName():"HYDROCARBON")})),(0,d.Z)((0,l.Z)(t),"findBlockIdOfL2Menu",(function(e){var r=void 0,n=t.state.blocks;if(e){var o,i=te(n);try{for(i.s();!(o=i.n()).done;){var a=o.value;if(a.l1Menus){var c,u=te(a.l1Menus);try{for(u.s();!(c=u.n()).done;){var s,l=te(c.value.l2Menus);try{for(l.s();!(s=l.n()).done;)if(s.value.id==e){r=a.id;break}}catch(t){l.e(t)}finally{l.f()}}}catch(t){u.e(t)}finally{u.f()}}else{var f,h=te(a.items);try{for(h.s();!(f=h.n()).done;){var p=f.value;if(p.items){var d,v=te(p.items);try{for(v.s();!(d=v.n()).done;)if(d.value.id==e){r=a.id;break}}catch(t){v.e(t)}finally{v.f()}}else if(p.id==e){r=a.id;break}}}catch(t){h.e(t)}finally{h.f()}}}}catch(t){i.e(t)}finally{i.f()}}return r})),(0,d.Z)((0,l.Z)(t),"findCurrentBlock",(function(){var e=t.state,r=e.blocks,n=e.currentL2MenuId,o=e.currentBlockId,i=void 0;if(n){var a,c=te(r);try{for(c.s();!(a=c.n()).done;){var u=a.value;if(u.l1Menus){var s,l=te(u.l1Menus);try{for(l.s();!(s=l.n()).done;){var f,h=te(s.value.l2Menus);try{for(h.s();!(f=h.n()).done;)if(f.value.id==n){i=u;break}}catch(t){h.e(t)}finally{h.f()}}}catch(t){l.e(t)}finally{l.f()}}else{var p,d=te(u.items);try{for(d.s();!(p=d.n()).done;){var v=p.value;if(v.items){var y,m=te(v.items);try{for(m.s();!(y=m.n()).done;)if(y.value.id==n){i=u;break}}catch(t){m.e(t)}finally{m.f()}}else if(v.id==n){i=u;break}}}catch(t){d.e(t)}finally{d.f()}}}}catch(t){c.e(t)}finally{c.f()}}if(o&&!i){var g,w=te(r);try{for(w.s();!(g=w.n()).done;){var Z=g.value;if(Z.id===o){i=Z;break}}}catch(t){w.e(t)}finally{w.f()}}return i||(i=r.at(0)),i})),(0,d.Z)((0,l.Z)(t),"toggle",(function(){t.setState((function(e){return{collapsed:!t.state.collapsed}}))})),t}return(0,s.Z)(y,[{key:"componentDidMount",value:(r=(0,c.Z)(Xt().mark((function t(){var e,r,n,o,i,a,c,u;return Xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new URL(window.location.href),r=window.location.href.split("?")[1],n=new URLSearchParams("?"+r),o=n.get("blockId"),(i=n.get("menuId"))||(a=e.hash.match(/[\w]+\-[\d]+/))&&"menu"===(c=a[0].split("-"))[0]&&(i=c[1]),t.next=8,b.Z.requestBlocks(i||void 0,o||void 0);case 8:u=t.sent,this.setState((function(t){return{isImporter:e.hash.indexOf("/importer")>0,blocks:u.blocks?u.blocks:[],currentL2MenuId:u.l2MenuId,currentBlockId:u.blockId,sideBartitle:u.programName}}));case 10:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"componentDidUpdate",value:(e=(0,c.Z)(Xt().mark((function t(e,r){var n,o,i,a,c,u,s,l,f,h,p;return Xt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new URL(window.location.href),o=window.location.href.split("?")[1],i=new URLSearchParams("?"+o),a=i.get("blockId"),c=i.get("menuId"),u=n.hash.indexOf("/importer")>0,r.isImporter!=u&&this.setState((function(t){return{isImporter:u}})),c||(s=n.hash.match(/[\w]+\-[\d]+/))&&"menu"===(l=s[0].split("-"))[0]&&(c=l[1]),f=this.state,h=f.currentL2MenuId,p=f.currentBlockId,c&&h!=c&&this.setState((function(t){return{currentL2MenuId:c}})),a||(a=this.findBlockIdOfL2Menu(c)),a&&p!=a&&this.setState((function(t){return{currentBlockId:a}}));case 12:case"end":return t.stop()}}),t,this)}))),function(t,r){return e.apply(this,arguments)})},{key:"render",value:function(){var t,e,r=this.state,n=r.collapsed,o=r.currentL2MenuId,i=r.currentBlockId,a=r.isImporter,c=r.sideBartitle;return null===(t=this.scrollbarRef)||void 0===t||null===(e=t.current)||void 0===e||e.scrollToTop(),(0,x.tZ)(Vt.ZP,{ref:this.scrollbarRef,style:{height:"calc(100vh)"},autoHide:!0,autoHideTimeout:1e3},(0,x.tZ)(Wt(),{title:(a?"导入-":"")+this.findBlockTitle(i)},(0,x.tZ)(G.Z,null,(0,x.tZ)(ne,{theme:"light",style:{overflow:"auto",height:"100vh",position:"fixed",left:0,top:0,bottom:0},collapsed:n},(0,x.tZ)(zt,{title:c,blockMenu:this.findCurrentBlock(),currentL2MenuId:o,collapsed:n})),(0,x.tZ)(G.Z,{style:n?{background:"#fff",marginLeft:80}:{background:"#fff",marginLeft:200}},(0,x.tZ)(Bt,(0,P.Z)({toggle:this.toggle},this.state)),(0,x.tZ)(re,{style:{margin:"24px 16px 0",overflow:"initial",minHeight:"calc(100vh)",minWidth:760,maxWidth:1960,paddingBottom:"8px"}},this.props.children),(0,x.tZ)(B,null)))))}}]),y}(v.PureComponent),ie=Jt(oe),ae=r(9676),ce=r(88710),ue=r(35697),se=r(63807),le=r(98879),fe=r(20890),he=r(59879),pe=r(84391),de=r(24616);function ve(){ve=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function o(n,a,c,u){var s=f(t[n],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,i.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return o("throw",t,c,u)}))}u(s.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),s(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function ye(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return me(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?me(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function me(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var ge=ae.Z.Group,we=["INFO","SUC","ERROR","WARN"],Ze=ce.Z.Text,be=function(t){(0,f.Z)(a,t);var e,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,p.Z)(r);if(o){var n=(0,p.Z)(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return(0,h.Z)(this,t)});function a(){var t;(0,u.Z)(this,a);for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return t=i.call.apply(i,[this].concat(r)),(0,d.Z)((0,l.Z)(t),"state",{maxMsgCount:100,inputMaxMsgCount:100,importStatus:"waitingFile",importFile:void 0,logs:[],percent:0,statusMsg:void 0,logSetterOpen:!1,showLogLevelList:[].concat(we),logSerialId:void 0,ltmplConfig:void 0}),(0,d.Z)((0,l.Z)(t),"timerId",void 0),(0,d.Z)((0,l.Z)(t),"handleUpload",(function(){var e=t.props,r=e.sourceId,n=e.serverKey,o=t.state.importFile,i=new FormData;i.append("file",o),i.append("sourceId",r.toString()),F.Z.super({url:"/v3/ltmpl/importer",serverKey:n,method:"POST",data:i},"formdata").then((function(e){"success"===e.status?(t.setState({importStatus:"importing"}),t.timerId=setInterval((function(){return t.handleStatus(e.importId)}),500)):(Ot.ZP.error("失败！"),t.setState({importStatus:"fail"}))}))})),(0,d.Z)((0,l.Z)(t),"handleStopImport",(function(){t.setState({importStatus:"stop"})})),(0,d.Z)((0,l.Z)(t),"handleStatus",(function(e){var r=t.props.serverKey,o=t.state,i=o.maxMsgCount,a=o.importStatus;F.Z.super({url:"/v3/importer/status",serverKey:r,method:"GET",query:{importId:e,msgIndex:0,maxMsgCount:i,interrupted:"stop"==a}},"","none").then((function(e){var r,o=[],i=ye(e.messageSequence.messages);try{for(i.s();!(r=i.n()).done;){var c=r.value,u="",s="",l=n.Z.formateDate(c.createTime);"SUC"===c.type?(u="green",s="成功"):"INFO"===c.type?(u="black",s="常规"):"ERROR"===c.type?(u="red",s="错误"):"WARN"===c.type&&(u="rgb(250, 225, 4)",s="警告");var f=(0,x.tZ)("div",null,(0,x.tZ)("p",null,l),(0,x.tZ)("p",{style:{color:u}},"【".concat(s,"】")+c.text));o.push({level:c.type,msg:f})}}catch(t){i.e(t)}finally{i.f()}t.setState({statusMsg:e.message,percent:Math.floor(e.current/e.totalCount*100),logs:o}),!0===e.completed&&(clearInterval(t.timerId),Ot.ZP.success("导入完成！"),t.setState({importStatus:"success"})),"stop"==a&&clearInterval(t.timerId)}))})),(0,d.Z)((0,l.Z)(t),"onChangeShowLogLevelList",(function(e){t.setState({showLogLevelList:e})})),(0,d.Z)((0,l.Z)(t),"fresh",(function(){})),(0,d.Z)((0,l.Z)(t),"handleLogSetter",(function(){var e=t.state.inputMaxMsgCount;t.setState({maxMsgCount:e,logSetterOpen:!1}),Ot.ZP.success("设置成功！")})),(0,d.Z)((0,l.Z)(t),"changeLogSetterOpen",(function(e){t.setState({logSetterOpen:e})})),t}return(0,s.Z)(a,[{key:"componentDidMount",value:(e=(0,c.Z)(ve().mark((function t(){var e,r,n,o;return ve().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.props,r=e.sourceId,n=e.serverKey,t.next=3,b.Z.requestLtmplConfig(n,r);case 3:o=t.sent,this.setState({ltmplConfig:o.ltmplConfig});case 5:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){this.timerId&&clearInterval(this.timerId)}},{key:"render",value:function(){var t,e=this,r=this.state,n=r.ltmplConfig,o=r.importFile,i=r.maxMsgCount,a=r.percent,c=r.importStatus,u=r.showLogLevelList,s=r.logSetterOpen,l=[],f=ye(r.logs);try{for(f.s();!(t=f.n()).done;){var h=t.value;u.includes(h.level)&&l.push(h.msg)}}catch(t){f.e(t)}finally{f.f()}var p={accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel,application/vnd.ms-excel",onChange:function(){},onRemove:function(t){e.setState({importFile:void 0,importStatus:"waitingFile",percent:0})},beforeUpload:function(t){return e.setState({percent:0,importFile:t,importStatus:"fileSelected"}),!1},fileList:o?[o]:void 0},d=(0,x.tZ)("div",null,(0,x.tZ)("label",null,"日志消息数上限："),(0,x.tZ)(ue.Z,{defaultValue:i,onChange:function(t){return e.setState({inputMaxMsgCount:t})}}),(0,x.tZ)(m.ZP,{type:"primary",style:{marginLeft:"10px"},onClick:this.handleLogSetter},"确定"));return(0,x.tZ)("div",{className:"importData"},(0,x.tZ)("h3",null,"导入 -> ",n?n.title:"",(0,x.tZ)("p",{className:"fr"},(0,x.tZ)(m.ZP,{className:"hoverbig",title:"刷新",onClick:this.fresh},(0,x.tZ)(he.Z,null)))),(0,x.tZ)(q.Z,null,(0,x.tZ)(V.Z,{span:14,offset:5},(0,x.tZ)(g.Z,{size:"small",style:{minWidth:600}},(0,x.tZ)(se.Z,p,(0,x.tZ)(m.ZP,null,(0,x.tZ)(pe.Z,null),"选择导入文件")),(0,x.tZ)(le.Z,{percent:a,size:"small",status:"active"}),(0,x.tZ)("div",{className:"importBtns"},(0,x.tZ)(m.ZP,{type:"primary",onClick:this.handleUpload,disabled:!["fileSelected","stop"].includes(c),loading:"importing"==c},"importing"==c?"正在导入":"stop"==c?"重新导入":"开始导入"),(0,x.tZ)(m.ZP,{onClick:this.handleStopImport,disabled:"importing"!=c},"停止导入")),(0,x.tZ)(fe.Z,{header:(0,x.tZ)("div",{className:"listHeader"},(0,x.tZ)("h4",null,"导入日志"),(0,x.tZ)("div",{className:"checks"},(0,x.tZ)(ge,{value:u,onChange:this.onChangeShowLogLevelList},(0,x.tZ)(ae.Z,{value:"INFO",className:"infoColor"},"常规"),(0,x.tZ)(ae.Z,{value:"SUC",className:"sucColor"},"成功"),(0,x.tZ)(ae.Z,{value:"ERROR",className:"errorColor"},"错误"),(0,x.tZ)(ae.Z,{value:"WARN",className:"warnColor"},"警告")),(0,x.tZ)("div",{className:"btns"},(0,x.tZ)(Pt.Z,{content:d,title:"日志设置",trigger:"click",placement:"top",open:s,overlayStyle:{width:350},onOpenChange:this.changeLogSetterOpen},(0,x.tZ)(m.ZP,{title:"日志设置",type:"primary",size:"small"},(0,x.tZ)(de.Z,null)))))),footer:(0,x.tZ)(Ze,{type:"fail"==c||"stop"==c?"danger":"success"},c),bordered:!0,dataSource:l,renderItem:function(t){return(0,x.tZ)(fe.Z.Item,null,t)},className:"importList"})))))}}]),a}(v.PureComponent);function xe(){xe=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function o(n,a,c,u){var s=f(t[n],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,i.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return o("throw",t,c,u)}))}u(s.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),s(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}var ke=function(t){(0,f.Z)(i,t);var e,r,n,o=(r=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,p.Z)(r);if(n){var o=(0,p.Z)(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return(0,h.Z)(this,t)});function i(){var t;(0,u.Z)(this,i);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=o.call.apply(o,[this].concat(r)),(0,d.Z)((0,l.Z)(t),"state",{}),t}return(0,s.Z)(i,[{key:"componentDidMount",value:(e=(0,c.Z)(xe().mark((function t(){return xe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})},{key:"render",value:function(){var t=this.props,e=t.params,r=t.serverKey,n=e.sourceId;return(0,x.tZ)(be,{serverKey:r,sourceId:n})}}]),i}(v.PureComponent),Le=Jt(ke),Ce=r(4264);function Oe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Se(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Oe(Object(r),!0).forEach((function(e){(0,d.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Ee=function(t){(0,f.Z)(i,t);var e,r,o=(e=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,p.Z)(e);if(r){var o=(0,p.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,h.Z)(this,t)});function i(){var t;(0,u.Z)(this,i);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=o.call.apply(o,[this].concat(r)),(0,d.Z)((0,l.Z)(t),"goBackToLtmpl",(function(){var e=t.props.match.params.sourceId,r=t.props.basePath,n="".concat(r?r+"/":"","/").concat(e,"/act-table?menuId=").concat(t.getMenuId()),o=t.getMainCode();o&&(n+="&mainCode=".concat(o)),t.props.navigate(n)})),(0,d.Z)((0,l.Z)(t),"getMainCode",(function(){return t.props.searchParams.get("mainCode")})),(0,d.Z)((0,l.Z)(t),"getMenuId",(function(){return t.props.searchParams.get("menuId")})),t}return(0,s.Z)(i,[{key:"render",value:function(){var t=this.props.params.pageName,e=this.props.location.search,r=n.Z.transQueryStrToParams(e),o=n.Z.getCustomPage("/"+t)||Ce.Z;return v.createElement(o,Se(Se({},this.props.params),{},{goBack:this.goBackToLtmpl},r))}}]),i}(v.PureComponent),Pe=Jt(Ee),je=r(34363),Ie=(r(55707),r(80821));function Re(){Re=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function o(n,a,c,u){var s=f(t[n],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,i.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return o("throw",t,c,u)}))}u(s.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),s(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}var _e=function(t){(0,f.Z)(a,t);var e,r,i=(e=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,p.Z)(e);if(r){var o=(0,p.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,h.Z)(this,t)});function a(){var t;(0,u.Z)(this,a);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=i.call.apply(i,[this].concat(r)),(0,d.Z)((0,l.Z)(t),"state",{username:"",password:"",loading:!0,needKaptcha:!1,kaptchaImg:null,kaptchaToken:null}),(0,d.Z)((0,l.Z)(t),"formRef",v.createRef()),(0,d.Z)((0,l.Z)(t),"componentDidMount",(0,c.Z)(Re().mark((function e(){var r;return Re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.removeEventListener("keydown",t.handleKeyDown),e.next=3,o.Z.getRasPubkey();case 3:r=e.sent,t.setState({pubkey:r,loading:!1});case 5:case"end":return e.stop()}}),e)})))),(0,d.Z)((0,l.Z)(t),"getKaptchaToken",(0,c.Z)(Re().mark((function e(){var r,n;return Re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.getKaptchaToken();case 2:(r=e.sent)&&(n=r.img&&0==r.img.indexOf("data:")?r.img:"data:image/png;base64,".concat(r.img),t.setState({kaptchaImg:n,kaptchaToken:r.kaptchaToken,needKaptcha:!0}));case 4:case"end":return e.stop()}}),e)})))),(0,d.Z)((0,l.Z)(t),"handleSubmit",(0,c.Z)(Re().mark((function e(){var r,n,i;return Re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({loading:!0}),r=t.state,n=r.kaptchaToken,i=r.pubkey,e.next=4,t.formRef.current.validateFields().then(function(){var e=(0,c.Z)(Re().mark((function e(r){var a;return Re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={username:r.username,password:r.password},e.next=3,o.Z.login(a,n,r.kaptchaText,i);case 3:if("error"!==e.sent.status){e.next=7;break}return e.next=7,t.getKaptchaToken();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(t){}));case 4:t.setState({loading:!1});case 5:case"end":return e.stop()}}),e)})))),(0,d.Z)((0,l.Z)(t),"handleKeyDown",(function(e){13===e.keyCode&&t.handleSubmit()})),(0,d.Z)((0,l.Z)(t),"changeKaptcha",function(){var e=(0,c.Z)(Re().mark((function e(r){return Re().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getKaptchaToken();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t}return(0,s.Z)(a,[{key:"render",value:function(){var t=this.props.params;n.Z.setProgramCode4RoutePath(t);var e=this.state,r=(e.username,e.password,e.loading),o=e.needKaptcha,i=e.kaptchaImg;return e.config,(0,x.tZ)(q.Z,{type:"flex",justify:"center",align:"middle",className:"login-blue"},(0,x.tZ)(V.Z,null,(0,x.tZ)(St.Z,{style:{width:350},ref:this.formRef,name:"normal_login",className:"login-form",initialValues:{remember:!0}},(0,x.tZ)("h3",null,"欢迎登录"),(0,x.tZ)(v.Fragment,null,(0,x.tZ)(St.Z.Item,{name:"username",rules:[{required:!0,message:"请输入用户名!"},{max:30,min:0,message:"输入0-30个字符"}]},(0,x.tZ)(Et.Z,{prefix:(0,x.tZ)(bt.Z,{className:"site-form-item-icon"}),placeholder:"用户名"})),(0,x.tZ)(St.Z.Item,{name:"password",rules:[{required:!0,message:"请输入密码!"}]},(0,x.tZ)(Et.Z.Password,{placeholder:"密码",onKeyDown:this.handleKeyDown,prefix:(0,x.tZ)(jt.Z,{className:"site-form-item-icon"})}))),o?(0,x.tZ)(q.Z,{gutter:8},(0,x.tZ)(V.Z,{span:12},(0,x.tZ)(St.Z.Item,{name:"kaptchaText",rules:[{required:!0,message:"请输入验证码!"}]},(0,x.tZ)(Et.Z,{prefix:(0,x.tZ)(Ie.Z,{className:"site-form-item-icon"}),placeholder:"验证码",onKeyDown:this.handleKeyDown}))),(0,x.tZ)(V.Z,{span:12},(0,x.tZ)("img",{style:{cursor:"pointer"},height:30,width:90,title:"点击刷新",onClick:this.changeKaptcha,src:i}))):"",(0,x.tZ)(St.Z.Item,null,(0,x.tZ)(m.ZP,{type:"primary",style:{width:"100%"},loading:r,onClick:this.handleSubmit,className:"login-form-button"},"登录")))))}}]),a}(v.Component),Ne=Jt(_e),Te=r(24071),De=r(67077);function Ae(){Ae=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function o(n,a,c,u){var s=f(t[n],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,i.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return o("throw",t,c,u)}))}u(s.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),s(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}var Fe=function(t){(0,f.Z)(y,t);var e,r,n,i,a=(n=y,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,p.Z)(n);if(i){var r=(0,p.Z)(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return(0,h.Z)(this,t)});function y(){var t;(0,u.Z)(this,y);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=a.call.apply(a,[this].concat(r)),(0,d.Z)((0,l.Z)(t),"state",{loading:!1,config:null,context:null}),(0,d.Z)((0,l.Z)(t),"formRef",v.createRef()),(0,d.Z)((0,l.Z)(t),"handleSubmit",(0,c.Z)(Ae().mark((function e(){var r;return Ae().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({loading:!0}),r=t.state.config,e.next=4,t.formRef.current.validateFields().then(function(){var t=(0,c.Z)(Ae().mark((function t(e){var n;return Ae().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={},r.forEach((function(t){n[t.id]=e[t.id]})),t.next=4,o.Z.setContext(n);case 4:t.sent;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){}));case 4:t.setState({loading:!1});case 5:case"end":return e.stop()}}),e)})))),t}return(0,s.Z)(y,[{key:"componentDidMount",value:(r=(0,c.Z)(Ae().mark((function t(){var e,r;return Ae().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.Z.getContextSourceConfig();case 2:return e=t.sent,t.next=5,o.Z.getContextSourceValue();case 5:if(r=t.sent,e&&0!=e.length){t.next=10;break}return e=[],window.location.hash="#/home",t.abrupt("return");case 10:this.setState({config:e,context:r,loading:!1});case 11:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"componentDidUpdate",value:(e=(0,c.Z)(Ae().mark((function t(e){return Ae().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)})},{key:"render",value:function(){var t=this.state,e=t.config,r=t.loading,n=t.context,o=this.props.serverKey;return(0,x.tZ)(Te.Z,{title:"全局配置",closable:!1,open:!0,footer:[]},(0,x.tZ)(q.Z,{justify:"center",align:"middle"},(0,x.tZ)(V.Z,null,(0,x.tZ)(St.Z,{style:{width:350},ref:this.formRef,name:"normal_login",className:"login-form",initialValues:{remember:!0}},e?e.map((function(t){var e=null;return n&&n.forEach((function(r){r.moduleName==t.moduleName&&(e=r.selectedValues)})),(0,x.tZ)(St.Z.Item,{name:t.id,initialValue:e,rules:[{required:!0,message:"请选择"+t.title}]},(0,x.tZ)(De.Z,{serverKey:o,id:"14",fieldConfig:{id:t.groupId,title:t.title,controlType:"entity-select",max:"1",required:!0,suppleOptions:t.canNotSet?[{code:"all",title:"不设置"}]:void 0}}))})):null,(0,x.tZ)(St.Z.Item,null,(0,x.tZ)(m.ZP,{type:"primary",style:{width:"100%"},loading:r,onClick:this.handleSubmit,className:"login-form-button"},"确 定"))))))}}]),y}(v.PureComponent);(0,d.Z)(Fe,"defaultProps",{});var Ge=Jt(Fe),Me=r(45795),Be=r(53984),Ke=r(39929),qe=["resultStatus"],Ve=function(t){var e=t.resultStatus,r=void 0===e?"success":e,n=(0,a.Z)(t,qe),o=n.title,i=n.open,c=n.subtitle,u=n.goAdd,s=n.goEdit,l=n.goList,f=n.jumpTypes,h=n.addOrUpdate;return(0,x.tZ)(Te.Z,{title:o||"保存提示",open:i,closable:!1,destroyOnClose:!0,footer:[],bodyStyle:{height:430,overflow:"auto"},width:560,maskClosable:!0},(0,x.tZ)(Ke.ZP,{status:r,title:"success"===r?"保存成功":"保存失败",subTitle:c,extra:[u&&f&&f.includes("add")?(0,x.tZ)(m.ZP,{key:"goOnAdd",onClick:function(){return u()}},"update"===h?"转添加":"继续添加"):void 0,s&&f&&f.includes("edit")?(0,x.tZ)(m.ZP,{type:"primary",key:"goOnEdit",onClick:function(){return s()}},"update"===h?"继续编辑":"编辑实体"):"",l&&f&&f.includes("list")?(0,x.tZ)(m.ZP,{type:"primary",key:"onBackList",onClick:function(){return l()}},"返回列表"):""]}))},He=r(1233),Ye=r(92801),ze=r(22217),Ue=r(92104),We=r(37653),Qe=r(62508);var $e=function(t){(0,f.Z)(o,t);var e,r,n=(e=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,p.Z)(e);if(r){var o=(0,p.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,h.Z)(this,t)});function o(){var t;(0,u.Z)(this,o);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return t=n.call.apply(n,[this].concat(r)),(0,d.Z)((0,l.Z)(t),"state",{}),(0,d.Z)((0,l.Z)(t),"calcOffsetBottom",(function(t,e){var r=0;return e&&(r+=e.length),t&&t.includes("dtmplSave")&&(r+=1),r>=3?120:2==r?86:80})),t}return(0,s.Z)(o,[{key:"render",value:function(){(0,Ye.Z)(this.state);var t,e=this.props,r=e.dtmplConfig,n=e.doSubmit,o=e.formRef,i=e.serial,a=e.serverKey,c=r.buttons,u=r.actions,s=[];return r.premises&&r.premises.length>0&&s.push({id:"1",title:"默认字段"}),r.groups.forEach((function(t){s.push({title:t.title,id:t.id})})),u&&u.length>1&&(t=(0,x.tZ)("div",{className:"btns"},u.map((function(t,e){if(e>1)return(0,x.tZ)(Qe.Z,{serverKey:a,iconType:"icon-title",hiddenType:"disabled",buttonType:"primary",serial:i,key:t.id,formRef:o,actionConfig:t,doAction:n})})))),(0,x.tZ)(ze.Z,{style:{position:"absolute",bottom:60,right:15},offsetBottom:this.calcOffsetBottom(c,u)},(0,x.tZ)("div",{className:"submitButtonBar"},(0,x.tZ)("ul",null,c.includes("dtmplSave")?(0,x.tZ)("li",{key:100},(0,x.tZ)(m.ZP,{onClick:function(){return n()},type:"primary",icon:(0,x.tZ)(Ue.Z,null),key:"btn",block:!0},"保 存")):"",u?u.map((function(t,e){if(e<2)return(0,x.tZ)("li",{key:e},(0,x.tZ)(Qe.Z,{serverKey:a,hiddenType:"disabled",buttonType:"primary-block",serial:i,key:t.id,formRef:o,actionConfig:t,doAction:n}))})):"",u&&u.length>2?(0,x.tZ)(Pt.Z,{placement:"leftTop",content:t,trigger:"hover"},(0,x.tZ)(m.ZP,{block:!0},(0,x.tZ)(We.Z,null),"更多")):"")))}}]),o}(v.PureComponent),Je=$e;var Xe=function(t){(0,f.Z)(o,t);var e,r,n=(e=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,p.Z)(e);if(r){var o=(0,p.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,h.Z)(this,t)});function o(){var t;(0,u.Z)(this,o);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return t=n.call.apply(n,[this].concat(r)),(0,d.Z)((0,l.Z)(t),"state",{}),t}return(0,s.Z)(o,[{key:"render",value:function(){(0,Ye.Z)(this.state);var t=this.props,e=t.dtmplConfig,r=t.position,n=t.doSubmit,o=t.formRef,i=t.serial,a=t.serverKey,c=e.buttons,u=e.actions;return(0,x.tZ)(g.Z,{bordered:!1},(0,x.tZ)(q.Z,{align:"middle",justify:"bottomLeft"==r?"start":"bottomRight"==r?"end":"center"},(0,x.tZ)(w.Z,null,c.includes("dtmplSave")?(0,x.tZ)(V.Z,null,(0,x.tZ)(m.ZP,{onClick:function(){return n()},type:"primary",icon:(0,x.tZ)(Ue.Z,null),key:"btn",block:!0},"保 存")):null,u?u.map((function(t,e){return(0,x.tZ)(V.Z,null,(0,x.tZ)(Qe.Z,{serverKey:a,serial:i,key:t.id,formRef:o,actionConfig:t,doAction:n}))})):"")))}}]),o}(v.PureComponent),tr=Xe;var er=function(t){(0,f.Z)(o,t);var e,r,n=(e=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,p.Z)(e);if(r){var o=(0,p.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,h.Z)(this,t)});function o(){var t;(0,u.Z)(this,o);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return t=n.call.apply(n,[this].concat(r)),(0,d.Z)((0,l.Z)(t),"state",{}),t}return(0,s.Z)(o,[{key:"render",value:function(){var t=this.props,e=t.position,r=t.doSubmit,n=t.serial,o=t.dtmplConfig,i=t.formRef,a=e||(o.buttonPosition?o.buttonPosition:void 0);return(0,x.tZ)(v.Fragment,null,a&&"fixedBottomRight"!=a?(0,x.tZ)(tr,{position:a,doSubmit:r,serial:n,dtmplConfig:o,formRef:i}):(0,x.tZ)(Je,{doSubmit:r,serial:n,dtmplConfig:o,formRef:i}))}}]),o}(v.PureComponent);(0,d.Z)(er,"defaultProps",{});var rr=er,nr=r(72670);function or(){or=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function o(n,a,c,u){var s=f(t[n],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,i.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return o("throw",t,c,u)}))}u(s.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),s(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}var ir=function(t){(0,f.Z)(y,t);var e,r,i,a=(r=y,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,p.Z)(r);if(i){var n=(0,p.Z)(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return(0,h.Z)(this,t)});function y(){var t;(0,u.Z)(this,y);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return t=a.call.apply(a,[this].concat(r)),(0,d.Z)((0,l.Z)(t),"formRef",v.createRef()),(0,d.Z)((0,l.Z)(t),"newCode",void 0),(0,d.Z)((0,l.Z)(t),"state",{id:"dtmplEdit"+n.Z.getRandomNum(6),showPostResult:!1,dtmplConfig:void 0,loading:!0,serial:1,dtmplData:void 0}),(0,d.Z)((0,l.Z)(t),"autoSaveTimer",-1e15),(0,d.Z)((0,l.Z)(t),"autoSaveInterval",void 0),(0,d.Z)((0,l.Z)(t),"onClickBody",(function(e){t.autoSaveTimer=0})),(0,d.Z)((0,l.Z)(t),"onValuesChange",(function(){t.setState({serial:t.state.serial+1})})),(0,d.Z)((0,l.Z)(t),"loadConfigData",(0,c.Z)(or().mark((function e(){var r,n,o,i,a;return or().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.props,n=r.sourceId,o=r.code,i=r.serverKey,t.setState({loading:!0}),a=void 0,!o){e.next=9;break}return e.next=6,b.Z.requestDtmplConfig(i,n);case 6:a=e.sent,e.next=12;break;case 9:return e.next=11,b.Z.requestAddDtmplConfig(i,n);case 11:a=e.sent;case 12:return a.authSaveInterval&&a.authSaveInterval>0&&(t.autoSaveInterval&&clearInterval(t.autoSaveInterval),t.autoSaveInterval=setInterval((function(){t.autoSaveTimer>=a.authSaveInterval?(t.autoSaveTimer=-1e15,t.doSubmit(void 0)):t.autoSaveTimer=t.autoSaveTimer+1}),1e3)),e.next=15,t.loadData(a);case 15:return t.setState({dtmplConfig:a,loading:!1}),e.abrupt("return",a);case 17:case"end":return e.stop()}}),e)})))),(0,d.Z)((0,l.Z)(t),"loadData",function(){var e=(0,c.Z)(or().mark((function e(r){var n,i,a,c,u,s,l,f;return or().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.props,i=n.sourceId,a=n.code,c=n.addOrUpdate,u=n.serverKey,s=n.codeSource,(l=a)||!s){e.next=6;break}return e.next=5,o.Z.queryCode(i,s,u);case 5:l=e.sent;case 6:if(!l){e.next=15;break}return t.setState({loading:!0}),e.next=10,o.Z.requestDtmplData(u,i,l,null);case 10:f=e.sent,"copy"==c&&f&&(f.code=void 0),t.setState({dtmplData:f,id:l,loading:!1}),e.next=16;break;case 15:t.setState({dtmplData:{code:void 0,title:void 0,fieldMap:{},arrayMap:{}},loading:!1});case 16:setTimeout((function(){return t.onValuesChange()}),300);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,d.Z)((0,l.Z)(t),"doSubmit",(function(e){var r=t.props.mainCode;t.formRef.current.setFieldsValue({actionId:e}),r&&t.formRef.current.setFieldsValue({mainCode:r}),t.formRef.current.submit()})),(0,d.Z)((0,l.Z)(t),"onFinish",(function(e){t.newCode=e;var r=t.state.dtmplConfig,n=r.saveJumpTo?r.saveJumpTo:[];n.length>1?t.setState({showPostResult:!0}):n.includes("edit")?t.goEdit():n.includes("add")?t.goAdd():t.goList()})),(0,d.Z)((0,l.Z)(t),"goList",(function(){t.newCode=void 0,t.props.goBackToLtmpl()})),(0,d.Z)((0,l.Z)(t),"goEdit",(function(){var e=t.newCode,r=t.props,n=r.goDtmpl;r.code,r.goBackToLtmpl,t.newCode=void 0,n(e),t.setState((function(t){return{showPostResult:!1}}))})),(0,d.Z)((0,l.Z)(t),"goAdd",(function(){t.newCode=void 0;var e=t.props,r=e.goDtmpl;e.code&&r(),t.setState((function(t){return{showPostResult:!1}}))})),t}return(0,s.Z)(y,[{key:"componentDidMount",value:function(){this.loadConfigData()}},{key:"componentDidUpdate",value:(e=(0,c.Z)(or().mark((function t(e,r,n){return or().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&e==this.props){t.next=7;break}return t.t0=this,t.next=4,this.loadConfigData();case 4:return t.t1=t.sent,t.next=7,t.t0.loadData.call(t.t0,t.t1);case 7:case"end":return t.stop()}}),t,this)}))),function(t,r,n){return e.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){this.autoSaveInterval&&clearInterval(this.autoSaveInterval)}},{key:"render",value:function(){var t=this.state,e=t.dtmplConfig,r=t.showPostResult,n=t.loading,o=t.id,i=t.serial,a=t.dtmplData,c=this.props,u=c.sourceId,s=c.showRightNav,l=c.code,f=c.addOrUpdate,h=c.maxColsOnRow,p=c.mainCode,d=c.serverKey;return e?(0,x.tZ)("div",{className:"detailPage ".concat(s?"showRightNav":"noRightNav"),onClick:this.onClickBody},(0,x.tZ)(Be.Z,{serverKey:d,mainCode:p,parentId:o,dtmplConfig:e,formRef:this.formRef,sourceId:u,onFinish:this.onFinish,maxColsOnRow:h,showConfirm:!0,dtmplData:a,onValuesChange:this.onValuesChange}),s?(0,x.tZ)(He.Z,{parentId:o,dtmplConfig:e}):"",(0,x.tZ)(rr,{serverKey:d,serial:i,dtmplConfig:e,doSubmit:this.doSubmit,formRef:this.formRef}),(0,x.tZ)(nr.Z,{serverKey:d,dtmplConfig:e,mainCode:l}),(0,x.tZ)(Ve,{open:r,addOrUpdate:"copy"==f?"add":f,resultStatus:"success",goList:this.goList,goEdit:this.goEdit,goAdd:this.goAdd,jumpTypes:e.saveJumpTo})):(0,x.tZ)(g.Z,{loading:n})}}]),y}(v.PureComponent);(0,d.Z)(ir,"defaultProps",{showRightNav:!0});var ar=r(28202);function cr(){cr=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function o(n,a,c,u){var s=f(t[n],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,i.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return o("throw",t,c,u)}))}u(s.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),s(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}var ur=function(t){(0,f.Z)(y,t);var e,r,n,i,a=(n=y,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,p.Z)(n);if(i){var r=(0,p.Z)(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return(0,h.Z)(this,t)});function y(){var t;(0,u.Z)(this,y);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=a.call.apply(a,[this].concat(r)),(0,d.Z)((0,l.Z)(t),"state",{codeSource:void 0,queriedCode:void 0}),(0,d.Z)((0,l.Z)(t),"queryCode",(0,c.Z)(cr().mark((function e(){var r,n,i,a;return cr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.props.params,n=r.sourceId,i=t.getCodeSource(),e.next=5,o.Z.queryCode(n,i);case 5:a=e.sent,t.setState({codeSource:i,queriedCode:a});case 7:case"end":return e.stop()}}),e)})))),(0,d.Z)((0,l.Z)(t),"getMenuId",(function(){return t.props.searchParams.get("menuId")})),(0,d.Z)((0,l.Z)(t),"getCodeSource",(function(){return t.props.searchParams.get("codeSource")})),(0,d.Z)((0,l.Z)(t),"goBackToLtmpl",(function(){t.props.navigate(-1)})),(0,d.Z)((0,l.Z)(t),"goDtmpl",(function(e){var r=t.props.params.sourceId,n=t.props.basePath,o="".concat(n,"/").concat(r,"/detail-edit?menuId=").concat(t.getMenuId());e&&(o+="&code=".concat(e));var i=t.getMainCode();i&&(o+="&mainCode=".concat(i)),t.props.navigate(o)})),(0,d.Z)((0,l.Z)(t),"getMainCode",(function(){return t.props.params.mainCode})),(0,d.Z)((0,l.Z)(t),"getCode",(function(){var e=t.state,r=e.codeSource,n=e.queriedCode,o=t.props.searchParams;return r?n:o.get("code")})),(0,d.Z)((0,l.Z)(t),"getMode",(function(){var e=t.props.searchParams;return t.getCode()?e.get("mode"):"add"})),t}return(0,s.Z)(y,[{key:"componentDidMount",value:(r=(0,c.Z)(cr().mark((function t(){return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.queryCode();case 2:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"shouldComponentUpdate",value:function(t,e){return t&&t==this.props||this.setState({codeSource:void 0,queriedCode:void 0}),!0}},{key:"componentDidUpdate",value:(e=(0,c.Z)(cr().mark((function t(e,r,n){return cr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&e==this.props){t.next=3;break}return t.next=3,this.queryCode();case 3:case"end":return t.stop()}}),t,this)}))),function(t,r,n){return e.apply(this,arguments)})},{key:"render",value:function(){var t=this.props,e=t.location,r=t.params,n=r.sourceId,o=this.state.codeSource;if(!e)return(0,x.tZ)(v.Fragment,null);var i=this.getCode();if(i&&"bad-code"==i)return(0,x.tZ)(Me.Z,null);var a=r.versionId;return e.pathname.endsWith("detail-view")?(0,x.tZ)(ar.Z,{serverKey:null,goDtmpl:this.goDtmpl,sourceId:n,versionId:a,code:i,mainCode:this.getMainCode()}):(0,x.tZ)(ir,{serverKey:null,addOrUpdate:this.getMode(),sourceId:n,code:i,mainCode:this.getMainCode(),goBackToLtmpl:o?void 0:this.goBackToLtmpl,goDtmpl:this.goDtmpl})}}]),y}(v.Component);(0,d.Z)(ur,"defaultProps",{basePath:"",codeSource:void 0,queriedCode:void 0});var sr=Jt(ur);function lr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function fr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?lr(Object(r),!0).forEach((function(e){(0,d.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function hr(){hr=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function o(n,a,c,u){var s=f(t[n],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,i.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return o("throw",t,c,u)}))}u(s.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),s(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}var pr=function(t){(0,f.Z)(y,t);var e,r,o,i,a=(o=y,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,p.Z)(o);if(i){var r=(0,p.Z)(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return(0,h.Z)(this,t)});function y(){var t;(0,u.Z)(this,y);for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return t=a.call.apply(a,[this].concat(r)),(0,d.Z)((0,l.Z)(t),"state",{ltmplConfigRes:void 0,pageNo:void 0,pageSize:void 0}),(0,d.Z)((0,l.Z)(t),"onRoute",(function(e){t.props.navigate(e)})),(0,d.Z)((0,l.Z)(t),"getMenuId",(function(){return t.props.searchParams.get("menuId")})),(0,d.Z)((0,l.Z)(t),"loadData",(0,c.Z)(hr().mark((function e(){var r,n,o;return hr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.props.params,n=r.sourceId,e.next=4,b.Z.requestLtmplConfig(null,n);case 4:o=e.sent,t.setState({ltmplConfigRes:o});case 6:case"end":return e.stop()}}),e)})))),(0,d.Z)((0,l.Z)(t),"showView",(function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.props.basePath,o=t.props.params.sourceId,i=t.state.ltmplConfigRes,a="".concat(n,"/").concat(o,"/detail-view?code=").concat(e,"&menuId=").concat(t.getMenuId());r&&i.ltmplConfig.customViewPagePath&&(a="".concat(n).concat(i.ltmplConfig.customViewPagePath,"?menuId=").concat(t.getMenuId(),"&sourceId=").concat(o)),t.onRoute(a)})),(0,d.Z)((0,l.Z)(t),"doEdit",(function(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=t.props.basePath,i=t.props.params.sourceId,a=t.state.ltmplConfigRes,c=t.getMainCode(),u="".concat(o,"/").concat(i,"/detail-edit?code=").concat(e,"&menuId=").concat(t.getMenuId(),"&mode=").concat(r);n&&a.ltmplConfig.customEditPagePath&&(u="".concat(o,"/page/").concat(i).concat(a.ltmplConfig.customEditPagePath,"?code=").concat(e,"&menuId=").concat(t.getMenuId())),c&&(u+="&mainCode=".concat(c)),t.onRoute(u)})),(0,d.Z)((0,l.Z)(t),"getMainCode",(function(){var e=void 0,r=t.props.searchParams.get("mainCode");return r&&(e=r),e})),(0,d.Z)((0,l.Z)(t),"doCreate",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=t.props.basePath,n=t.props.params.sourceId,o=t.state.ltmplConfigRes,i="".concat(r,"/").concat(n,"/detail-edit?menuId=").concat(t.getMenuId());e&&o.ltmplConfig.customEditPagePath&&(i="".concat(r,"/page/").concat(n).concat(o.ltmplConfig.customEditPagePath,"?menuId=").concat(t.getMenuId()));var a=t.getMainCode();a&&(i+="&mainCode=".concat(a)),t.onRoute(i)})),(0,d.Z)((0,l.Z)(t),"doRAction",(function(e,r){var n=t.props.basePath,o="".concat(n,"/").concat(e,"/act-table?mainCode=").concat(r,"&menuId=").concat(t.getMenuId());t.onRoute(o)})),(0,d.Z)((0,l.Z)(t),"doSearch",(function(e){var r=t.props.basePath,o=t.props.params.sourceId,i=fr({},e),a=n.Z.transQueryParamsToStr(i);t.props.navigate("".concat(r,"/").concat(o,"/act-table?").concat(a),{replace:!0})})),(0,d.Z)((0,l.Z)(t),"onChangeSearch",(function(e){var r=fr({},e),n=t.props.searchParams.get("mainCode");n&&(r.mainCode=n);var o=t.state,i=o.pageSize,a=o.pageNo;i&&(r.pageNo=a),a&&(r.pageSize=i),r.menuId=t.getMenuId(),r.sourceId=t.getMenuId(),t.doSearch(r)})),(0,d.Z)((0,l.Z)(t),"onChangePage",(function(e,r){var o=t.props.location.search,i=n.Z.transQueryStrToParams(o);i.pageNo=e,i.pageSize=r,t.doSearch(i)})),t}return(0,s.Z)(y,[{key:"componentDidMount",value:(r=(0,c.Z)(hr().mark((function t(){return hr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.loadData();case 1:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"componentDidUpdate",value:(e=(0,c.Z)(hr().mark((function t(e){var r,n,o,i,a,c;return hr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.props,n=r.location,o=r.params,i=o.sourceId,a=e.params.sourceId,c=e.location,!(!i||!a&&this.state.ltmplConfigRes||n.pathname==c.pathname&&n.search==c.search)){t.next=6;break}return t.abrupt("return");case 6:this.loadData();case 7:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"render",value:function(){var t=this.state.ltmplConfigRes,e=this.props,r=e.location,o=e.params.sourceId,i=void 0,a=r.search,c=n.Z.transQueryStrToParams(a),u=c.pageSize,s=c.pageNo;return a.indexOf("mainCode")>0&&(i=c.mainCode),t?(0,x.tZ)(je.Z,{serverKey:null,pageSize:u,pageNo:s,onChangePage:this.onChangePage,menuId:this.getMenuId(),mainCode:i,showView:this.showView,doSearch:this.onChangeSearch,doEdit:this.doEdit,doCreate:this.doCreate,sourceId:o,criteriaData:c,ltmplConfig:t?t.ltmplConfig:null,doRAction:this.doRAction}):(0,x.tZ)(v.Fragment,null)}}]),y}(v.PureComponent);(0,d.Z)(pr,"defaultProps",{basePath:""});var dr=Jt(pr);r(26112),r(85932);function vr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function yr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?vr(Object(r),!0).forEach((function(e){(0,d.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function mr(){mr=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function o(n,a,c,u){var s=f(t[n],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,i.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return o("throw",t,c,u)}))}u(s.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),s(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}v.PureComponent,r(28520);var gr=function(t){(0,f.Z)(Z,t);var e,r,i,a,y=(i=Z,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,p.Z)(i);if(a){var r=(0,p.Z)(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return(0,h.Z)(this,t)});function Z(){var t;(0,u.Z)(this,Z);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return t=y.call.apply(y,[this].concat(r)),(0,d.Z)((0,l.Z)(t),"formRef",v.createRef()),(0,d.Z)((0,l.Z)(t),"autoSaveTimer",-1e15),(0,d.Z)((0,l.Z)(t),"autoSaveInterval",void 0),(0,d.Z)((0,l.Z)(t),"onClickBody",(function(e){t.autoSaveTimer=0})),(0,d.Z)((0,l.Z)(t),"state",{id:"dtmplEditCard"+n.Z.getRandomNum(6),dtmplConfig:void 0,loading:!0,serial:1,dtmplData:void 0}),(0,d.Z)((0,l.Z)(t),"loadConfigData",(0,c.Z)(mr().mark((function e(){var r,n,o,i,a;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.props,n=r.sourceId,o=r.code,i=r.serverKey,t.setState({loading:!0}),a=void 0,!o){e.next=9;break}return e.next=6,b.Z.requestDtmplConfig(i,n);case 6:a=e.sent,e.next=12;break;case 9:return e.next=11,b.Z.requestAddDtmplConfig(i,n);case 11:a=e.sent;case 12:return a.authSaveInterval&&a.authSaveInterval>0&&(t.autoSaveInterval&&clearInterval(t.autoSaveInterval),t.autoSaveInterval=setInterval((function(){t.autoSaveTimer>=a.authSaveInterval?(t.autoSaveTimer=-1e15,t.doSubmit(void 0)):t.autoSaveTimer=t.autoSaveTimer+1}),1e3)),e.next=15,t.loadData(a);case 15:t.setState({dtmplConfig:a,loading:!1});case 16:case"end":return e.stop()}}),e)})))),(0,d.Z)((0,l.Z)(t),"loadData",function(){var e=(0,c.Z)(mr().mark((function e(r){var n,i,a,c,u,s,l,f;return mr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.props,i=n.sourceId,a=n.code,c=n.defaultDtmplData,u=n.serverKey,s=n.codeSource,(l=a)||!s){e.next=6;break}return e.next=5,o.Z.queryCode(i,s,u);case 5:l=e.sent;case 6:if(!l){e.next=14;break}return t.setState({loading:!0}),e.next=10,o.Z.requestDtmplData(u,i,l,null);case 10:f=e.sent,t.setState({dtmplData:f,id:l,loading:!1}),e.next=15;break;case 14:c?t.setState({dtmplData:c,loading:!1}):t.setState({dtmplData:{code:void 0,title:void 0,fieldMap:{},arrayMap:{}},loading:!1});case 15:setTimeout((function(){return t.onValuesChange()}),300);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,d.Z)((0,l.Z)(t),"onValuesChange",(function(){t.setState({serial:t.state.serial+1})})),(0,d.Z)((0,l.Z)(t),"doSubmit",(function(e,r,n){var o=t.props.mainCode;t.formRef.current.setFieldsValue({actionId:e}),o&&t.formRef.current.setFieldsValue({mainCode:o}),n&&t.formRef.current.setFieldsValue(n),t.formRef.current.submit()})),(0,d.Z)((0,l.Z)(t),"getFooter",(function(){var e=t.props.serverKey,r=t.state,n=(r.dtmplData,r.serial),o=[];o.unshift((0,x.tZ)(m.ZP,{onClick:function(){return t.doSubmit()},type:"primary"},"保 存"));var i=t.state.dtmplConfig;return i&&i.actions.forEach((function(r,i){o.unshift((0,x.tZ)(Qe.Z,{serverKey:e,iconType:"icon-title",hiddenType:"disabled",serial:n,key:r.id,formRef:t.formRef,actionConfig:r,doAction:t.doSubmit}))})),o})),t}return(0,s.Z)(Z,[{key:"componentDidMount",value:(r=(0,c.Z)(mr().mark((function t(){return mr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.loadConfigData();case 2:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"componentDidUpdate",value:(e=(0,c.Z)(mr().mark((function t(e){var r;return mr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.state.dtmplConfig,!e||e==this.props){t.next=9;break}if(e.sourceId==this.props.sourceId&&null!=r){t.next=7;break}return t.next=5,this.loadConfigData();case 5:t.next=9;break;case 7:return t.next=9,this.loadData(r);case 9:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){this.autoSaveInterval&&clearInterval(this.autoSaveInterval)}},{key:"render",value:function(){var t=this.props,e=t.onOk,r=t.sourceId,n=t.mainCode,o=t.style,i=t.maxColsOnRow,a=t.title,c=t.serverKey,u=this.state,s=u.dtmplConfig,l=u.id,f=u.dtmplData;return(0,x.tZ)(v.Fragment,null,(0,x.tZ)(g.Z,{headStyle:{alignItems:"center"},title:a,style:yr({minWidth:"720px"},o),bodyStyle:{padding:"6px"},extra:(0,x.tZ)(w.Z,null,this.getFooter())},(0,x.tZ)(Be.Z,{serverKey:c,showHeader:!1,mainCode:n,parentId:l,dtmplConfig:s,formRef:this.formRef,sourceId:r,onFinish:e,maxColsOnRow:i,showConfirm:!1,dtmplData:f,onValuesChange:this.onValuesChange})))}}]),Z}(v.PureComponent);(0,d.Z)(gr,"defaultProps",{showConfirm:!1,okText:"确定"});var wr=["title","placement","width","onCancel","open"];var Zr=function(t){(0,f.Z)(o,t);var e,r,n=(e=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,p.Z)(e);if(r){var o=(0,p.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,h.Z)(this,t)});function o(){var t;(0,u.Z)(this,o);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return t=n.call.apply(n,[this].concat(r)),(0,d.Z)((0,l.Z)(t),"state",{}),t}return(0,s.Z)(o,[{key:"render",value:function(){var t=this.props,e=t.title,r=t.placement,n=t.width,o=t.onCancel,i=t.open,c=(0,a.Z)(t,wr);return(0,x.tZ)(st.Z,{title:e,placement:r,closable:!0,mask:!1,onClose:o,open:i,width:n,style:{maxWidth:"92vw"}},(0,x.tZ)(ft.Z,c))}}]),o}(v.PureComponent);(0,d.Z)(Zr,"defaultProps",{showConfirm:!0,width:"76vw",forceRender:!0,style:{maxWidth:"92vw",maxHeight:"92vh"},okText:"确定",cancelText:"取消",placement:"left"});var br=["title","height","width","onCancel","open"];var xr=function(t){(0,f.Z)(o,t);var e,r,n=(e=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,p.Z)(e);if(r){var o=(0,p.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,h.Z)(this,t)});function o(){var t;(0,u.Z)(this,o);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return t=n.call.apply(n,[this].concat(r)),(0,d.Z)((0,l.Z)(t),"state",{}),t}return(0,s.Z)(o,[{key:"render",value:function(){var t=this.props,e=t.title,r=t.height,n=t.width,o=t.onCancel,i=t.open,c=(0,a.Z)(t,br);return(0,x.tZ)(Te.Z,{open:i,width:n,title:e,closable:!1,bodyStyle:{height:r,overflow:"auto",padding:"6 0 6 6"},destroyOnClose:!0,centered:!0,onOk:o,onCancel:o,footer:[(0,x.tZ)(m.ZP,{onClick:o},"关 闭")]},(0,x.tZ)(Vt.ZP,{autoHide:!0,autoHideTimeout:1e3},(0,x.tZ)(g.Z,{bordered:!1,bodyStyle:{padding:"4px 10px 0  0"}},(0,x.tZ)(ft.Z,c))))}}]),o}(v.PureComponent);(0,d.Z)(xr,"defaultProps",{showConfirm:!0,height:"82vh",width:"82vw",forceRender:!0,style:{maxWidth:"calc(100vw - 60px)",maxHeight:"calc(100vh - 50px)",padding:10},okText:"确定",cancelText:"取消"}),r(25291);var kr=r(74393),Lr=r.p+"images/time-cost-cb40d2c2.png",Cr=r.p+"images/time-prograss-44b86b36.png",Or=r.p+"images/pain-point-8f02421e.png",Sr=r.p+"images/target-13a5b4b9.png",Er=r.p+"images/development-30de07a0.png";function Pr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function jr(){jr=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function o(n,a,c,u){var s=f(t[n],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,i.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return o("throw",t,c,u)}))}u(s.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),s(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}var Ir=function(t){(0,f.Z)(i,t);var e,r,o=(e=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,p.Z)(e);if(r){var o=(0,p.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,h.Z)(this,t)});function i(){var t;(0,u.Z)(this,i);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=o.call.apply(o,[this].concat(r)),(0,d.Z)((0,l.Z)(t),"state",{}),(0,d.Z)((0,l.Z)(t),"intervals",[]),(0,d.Z)((0,l.Z)(t),"componentDidMount",(0,c.Z)(jr().mark((function t(){return jr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case 2:case"end":return t.stop()}}),t)})))),(0,d.Z)((0,l.Z)(t),"cardStyle",{height:"400px"}),(0,d.Z)((0,l.Z)(t),"carouselStyle",{background:"#fff",borderRadius:"6px"}),t}return(0,s.Z)(i,[{key:"componentWillUnmount",value:function(){if(this.intervals.length>0){var t,e=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Pr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pr(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(this.intervals);try{for(e.s();!(t=e.n()).done;){var r=t.value;clearInterval(r)}}catch(t){e.e(t)}finally{e.f()}}this.intervals=[]}},{key:"render",value:function(){var t=this.props.params;return n.Z.setProgramCode4RoutePath(t),(0,x.tZ)(v.Fragment,null,(0,x.tZ)(q.Z,{className:"home-page",gutter:{xs:8,sm:16,md:24,lg:32}},(0,x.tZ)(V.Z,{span:24},(0,x.tZ)(g.Z,{className:"hovercard"},(0,x.tZ)(q.Z,{gutter:{xs:8,sm:16,md:24,lg:32}},(0,x.tZ)(V.Z,{span:12},(0,x.tZ)(Ht.Z,{src:Or})),(0,x.tZ)(V.Z,{span:12}," ",(0,x.tZ)(Ht.Z,{src:Sr}))))),(0,x.tZ)(V.Z,{span:24},(0,x.tZ)(q.Z,{style:{minHeight:"100px"},gutter:{xs:8,sm:16,md:24,lg:32}},(0,x.tZ)(V.Z,{span:12,style:{width:"100%"}},(0,x.tZ)(A,{className:"hovercard"}),(0,x.tZ)(E,{className:"hovercard"})),(0,x.tZ)(V.Z,{span:12,style:{height:"410px"}},(0,x.tZ)(g.Z,{className:"hovercard",style:this.cardStyle,bodyStyle:{padding:"2px"}},(0,x.tZ)(kr.Z,{autoplay:!0},(0,x.tZ)("div",null,(0,x.tZ)(Ht.Z,{src:Cr})),(0,x.tZ)("div",null,(0,x.tZ)(Ht.Z,{src:Er})),(0,x.tZ)("div",null,(0,x.tZ)(Ht.Z,{src:Lr}))))))),(0,x.tZ)(V.Z,{span:24},(0,x.tZ)(q.Z,{gutter:{xs:8,sm:16,md:24,lg:32}},(0,x.tZ)(V.Z,{style:{width:"100%"}},(0,x.tZ)(g.Z,{className:"hovercard",title:"统计视图"},(0,x.tZ)(q.Z,{gutter:[{xs:8,sm:16,md:24,lg:32},{xs:8,sm:16,md:24,lg:32}]},(0,x.tZ)(V.Z,{span:16,style:{height:"400px"},id:"echart1"}),(0,x.tZ)(V.Z,{span:8,style:{height:"400px"},id:"echart2"}))))))))}}]),i}(v.Component),Rr=Jt(Ir);function _r(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Nr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_r(Object(r),!0).forEach((function(e){(0,d.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_r(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Tr(){Tr=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,o){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(o||[]);return n(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function o(n,a,c,u){var s=f(t[n],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,i.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return o("throw",t,c,u)}))}u(s.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=v,n(w,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),s(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}r(97182);var Dr=function(){function t(){(0,u.Z)(this,t)}var e,r,n;return(0,s.Z)(t,null,[{key:"post",value:(n=(0,c.Z)(Tr().mark((function t(e,r,n){var o,i,a;return Tr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(o=new FormData).append("sourceId",e),o.append("jsonEntity",JSON.stringify(r)),t.next=5,F.Z.super({url:this.url,serverKey:n,data:o,method:"POST"},"formdata",null);case 5:return i=t.sent,a=null,i?"success"===i.status&&(Ot.ZP&&(i.message?Ot.ZP.warning("保存成功! "+i.message,4):Ot.ZP.success("保存成功! ",1)),a=i.entityCode?i.entityCode:i.code):Ot.ZP&&Ot.ZP.error("保存失败"),t.abrupt("return",{code:a,status:i?i.status:"error"});case 9:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return n.apply(this,arguments)})},{key:"get",value:(r=(0,c.Z)(Tr().mark((function t(e,r,n){var o;return Tr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F.Z.super({url:this.url,serverKey:n,query:Nr({pageSize:1e3,sourceId:e},r),method:"GET"},null,null);case 2:return(o=t.sent)?"success"===o.status?(Ot.ZP&&o.message&&Ot.ZP.warning("查询成功! "+o.message,4),o.entityCode?o.entityCode:o.code):Ot.ZP.error("查询失败! "+o.message,6):Ot.ZP&&Ot.ZP.error("查询失败"),t.abrupt("return",o||{status:"error"});case 6:case"end":return t.stop()}}),t,this)}))),function(t,e,n){return r.apply(this,arguments)})},{key:"delete",value:(e=(0,c.Z)(Tr().mark((function t(e,r,n){var o;return Tr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F.Z.super({url:this.url,serverKey:n,query:{sourceId:e,codes:r},method:"DELETE"},null,null);case 2:return(o=t.sent)?"success"===o.status?(Ot.ZP&&o.message&&Ot.ZP.warning("删除成功! "+o.message,4),o.entityCode?o.entityCode:o.code):Ot.ZP.error("删除失败! "+o.message,6):Ot.ZP&&Ot.ZP.error("删除失败"),t.abrupt("return",o);case 6:case"end":return t.stop()}}),t,this)}))),function(t,r,n){return e.apply(this,arguments)})}]),t}();(0,d.Z)(Dr,"url","/v3/mstruc/data")},28520:function(t,e,r){"use strict";r.d(e,{Z:function(){return f}});var n=r(90237),o=r(65337),i=r(39576),a=r(61378),c=r(69905),u=r(67294),s=r(85932),l=r(52656);var f=function(t){(0,i.Z)(f,t);var e,r,u=(e=f,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,c.Z)(e);if(r){var o=(0,c.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,a.Z)(this,t)});function f(){return(0,n.Z)(this,f),u.apply(this,arguments)}return(0,o.Z)(f,[{key:"render",value:function(){return(0,l.tZ)(s.Z,this.props)}}]),f}(u.PureComponent)},85932:function(t,e,r){"use strict";r.d(e,{Z:function(){return S}});var n=r(32763),o=r(59755),i=r(90237),a=r(65337),c=r(95225),u=r(39576),s=r(61378),l=r(69905),f=r(15274),h=r(67294),p=r(71577),d=r(57564),v=r(24071),y=r(99160),m=r(18230),g=r(35137),w=r(53984),Z=r(49073),b=r(94716),x=r(49811),k=r(62508),L=r(31298),C=r(52656);function O(){O=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new S(n||[]);return o(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(E([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function i(o,a,c,u){var s=f(t[o],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,n.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,c,u)}),(function(t){i("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return i("throw",t,c,u)}))}u(s.arg)}var a;o(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),s(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=E,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}var S=function(t){(0,u.Z)(P,t);var e,r,n,S,E=(n=P,S=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,l.Z)(n);if(S){var r=(0,l.Z)(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return(0,s.Z)(this,t)});function P(){var t;(0,i.Z)(this,P);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=E.call.apply(E,[this].concat(r)),(0,f.Z)((0,c.Z)(t),"formRef",h.createRef()),(0,f.Z)((0,c.Z)(t),"autoSaveTimer",-1e15),(0,f.Z)((0,c.Z)(t),"autoSaveInterval",void 0),(0,f.Z)((0,c.Z)(t),"onClickBody",(function(e){t.autoSaveTimer=0})),(0,f.Z)((0,c.Z)(t),"state",{id:"modelDtmplEdit"+b.Z.getRandomNum(6),dtmplConfig:void 0,loading:!0,serial:1,dtmplData:void 0}),(0,f.Z)((0,c.Z)(t),"loadConfigData",(0,o.Z)(O().mark((function e(){var r,n,o,i,a;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.props,n=r.sourceId,r.open,o=r.code,i=r.serverKey,t.setState({loading:!0}),a=void 0,!o){e.next=9;break}return e.next=6,Z.Z.requestDtmplConfig(i,n);case 6:a=e.sent,e.next=12;break;case 9:return e.next=11,Z.Z.requestAddDtmplConfig(i,n);case 11:a=e.sent;case 12:return a.authSaveInterval&&a.authSaveInterval>0&&(t.autoSaveInterval&&clearInterval(t.autoSaveInterval),t.autoSaveInterval=setInterval((function(){t.autoSaveTimer>=a.authSaveInterval?(t.autoSaveTimer=-1e15,t.doSubmit(void 0)):t.autoSaveTimer=t.autoSaveTimer+1}),1e3)),e.next=15,t.loadData(a);case 15:t.setState({dtmplConfig:a,loading:!1});case 16:case"end":return e.stop()}}),e)})))),(0,f.Z)((0,c.Z)(t),"loadData",function(){var e=(0,o.Z)(O().mark((function e(r){var n,o,i,a,c,u,s,l,f;return O().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.props,o=n.sourceId,i=n.code,a=n.defaultDtmplData,c=n.open,u=n.serverKey,s=n.codeSource,c){e.next=3;break}return e.abrupt("return");case 3:if((l=i)||!s){e.next=8;break}return e.next=7,x.Z.queryCode(o,s,u);case 7:l=e.sent;case 8:if(!l){e.next=16;break}return t.setState({loading:!0}),e.next=12,x.Z.requestDtmplData(u,o,l,null);case 12:f=e.sent,t.setState({dtmplData:f,id:l,loading:!1}),e.next=17;break;case 16:a?t.setState({dtmplData:a,loading:!1}):t.setState({dtmplData:{code:void 0,title:void 0,fieldMap:{},arrayMap:{}},loading:!1});case 17:setTimeout((function(){return t.onValuesChange()}),300);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,f.Z)((0,c.Z)(t),"onValuesChange",(function(){t.setState({serial:t.state.serial+1})})),(0,f.Z)((0,c.Z)(t),"doSubmit",(function(e,r,n){var o=t.props.mainCode;t.formRef.current.setFieldsValue({actionId:e}),o&&t.formRef.current.setFieldsValue({mainCode:o}),n&&t.formRef.current.setFieldsValue(n),t.formRef.current.submit()})),(0,f.Z)((0,c.Z)(t),"getFooter",(function(){var e=t.props,r=e.onCancel,n=e.serverKey,o=t.state,i=(o.dtmplData,o.serial),a=[],c=t.state.dtmplConfig;return c&&c.buttons&&c.buttons.includes("dtmplSave")&&a.unshift((0,C.tZ)(p.ZP,{type:"primary",onClick:function(){return t.doSubmit()}},"保 存")),c&&c.actions.forEach((function(e,r){a.unshift((0,C.tZ)(k.Z,{serverKey:n,iconType:"icon-title",hiddenType:"disabled",serial:i,key:e.id,formRef:t.formRef,actionConfig:e,doAction:t.doSubmit}))})),a.unshift((0,C.tZ)(d.Z,{key:"back",placement:"topLeft",title:"确定要取消本次修改内容吗?",onConfirm:r,okText:"确定",cancelText:"取消"},(0,C.tZ)(p.ZP,null,"取 消"))),a})),t}return(0,a.Z)(P,[{key:"componentDidMount",value:(r=(0,o.Z)(O().mark((function t(){return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.props.open){t.next=3;break}return t.next=3,this.loadConfigData();case 3:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"componentDidUpdate",value:(e=(0,o.Z)(O().mark((function t(e){var r;return O().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.state.dtmplConfig,!e||e==this.props){t.next=9;break}if(e.sourceId==this.props.sourceId&&null!=r){t.next=7;break}return t.next=5,this.loadConfigData();case 5:t.next=9;break;case 7:return t.next=9,this.loadData(r);case 9:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){this.autoSaveInterval&&clearInterval(this.autoSaveInterval)}},{key:"render",value:function(){var t=this.props,e=t.height,r=t.onOk,n=t.onCancel,o=(t.code,t.bodyWidth,t.sourceId),i=t.open,a=t.mainCode,c=t.width,u=t.pageType,s=t.placement,l=t.maxColsOnRow,f=t.title,p=t.serverKey,d=this.state,Z=d.dtmplConfig,b=d.id,x=d.dtmplData,k=f||(Z?Z.title:"");return(0,C.tZ)(h.Fragment,null," ","modal"==u?(0,C.tZ)(v.Z,{open:i,width:c,title:k,closable:!1,bodyStyle:{height:e,overflow:"auto"},destroyOnClose:!0,centered:!0,onCancel:n,footer:this.getFooter()},(0,C.tZ)(L.ZP,{autoHide:!0,autoHideTimeout:1e3},(0,C.tZ)("div",{onClick:this.onClickBody},(0,C.tZ)(w.Z,{serverKey:p,mainCode:a,parentId:b,dtmplConfig:Z,formRef:this.formRef,sourceId:o,onFinish:r,maxColsOnRow:l,showConfirm:!1,dtmplData:x,onValuesChange:this.onValuesChange})))):"drawer"==u?(0,C.tZ)(y.Z,{title:k,placement:s,closable:!0,mask:!1,onClose:n,open:i,width:c,style:{maxWidth:1960},extra:(0,C.tZ)(m.Z,null,this.getFooter())},(0,C.tZ)(w.Z,{serverKey:p,mainCode:a,parentId:b,dtmplConfig:Z,formRef:this.formRef,sourceId:o,onFinish:r,maxColsOnRow:l,showConfirm:!1,dtmplData:x,onValuesChange:this.onValuesChange})):(0,C.tZ)(g.Z,{title:k},(0,C.tZ)(w.Z,{serverKey:p,mainCode:a,parentId:b,dtmplConfig:Z,formRef:this.formRef,sourceId:o,onFinish:r,maxColsOnRow:l,showConfirm:!1,dtmplData:x,onValuesChange:this.onValuesChange})))}}]),P}(h.PureComponent);(0,f.Z)(S,"defaultProps",{showConfirm:!0,height:"76vh",width:"76vw",bodyWidth:"100%",forceRender:!0,style:{maxWidth:"calc(100vw - 60px)",maxHeight:"calc(100vh - 50px)"},okText:"确定",cancelText:"取消",pageType:"modal",placement:"left"})},26112:function(t,e,r){"use strict";var n=r(90237),o=r(65337),i=r(95225),a=r(39576),c=r(61378),u=r(69905),s=r(15274),l=r(67294),f=r(28202),h=r(28520),p=r(52656);var d=function(t){(0,a.Z)(v,t);var e,r,d=(e=v,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,u.Z)(e);if(r){var o=(0,u.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,c.Z)(this,t)});function v(){var t;(0,n.Z)(this,v);for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return t=d.call.apply(d,[this].concat(r)),(0,s.Z)((0,i.Z)(t),"state",{showDtmplEdit:!1}),(0,s.Z)((0,i.Z)(t),"goDtmpl",(function(){t.setState({showDtmplEdit:!0})})),(0,s.Z)((0,i.Z)(t),"handleDtmplEdit",(function(e){t.setState({showDtmplEdit:!1})})),t}return(0,o.Z)(v,[{key:"render",value:function(){var t=this,e=this.state.showDtmplEdit,r=this.props,n=r.sourceId,o=r.code,i=r.mainCode,a=r.editable,c=r.serverKey,u=r.codeSource;return(0,p.tZ)(l.Fragment,null,(0,p.tZ)(f.Z,{codeSource:u,serverKey:c,goDtmpl:a?this.goDtmpl:null,sourceId:n,code:o,mainCode:i}),e?(0,p.tZ)(h.Z,{codeSource:u,serverKey:c,open:e,onCancel:function(){t.setState({showDtmplEdit:!1})},sourceId:n,code:o,onOk:this.handleDtmplEdit}):null)}}]),v}(l.PureComponent);(0,s.Z)(d,"defaultProps",{editable:!0}),e.Z=d},42638:function(t,e,r){"use strict";var n=r(32763),o=r(59755),i=r(90237),a=r(65337),c=r(95225),u=r(39576),s=r(61378),l=r(69905),f=r(15274),h=r(67294),p=r(99160),d=r(18230),v=r(71577),y=r(26112),m=r(52656);function g(){g=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new S(n||[]);return o(a,"_invoke",{value:k(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,w=m&&m(m(E([])));w&&w!==e&&r.call(w,a)&&(y=w);var Z=v.prototype=p.prototype=Object.create(y);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function i(o,a,c,u){var s=f(t[o],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,n.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,c,u)}),(function(t){i("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return i("throw",t,c,u)}))}u(s.arg)}var a;o(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=L(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function L(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,L(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=v,o(Z,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(Z),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(Z),s(Z,u,"Generator"),s(Z,a,(function(){return this})),s(Z,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=E,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}var w=function(t){(0,u.Z)(Z,t);var e,r,n,w=(r=Z,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,l.Z)(r);if(n){var o=(0,l.Z)(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return(0,s.Z)(this,t)});function Z(){var t;(0,i.Z)(this,Z);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=w.call.apply(w,[this].concat(r)),(0,f.Z)((0,c.Z)(t),"state",{}),t}return(0,a.Z)(Z,[{key:"componentDidMount",value:(e=(0,o.Z)(g().mark((function t(){return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})},{key:"render",value:function(){var t=this.props,e=t.title,r=t.sourceId,n=t.code,o=t.placement,i=t.open,a=t.onClose,c=t.width,u=t.cancelText,s=t.editable,l=t.serverKey,f=t.codeSource;return(0,m.tZ)(p.Z,{placement:o,title:(0,m.tZ)(h.Fragment,null,e),closable:!0,mask:!1,onClose:a,open:i,width:c,style:{maxWidth:"92vh"},extra:(0,m.tZ)(d.Z,null,(0,m.tZ)(v.ZP,{onClick:function(){return a()}},u))},(0,m.tZ)(y.Z,{codeSource:f,serverKey:l,editable:s,sourceId:r,code:n}))}}]),Z}(h.PureComponent);(0,f.Z)(w,"defaultProps",{height:"82vh",width:"82vw",forceRender:!0,cancelText:"关闭",placement:"left",open:!1,editable:!0}),e.Z=w},70832:function(t,e,r){"use strict";var n=r(32763),o=r(59755),i=r(90237),a=r(65337),c=r(95225),u=r(39576),s=r(61378),l=r(69905),f=r(15274),h=r(67294),p=r(94716),d=r(34363),v=r(49073),y=r(24019),m=r(85932),g=r(99160),w=r(18230),Z=r(71577),b=r(7935),x=r(52656);function k(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function L(){L=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new S(n||[]);return o(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(E([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function i(o,a,c,u){var s=f(t[o],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,n.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,c,u)}),(function(t){i("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return i("throw",t,c,u)}))}u(s.arg)}var a;o(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),s(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=E,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}var C=function(t){(0,u.Z)(S,t);var e,r,n,C,O=(n=S,C=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,l.Z)(n);if(C){var r=(0,l.Z)(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return(0,s.Z)(this,t)});function S(){var t;(0,i.Z)(this,S);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=O.call.apply(O,[this].concat(r)),(0,f.Z)((0,c.Z)(t),"state",{ltmplConfigRes:void 0,pageNo:void 0,pageSize:void 0,criteriaData:void 0,showDtmplView:!1,showDtmplEdit:!1,showDtmplCustomEdit:!1,selectedCode:void 0,showDraw:!1,ractionId:void 0,collapse:!1}),(0,f.Z)((0,c.Z)(t),"loadLtmplConfig",(0,o.Z)(L().mark((function e(){var r,n,o,i,a,c;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.props,n=r.sourceId,o=r.serverKey,e.next=3,v.Z.requestLtmplConfig(o,n);case 3:(i=e.sent)&&(c=i.ltmplConfig.defaultCriteriaValue)&&(a=t.toCriteriaData(c)),t.setState({ltmplConfigRes:i,criteriaData:a});case 6:case"end":return e.stop()}}),e)})))),(0,f.Z)((0,c.Z)(t),"toCriteriaData",(function(t){var e={};if(t)for(var r in t)e[r]=p.Z.configParamTrans(t[r]);return e.sequence=p.Z.getRandomNum(6),e})),(0,f.Z)((0,c.Z)(t),"showView",(function(e){t.setState({selectedCode:e,showDtmplView:!0})})),(0,f.Z)((0,c.Z)(t),"doEdit",(function(e,r,n){var o=t.props.doCustomEdit;n?o?o(e,r,(function(){t.doSearch(t.state.criteriaData)})):t.setState({selectedCode:e,showDtmplCustomEdit:!0}):t.setState({selectedCode:e,showDtmplEdit:!0})})),(0,f.Z)((0,c.Z)(t),"doRAction",(function(e,r){t.setState({selectedCode:r,showDraw:!0,ractionId:e})})),(0,f.Z)((0,c.Z)(t),"doCreate",(function(e){var r=t.props.doCustomCreate;e?r?r((function(){t.doSearch(t.state.criteriaData)})):t.setState({selectedCode:null,showDtmplCustomEdit:!0}):t.setState({selectedCode:null,showDtmplEdit:!0})})),(0,f.Z)((0,c.Z)(t),"closeDrawer",(function(){t.setState({showDraw:!1})})),(0,f.Z)((0,c.Z)(t),"doSearch",(function(e){var r=t.props,n=r.sourceId,o=r.mainCode,i=r.collapsible,a=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?k(Object(r),!0).forEach((function(e){(0,f.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},e);o&&(a.mainCode=o),a.sourceId=n,i&&t.setState({collapse:!1}),t.setState({criteriaData:t.toCriteriaData(a)})})),(0,f.Z)((0,c.Z)(t),"onChangePage",(function(e,r){t.setState({pageNo:e,pageSize:r})})),(0,f.Z)((0,c.Z)(t),"handleDtmplEdit",(function(e){t.doSearch(t.state.criteriaData),t.setState({showDtmplEdit:!1})})),t}return(0,a.Z)(S,[{key:"componentDidMount",value:(r=(0,o.Z)(L().mark((function t(){var e,r,n;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.loadLtmplConfig(),e=this.props,r=e.collapsible,n=e.initCollapse,r&&this.setState({collapse:n});case 3:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"componentDidUpdate",value:(e=(0,o.Z)(L().mark((function t(e){var r,n,o;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=this.props,n=r.sourceId,o=r.mainCode,e&&e.sourceId==n?o&&e.mainCode!=o&&this.loadLtmplConfig():this.loadLtmplConfig();case 2:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"render",value:function(){var t=this,e=this.state,r=e.ltmplConfigRes,n=e.criteriaData,o=e.pageSize,i=e.pageNo,a=e.showDtmplView,c=e.selectedCode,u=e.showDtmplEdit,s=e.showDtmplCustomEdit,l=e.ractionId,f=e.showDraw,p=e.collapse,v=this.props,k=v.sourceId,L=v.mainCode,C=v.showView,O=v.doSearch,E=v.doRAction,P=v.funcMode,j=v.tip,I=v.title,R=v.collapsible,_=v.initCollapse,N=v.doCustomEdit,T=v.doCustomCreate,D=v.serverKey;if(r){var A=r.ltmplConfig,F=A.buttons,G=A.customEditPagePath;return(0,x.tZ)(h.Fragment,null,(0,x.tZ)(d.Z,{tip:j,serverKey:D,pageSize:o,pageNo:i,onChangePage:this.onChangePage,collapsible:R,initCollapse:_&&p,title:I,funcMode:P,mainCode:L,showView:C||this.showView,doRAction:E||this.doRAction,doSearch:O||this.doSearch,doEdit:this.doEdit,doCreate:this.doCreate,sourceId:k,criteriaData:n,customEditable:!!N,customCreatable:!!T,ltmplConfig:r.ltmplConfig}),F.includes("detail")&&a?(0,x.tZ)(y.Z,{serverKey:D,open:a,onCancel:function(){t.setState({showDtmplView:!1})},mainCode:L,sourceId:k,code:c}," "):"",(F.includes("dtmplEdit")||F.includes("dtmplAdd"))&&u?(0,x.tZ)(m.Z,{serverKey:D,open:u,onCancel:function(){t.setState({showDtmplEdit:!1})},sourceId:k,mainCode:L,code:c,onOk:this.handleDtmplEdit}):"",s?(0,x.tZ)(b.Z,{serverKey:D,open:s,onOk:function(){t.doSearch(t.state.criteriaData),t.setState({showDtmplCustomEdit:!1})},customPath:G,sourceId:k,mainCode:L,code:c}):"",(0,x.tZ)(g.Z,{placement:"left",title:"关联查询",closable:!0,mask:!1,onClose:this.closeDrawer,open:f,width:"calc(100% - 280px)",style:{maxWidth:1960},extra:(0,x.tZ)(w.Z,null,(0,x.tZ)(Z.ZP,{onClick:this.closeDrawer},"关闭"))},(0,x.tZ)(S,{serverKey:D,sourceId:l,mainCode:c})))}return(0,x.tZ)(h.Fragment,null)}}]),S}(h.PureComponent);(0,f.Z)(C,"defaultProps",{collapsible:!1,initCollapse:!1}),e.Z=C},34363:function(t,e,r){"use strict";r.d(e,{Z:function(){return Bt}});var n=r(32763),o=r(1252),i=r(59755),a=r(90237),c=r(65337),u=r(95225),s=r(39576),l=r(61378),f=r(69905),h=r(15274),p=r(67294),d=r(18430),v=r(53807),y=r(71577),m=r(18230),g=r(57564),w=r(55241),Z=r(9676),b=r(71230),x=r(15746),k=r(35137),L=r(16046),C=r(65460),O=r(42762),S=r(55287),E=r(10038),P=r(76880),j=r(68145),I=r(47389),R=r(54977),_=r(85175),N=r(82061),T=r(40110),D=r(51042),A=r(1977),F=r(84391),G=r(69753),M=r(3682),B=r(25240),K=r(20574),q=r(92570),V=r(59879),H=r(49192),Y=r(15128),z=r(49811),U=r(16739),W=r(87200),Q=r(25291),$=r(94716),J=r(95742),X=r(62748),tt=r(52656);function et(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return rt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function rt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var nt=(0,J.W8)((function(t){var e=t.value,r=t.index,n=t.disabledColIds;return(0,tt.tZ)(x.Z,{key:r,span:24},(0,tt.tZ)(Z.Z,{disabled:n.includes(e.id),value:e.id},(0,tt.tZ)(ot,null)," ",e.title))})),ot=(0,J.W6)((function(){return(0,tt.tZ)(O.Z,{style:{cursor:"grab",color:"#999"}})})),it=(0,J.JN)((function(t){var e=t.items,r=t.selected,n=t.onChange,o=t.disabledColIds;return(0,tt.tZ)(Z.Z.Group,{value:r,onChange:n},(0,tt.tZ)(b.Z,{style:{width:"148px"}},e.map((function(t,e){return(0,tt.tZ)(nt,{key:"item-".concat(t.id),index:e,value:t,disabledColIds:o})}))))})),at=function(t){(0,s.Z)(o,t);var e,r,n=(e=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,f.Z)(e);if(r){var o=(0,f.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,l.Z)(this,t)});function o(){var t;(0,a.Z)(this,o);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return t=n.call.apply(n,[this].concat(r)),(0,h.Z)((0,u.Z)(t),"onChange",(function(e){var r,n=t.props,o=n.onChangeHiddenCols,i=n.columns,a=n.ignoredColIds,c=[],u=et(i);try{for(u.s();!(r=u.n()).done;){var s=r.value;0==e.length||e.includes(s.id)||a.includes(s.id)||c.push(s.id)}}catch(t){u.e(t)}finally{u.f()}o(c)})),(0,h.Z)((0,u.Z)(t),"onSortEnd",(function(e){var r=e.oldIndex,n=e.newIndex,o=t.props,i=o.columns,a=o.onChangeColSort;r!==n&&a((0,X.q)([].concat(i),r,n).filter((function(t){return!!t})))})),t}return(0,c.Z)(o,[{key:"render",value:function(){var t=this.props,e=t.hiddenColIds,r=t.columns,n=t.disabledColIds,o=[];if(r){var i,a=et(r);try{for(a.s();!(i=a.n()).done;){var c=i.value;e&&e.includes(c.id)||o.push(c.id)}}catch(t){a.e(t)}finally{a.f()}}return(0,tt.tZ)(it,{disabledColIds:n,helperClass:"row-dragging",items:r,selected:o,onChange:this.onChange,onSortEnd:this.onSortEnd})}}]),o}(p.PureComponent);(0,h.Z)(at,"defaultProps",{ignoredColIds:[]});var ct=at,ut=r(16117),st=r(35697),lt=r(98879),ft=r(38763);var ht=ut.ZP.Group,pt=function(t){(0,s.Z)(o,t);var e,r,n=(e=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,f.Z)(e);if(r){var o=(0,f.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,l.Z)(this,t)});function o(){var t;(0,a.Z)(this,o);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return t=n.call.apply(n,[this].concat(r)),(0,h.Z)((0,u.Z)(t),"state",{interrupted:!1,disabledPageNoInput:!1,disabledCurrentPageRadio:!1,disabledAllPageRadio:!1,exportId:void 0,startPageNo:1,endPageNo:10,exportMode:"all",percent:0,exportStatus:"ready",exportingMsg:""}),(0,h.Z)((0,u.Z)(t),"onChangeRadio",(function(e){t.setState({exportMode:e.target.value,startPageNo:1,endPageNo:10})})),(0,h.Z)((0,u.Z)(t),"timerID",void 0),(0,h.Z)((0,u.Z)(t),"setInerval",(function(e){t.timerID&&clearInterval(t.timerID),t.timerID=e})),(0,h.Z)((0,u.Z)(t),"handleStart",(function(){var e=t.props,r=e.queryKey,n=e.currentPage,o=(e.title,e.serverKey),i=t.state,a=i.startPageNo,c=i.endPageNo,u=i.exportMode;t.setState({exportStatus:"ready"}),ft.Z.super({url:"/v3/ltmp/data/exporter",serverKey:o,method:"GET",query:{scope:u,withDetail:!1,queryKey:r.key,startPageNo:"all"==u?a:n.pageNo,endPageNo:"all"==u?c:n.pageNo}}).then((function(e){e.exportId?(t.setState({exportId:e.exportId,exportStatus:"exporting"}),t.statusOut(e.exportId),t.setInerval(setInterval((function(){return t.statusOut(e.exportId)}),2e3))):t.setState({exportStatus:"fail"})}))})),(0,h.Z)((0,u.Z)(t),"statusOut",(function(e){var r=t.props.serverKey,n=t.state.exportStatus;ft.Z.super({url:"/v3/exporter/status",serverKey:r,query:{interrupted:"stop"==n,exportId:e},method:"GET"},"","none").then((function(e){"error"==e.status?(clearInterval(t.timerID),console.log(e.statusMsg,t.timerID),t.setState({exportingMsg:e.statusMsg,exportStatus:"stop",percent:0})):e.breaked?(clearInterval(t.timerID),t.setState({exportingMsg:"已终止",exportStatus:"stop",percent:0})):t.setState({exportingMsg:e.statusMsg,percent:Math.floor(e.current/e.totalCount*100)}),"stop"==n&&clearInterval(t.timerID),!0===e.completed&&(clearInterval(t.timerID),t.setState({exportStatus:"success",exportingMsg:e.statusMsg,percent:Math.floor(e.current/e.totalCount*100)}))}))})),(0,h.Z)((0,u.Z)(t),"download",(function(){var e=t.props,r=e.title,n=e.serverKey,o=t.state.exportId,i=$.Z.hydrocarbonToken();$.Z.downloadFile($.Z.joinPath($.Z.api(n),"/v3/exporter/excel?exportId=".concat(o,"&@token=").concat(i,"&@programToken=").concat($.Z.programCode(n))),r)})),(0,h.Z)((0,u.Z)(t),"handleCancel",(function(){t.setState({percent:0,exportStatus:"stop",exportId:void 0})})),t}return(0,c.Z)(o,[{key:"componentWillUnmount",value:function(){console.log("销毁")}},{key:"render",value:function(){var t=this,e=this.props,r=e.defaultExportMode,n=e.currentPage,o=this.state,i=o.startPageNo,a=o.endPageNo,c=o.disabledPageNoInput,u=o.exportMode,s=o.exportStatus,l=o.percent,f=o.exportingMsg;return(0,tt.tZ)("div",{style:{width:"400px"},className:"exportFrame"},n?(0,tt.tZ)(p.Fragment,null,(0,tt.tZ)(ht,{onChange:this.onChangeRadio,value:u,defaultValue:r},(0,tt.tZ)(ut.ZP,{value:"current",disabled:"exporting"==s},"导出当前页"),(0,tt.tZ)(ut.ZP,{value:"all",disabled:"exporting"==s},"导出所有")),(0,tt.tZ)(C.Z,null)):"","all"==u?(0,tt.tZ)("div",null,"页号：",(0,tt.tZ)(st.Z,{min:1,value:i,placeholder:"开始页号",onChange:function(e){return t.setState({startPageNo:e})},disabled:c}),"-",(0,tt.tZ)(st.Z,{min:1,value:a,placeholder:"结束页号",onChange:function(e){return t.setState({endPageNo:e})},disabled:c}),(0,tt.tZ)(C.Z,null)):"",(0,tt.tZ)("div",null,"ready"==s?(0,tt.tZ)(y.ZP,{type:"primary",onClick:this.handleStart},"开始导出"):"exporting"==s?(0,tt.tZ)(y.ZP,{onClick:this.handleCancel},"取消导出"):(0,tt.tZ)(y.ZP,{onClick:this.handleStart},"重新导出"),"success"==s?(0,tt.tZ)(y.ZP,{type:"primary",style:{marginLeft:10},disabled:"success"!=s,onClick:this.download},"下载文件"):"",l>0?(0,tt.tZ)(lt.Z,{percent:l,size:"small",status:"active"}):"",(0,tt.tZ)("p",null,f)))}}]),o}(p.PureComponent);(0,h.Z)(pt,"defaultProps",{defaultExportMode:"all"});var dt=r(92801),vt=r(49073);function yt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function mt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?yt(Object(r),!0).forEach((function(e){(0,h.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function gt(){gt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(n||[]);return o(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function i(o,a,c,u){var s=f(t[o],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,n.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,c,u)}),(function(t){i("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return i("throw",t,c,u)}))}u(s.arg)}var a;o(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),s(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}var wt=function(t){(0,s.Z)(d,t);var e,r,n,o,p=(n=d,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,f.Z)(n);if(o){var r=(0,f.Z)(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return(0,l.Z)(this,t)});function d(){var t;(0,a.Z)(this,d);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=p.call.apply(p,[this].concat(r)),(0,h.Z)((0,u.Z)(t),"state",{pageNo:void 0,pageSize:void 0,ltmplConfigRes:void 0,criteriaData:{}}),(0,h.Z)((0,u.Z)(t),"loadData",function(){var e=(0,i.Z)(gt().mark((function e(r){var n,o,i,a;return gt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props,o=n.sourceId,i=n.serverKey,e.next=3,vt.Z.requestL2LtmplConfig(i,o);case 3:a=e.sent,t.setState({ltmplConfigRes:a,criteriaData:r});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,h.Z)((0,u.Z)(t),"doSearch",(function(e){var r=t.props,n=r.sourceId,o=r.innerQueryKey,i=mt({},e);(0,dt.Z)(t.state),i.innerQueryKey=o,i.sourceId=n,t.setState({criteriaData:i})})),(0,h.Z)((0,u.Z)(t),"onChangePage",(function(e,r){t.setState({pageNo:e,pageSize:r})})),t}return(0,c.Z)(d,[{key:"componentDidMount",value:(r=(0,i.Z)(gt().mark((function t(){var e,r,n,o;return gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.state.criteriaData,r=this.props,n=r.sourceId,o=r.innerQueryKey,e.innerQueryKey=o,e.sourceId=n,this.loadData(e);case 5:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"componentDidUpdate",value:(e=(0,i.Z)(gt().mark((function t(e){var r,n,o,i,a,c,u,s;return gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=this.props,n=r.sourceId,o=r.innerQueryKey,i=e.sourceId,a=e.innerQueryKey,c=this.state.criteriaData,n&&n!=i?((u={}).innerQueryKey=o,u.sourceId=n,this.loadData(u)):o!=a&&((s=mt({},c)).innerQueryKey=o,this.setState({criteriaData:s}));case 4:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"render",value:function(){var t=this.state,e=t.ltmplConfigRes,r=t.criteriaData,n=t.pageNo,o=t.pageSize,i=this.props,a=i.sourceId,c=i.serverKey;return e?(0,tt.tZ)(Bt,{serverKey:c,pageSize:o,pageNo:n,onChangePage:this.onChangePage,doSearch:this.doSearch,level:"l2",criteriaData:r,sourceId:a,ltmplConfig:e.ltmplConfig}):""}}]),d}(p.PureComponent),Zt=wt,bt=r(62508),xt=r(45532),kt=r(28508),Lt=r(85369),Ct=r(69165);function Ot(){Ot=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(n||[]);return o(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function i(o,a,c,u){var s=f(t[o],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,n.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,c,u)}),(function(t){i("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return i("throw",t,c,u)}))}u(s.arg)}var a;o(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),s(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}var St=function(t){(0,s.Z)(o,t);var e,r,n=(e=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,f.Z)(e);if(r){var o=(0,f.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,l.Z)(this,t)});function o(){var t;(0,a.Z)(this,o);for(var e=arguments.length,r=new Array(e),c=0;c<e;c++)r[c]=arguments[c];return t=n.call.apply(n,[this].concat(r)),(0,h.Z)((0,u.Z)(t),"state",{popoverOpen:!1,loading:!1}),(0,h.Z)((0,u.Z)(t),"formRef",p.createRef()),(0,h.Z)((0,u.Z)(t),"onRestat",function(){var e=(0,i.Z)(Ot().mark((function e(r){var n,o,i,a;return Ot().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props,o=n.sourceId,i=n.onfinish,a=n.serverKey,t.setState({loading:!0}),e.next=4,z.Z.increCalc(a,o,r);case 4:t.setState({loading:!1}),i();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t}return(0,c.Z)(o,[{key:"render",value:function(){var t=this,e=this.state,r=e.popoverOpen,n=e.loading,o=this.props,i=o.fields,a=o.value,c=o.serverKey;return(0,tt.tZ)(w.Z,{open:r,content:(0,tt.tZ)(k.Z,{loading:n,style:{width:1e3},title:"重新统计",bodyStyle:{overflow:"auto"},extra:(0,tt.tZ)(p.Fragment,null,(0,tt.tZ)(m.Z,{size:[8,0]},(0,tt.tZ)(y.ZP,{type:"primary",onClick:function(){t.formRef.current.submit()}},"确定"),(0,tt.tZ)(y.ZP,{onClick:function(){t.setState({popoverOpen:!1})}},(0,tt.tZ)(kt.Z,null))))},(0,tt.tZ)(xt.Z,{labelWrap:!0,ref:this.formRef,name:"control-hooks",onFinish:this.onRestat},(0,tt.tZ)(Ct.Z,{serverKey:c,nameAttr:"id",fields:i,valueMap:a}))),placement:"bottomLeft",trigger:"click"},(0,tt.tZ)(v.Z,{title:"重新统计"},(0,tt.tZ)(y.ZP,{onClick:function(){t.setState({popoverOpen:!r})}},(0,tt.tZ)(Lt.Z,null))))}}]),o}(p.PureComponent);(0,h.Z)(St,"defaultProps",{});var Et=St,Pt=r(93378),jt=r(74499),It=r(41307),Rt=r(45136);function _t(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Nt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Nt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Nt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Tt(){Tt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(n||[]);return o(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function i(o,a,c,u){var s=f(t[o],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,n.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,c,u)}),(function(t){i("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return i("throw",t,c,u)}))}u(s.arg)}var a;o(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),s(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function Dt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function At(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Dt(Object(r),!0).forEach((function(e){(0,h.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Dt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Ft=(0,J.W6)((function(){return(0,tt.tZ)(O.Z,{style:{cursor:"grab",color:"#999"}})})),Gt=(d.Z.Panel,["20000","10000"]),Mt=function(t){(0,s.Z)(J,t);var e,r,n,d,O=(n=J,d=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,f.Z)(n);if(d){var r=(0,f.Z)(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return(0,l.Z)(this,t)});function J(){var t;(0,a.Z)(this,J);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=O.call.apply(O,[this].concat(r)),(0,h.Z)((0,u.Z)(t),"state",{sortedColConfigs:void 0,queryKey:void 0,loading:!0,disableCols:void 0,hiddenColIds:Gt,selectedRows:[],selectedDatas:[],hiddenRowCodes:[],viewModels:[],drillingColIds:void 0,disabledColIds:void 0,showL2ActTable:!1,showL2Chart:!1}),(0,h.Z)((0,u.Z)(t),"loadData",function(){var e=(0,i.Z)(Tt().mark((function e(r,n,i){var a,c,u,s,l,f,h,p,d,v,y,m,g,w,Z;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.props,c=a.sourceId,u=a.criteriaData,s=a.ltmplConfig,l=a.mainCode,f=a.level,h=a.pageNo,p=a.pageSize,d=a.serverKey,s){e.next=3;break}return e.abrupt("return");case 3:if(t.setState({loading:!0}),v=[],y=(0,o.Z)(r),u&&u.drillingColIds&&(m=(0,o.Z)(u.drillingColIds),s.columns.forEach((function(t){"dimension"!=t.statColType||m.includes(t.id)||y.includes(t.id)||(y.push(t.id),v.push(t.id)),"dimension"!=t.statColType||m.includes(t.id)||v.includes(t.id)||v.push(t.id)})),y=y.filter((function(t){return!m.includes(t)}))),g=s.defaultPageSize,w={pageNo:h||1,pageSize:p||g||10,virtualEndPageNo:void 0},!f||"l2"!=f){e.next=15;break}return e.next=12,z.Z.requestL2LtmplQueryKey(d,c,At(At(At({},u),w),{},{mainCode:l}));case 12:Z=e.sent,e.next=18;break;case 15:return e.next=17,z.Z.requestLtmplQueryKey(d,c,At(At(At({},u),w),{},{mainCode:l}));case 17:Z=e.sent;case 18:t.setState({disabledColIds:v,hiddenColIds:y,hiddenRowCodes:n,sortedColConfigs:i,queryKey:Z,loading:!1,showL2Chart:!1,selectedRows:[],selectedDatas:[],viewModels:t.state.viewModels.length>0?t.state.viewModels:["table"]});case 19:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()),(0,h.Z)((0,u.Z)(t),"buildTableColumns",(function(e,r,n,o){var i=t.props,a=i.showView,c=i.doEdit,u=i.doRAction,s=i.customEditable,l=i.serverKey,f=e.buttons,h=[],d=0;return(o||e.columns).forEach((function(o){var i={};r&&r.includes(o.id)||h.push(i),i.title=o.title,i.dataIndex=o.id,d++;var w=Y.Z.getSupportControlType(o);d<10&&"操作"!=o.title&&"序号"!=o.title&&r.includes("10000")&&H.Z.sort(i,w),"序号"===o.title?(i.render=function(t,e,r){return(0,tt.tZ)("label",null,r+1)},o.sorter=void 0):"10000"==o.id?(i.title=(0,tt.tZ)(v.Z,{title:"拖拽排序"},o.title),i.width=30,i.dataIndex=o.id,i.className="drag-visible",i.render=function(){return(0,tt.tZ)(Ft,null)}):"20000"==o.id?(i.align="center",i.width=14,i.title=(0,tt.tZ)(p.Fragment,null,n.length>0?(0,tt.tZ)(v.Z,{title:"取消隐藏"},(0,tt.tZ)(y.ZP,{style:{marginRight:"0px"},size:"small",shape:"circle",icon:(0,tt.tZ)(S.Z,null),type:"text",onClick:function(){return t.unHiden()}})):""),i.render=function(e,r){return(0,tt.tZ)(v.Z,{title:"隐藏"}," ",(0,tt.tZ)(y.ZP,{style:{marginRight:"0px"},icon:(0,tt.tZ)(E.Z,null),type:"dashed",size:"small",onClick:function(){return t.onHide(r.code)}}))}):"操作"===o.title?(i.fixed="right",i.align="center",i.className="opsColumn",i.title=(0,tt.tZ)(p.Fragment,null,"操 作"),i.render=function(r,n){return(0,tt.tZ)(m.Z,{size:[0,4],wrap:!0},f.includes("detail")&&a?(0,tt.tZ)(y.ZP,{size:"small",type:"primary",icon:(0,tt.tZ)(P.Z,null),onClick:function(){return a(n.code)}}):"",f.includes("customDetail")&&a?(0,tt.tZ)(y.ZP,{size:"small",type:"primary",icon:(0,tt.tZ)(j.Z,null),onClick:function(){return a(n.code,!0)}}):"",f.includes("dtmplEdit")&&c&&(!e.editAction||Pt.Z.isShow(e.editAction,[n],void 0))?(0,tt.tZ)(y.ZP,{size:"small",type:"dashed",icon:(0,tt.tZ)(I.Z,null),onClick:function(){return c(n.code,"update")}}):"",!f.includes("dtmplCustomEdit")&&!s||!c||e.editAction&&!Pt.Z.isShow(e.editAction,[n],void 0)?"":(0,tt.tZ)(y.ZP,{size:"small",type:"dashed",icon:(0,tt.tZ)(R.Z,null),onClick:function(){return c(n.code,"update",!0)}}),f.includes("copy")&&c?(0,tt.tZ)(v.Z,{title:"复制"},(0,tt.tZ)(y.ZP,{size:"small",type:"dashed",icon:(0,tt.tZ)(_.Z,null),onClick:function(){return c(n.code,"copy")}})):"",e.ractions?e.ractions.map((function(t){return(0,tt.tZ)(y.ZP,{key:t.id,size:"small",type:"dashed",onClick:function(){return u(t.id,n.code)}},t.title)})):"",e.rowActions&&e.rowActions.length>0?e.rowActions.map((function(e){return(0,tt.tZ)(bt.Z,{serverKey:l,iconType:"icon",key:e.id,data:[n],actionConfig:e,doAction:t.doRowAction,buttonSize:"small",serial:1})})):"",e.rowJumps&&e.rowJumps.length>0?e.rowJumps.map((function(e){return(0,tt.tZ)(y.ZP,{key:e.id,size:"small",type:"dashed",onClick:function(){return t.doRowJump(e,n)}},e.title)})):"",e.rowCQuerys&&e.rowCQuerys.length>0?e.rowCQuerys.map((function(t){return(0,tt.tZ)(jt.Z,{serverKey:l,key:t.id,size:"small",pageType:"drawer",cQueryConfig:t,mainCode:t.mainCodeColId?n[t.mainCodeColId]:n.code})})):"",!f.includes("singleDelete")||e.deleteAction&&!Pt.Z.isShow(e.deleteAction,[n],void 0)?"":(0,tt.tZ)(g.Z,{placement:"rightBottom",title:"确定要【删除】此数据吗？",onConfirm:function(){t.doDeleteByCode(n.code)},okText:"确定",cancelText:"取消",okType:"danger"},(0,tt.tZ)(y.ZP,{size:"small",type:"dashed",danger:!0},(0,tt.tZ)(N.Z,null))))}):(i.className="opsColumn",i.render=function(t,e){return(0,tt.tZ)(Q.Z,{serverKey:l,fieldConfig:o,value:e[o.id],holderType:"table"})})})),h})),(0,h.Z)((0,u.Z)(t),"handleShowChart",(function(){t.setState({showL2Chart:!t.state.showL2Chart})})),(0,h.Z)((0,u.Z)(t),"handleDataAnalysis",(function(){t.setState({showL2ActTable:!t.state.showL2ActTable})})),(0,h.Z)((0,u.Z)(t),"unHiden",(function(){t.props.ltmplConfig;var e=t.state;e.hiddenColIds,e.sortedColConfigs,t.setState({hiddenRowCodes:[]})})),(0,h.Z)((0,u.Z)(t),"onHide",(function(e){t.props.ltmplConfig;var r=t.state,n=r.hiddenRowCodes,i=(r.hiddenColIds,r.sortedColConfigs,[].concat((0,o.Z)(n),[e]));t.setState({hiddenRowCodes:i})})),(0,h.Z)((0,u.Z)(t),"changeViewModel",(function(e){t.setState({viewModels:e})})),(0,h.Z)((0,u.Z)(t),"changeHiddenColumns",(function(e){t.props.ltmplConfig;var r=t.state;r.hiddenRowCodes,r.sortedColConfigs,t.setState({showL2Chart:!1,hiddenColIds:e})})),(0,h.Z)((0,u.Z)(t),"doSelectedAction",function(){var e=(0,i.Z)(Tt().mark((function e(r,n,o){var i;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.state.selectedRows,t.doAction(r,i,o);case 2:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()),(0,h.Z)((0,u.Z)(t),"doAction",function(){var e=(0,i.Z)(Tt().mark((function e(r,n,o){var i,a,c,u,s;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.props.serverKey,a=t.state,c=a.hiddenColIds,u=a.hiddenRowCodes,s=a.sortedColConfigs,t.setState({loading:!0}),e.next=5,z.Z.postActions(i,r,n,o);case 5:e.sent?t.loadData(c,u,s):t.setState({loading:!1});case 7:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()),(0,h.Z)((0,u.Z)(t),"doRowAction",function(){var e=(0,i.Z)(Tt().mark((function e(r,n,o){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.doAction(r,[{title:void 0,code:n[0]}],o);case 1:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()),(0,h.Z)((0,u.Z)(t),"doDelete",(0,i.Z)(Tt().mark((function e(){var r,n,o,i,a,c,u,s;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.props,n=r.sourceId,o=r.serverKey,i=t.state,a=i.selectedRows,c=i.hiddenColIds,u=i.hiddenRowCodes,s=i.sortedColConfigs,t.setState({loading:!0}),e.next=5,z.Z.deleteData(o,n,a);case 5:e.sent?t.loadData(c,u,s):t.setState({loading:!1});case 7:case"end":return e.stop()}}),e)})))),(0,h.Z)((0,u.Z)(t),"doDeleteByCode",function(){var e=(0,i.Z)(Tt().mark((function e(r){var n,o,i,a,c,u,s;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props,o=n.sourceId,i=n.serverKey,a=t.state,c=a.hiddenColIds,u=a.hiddenRowCodes,s=a.sortedColConfigs,t.setState({loading:!0}),e.next=5,z.Z.deleteByCode(i,o,[r]);case 5:e.sent?t.loadData(c,u,s):t.setState({loading:!1});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,h.Z)((0,u.Z)(t),"doSelectedCQuery",function(){var t=(0,i.Z)(Tt().mark((function t(e){return Tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),(0,h.Z)((0,u.Z)(t),"doJump",function(){var t=(0,i.Z)(Tt().mark((function t(e,r){var n,o,i,a,c,u,s,l,f,h,p,d,v,y,m;return Tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.fieldMap?r.fieldMap:r,o=null,(i=e.path)||(i="/"),0==i.indexOf("http://")||0==i.indexOf("HTTP://")||0==i.indexOf("https://")||0==i.indexOf("HTTPS://")?(o=i.split("//")[0]+"//",i=i.split("//")[1]):o=new URL(window.location.href).pathname,a=i.split("/"),!(c=e.routeParams)){t.next=36;break}u=0;case 9:if(!(u<a.length)){t.next=33;break}if(0!=a[u].indexOf(":")){t.next=30;break}s=a[u].substring(1),l=_t(c),t.prev=13,l.s();case 15:if((f=l.n()).done){t.next=22;break}if(!(h=f.value)||s!=h.title){t.next=20;break}return a[u]=n[h.id]?n[h.id]:h.defaultValue,t.abrupt("break",22);case 20:t.next=15;break;case 22:t.next=27;break;case 24:t.prev=24,t.t0=t.catch(13),l.e(t.t0);case 27:return t.prev=27,l.f(),t.finish(27);case 30:u++,t.next=9;break;case 33:o=$.Z.joinPath(o,a.join("/")),t.next=37;break;case 36:o=$.Z.joinPath(o,i);case 37:if(p=e.searchParams,d=[],e.tokenName&&(d[0]=e.tokenName+"="+$.Z.hydrocarbonToken()),p)for(v=d.length,y=0;y<p.length;y++)m=p[y],d[v+y]=m.title+"="+(n[m.id]?n[m.id]:m.defaultValue);d.length>0&&(o.indexOf("?")!=o.length-1&&(o+="?"),o+=d.join("&")),window.open(o);case 43:case"end":return t.stop()}}),t,null,[[13,24,27,30]])})));return function(e,r){return t.apply(this,arguments)}}()),(0,h.Z)((0,u.Z)(t),"doRowJump",function(){var e=(0,i.Z)(Tt().mark((function e(r,n){return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.doJump(r,n);case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),(0,h.Z)((0,u.Z)(t),"doSelectedJump",function(){var e=(0,i.Z)(Tt().mark((function e(r){var n;return Tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:1==(n=t.state.selectedDatas).length&&t.doJump(r,n[0]);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,h.Z)((0,u.Z)(t),"changeRowSelection",(function(e,r){t.setState({selectedRows:e,selectedDatas:r})})),(0,h.Z)((0,u.Z)(t),"onChangeColSort",(function(e){t.props.ltmplConfig;var r=t.state;r.hiddenRowCodes,r.hiddenColIds,t.setState({sortedColConfigs:e})})),(0,h.Z)((0,u.Z)(t),"renderHeaderButtons",(function(){var e=t.state,r=e.hiddenColIds,n=e.queryKey,o=e.viewModels,i=e.sortedColConfigs,a=e.disabledColIds,c=e.showL2Chart,u=e.showL2ActTable,s=t.props,l=s.ltmplConfig,f=s.sourceId,h=s.doCreate,d=s.doSearch,m=s.menuId,g=s.funcMode,k=s.customCreatable,L=s.serverKey,C=l.buttons;return(0,tt.tZ)(p.Fragment,null,"common"==g&&t.criteriaFormUseful()?(0,tt.tZ)(w.Z,{trigger:"click",content:t.renderCriteriaForm()},(0,tt.tZ)(y.ZP,null,(0,tt.tZ)(T.Z,null))):null,C.includes("dtmplAdd")&&h?(0,tt.tZ)(v.Z,{title:"创建"},(0,tt.tZ)(y.ZP,{onClick:function(){return h()}},(0,tt.tZ)(D.Z,null))," "):"",(C.includes("dtmplCustomAdd")||k)&&h?(0,tt.tZ)(v.Z,{title:"创建"},(0,tt.tZ)(y.ZP,{onClick:function(){return h(!0)}},(0,tt.tZ)(A.Z,null))," "):"",C.includes("importLtmplExcel")?(0,tt.tZ)(v.Z,{title:"导入"}," ",(0,tt.tZ)(y.ZP,{href:"#/".concat(f,"/importer?menuId=").concat(m),target:"_blank"},(0,tt.tZ)(F.Z,null))):"",(0,tt.tZ)(w.Z,{content:(0,tt.tZ)(pt,{serverKey:L,queryKey:n,title:l.title}),title:"导出",placement:"bottomRight",trigger:"click"},(0,tt.tZ)(v.Z,{title:"导出"},(0,tt.tZ)(y.ZP,{style:{display:C.includes("exportLtmplExcel")?"inline":"none",marginLeft:"5px"}},(0,tt.tZ)(G.Z,null)))),C.includes("showChart")?(0,tt.tZ)(v.Z,{title:c?"隐藏图表":"展示图表"},(0,tt.tZ)(y.ZP,{onClick:t.handleShowChart},(0,tt.tZ)(M.Z,null))):"",C.includes("analysis")?(0,tt.tZ)(v.Z,{title:u?"隐藏数据分析":"展示数据分析"},(0,tt.tZ)(y.ZP,{onClick:t.handleDataAnalysis},(0,tt.tZ)(B.Z,null))):"",C.includes("reStat")?(0,tt.tZ)(Et,{serverKey:L,fields:l.reStatParams,sourceId:f,onfinish:function(){return d(null)}}):"",(0,tt.tZ)(w.Z,{content:(0,tt.tZ)(Z.Z.Group,{value:o,onChange:t.changeViewModel},(0,tt.tZ)(b.Z,{style:{width:"120px"}},(0,tt.tZ)(x.Z,{span:24},(0,tt.tZ)(Z.Z,{value:"table"},"表格")),(0,tt.tZ)(x.Z,{span:24},(0,tt.tZ)(Z.Z,{value:"verticalList"},"纵向列表")))),title:"视图",placement:"bottomRight",trigger:"click"},(0,tt.tZ)(v.Z,{title:"选择视图"},(0,tt.tZ)(y.ZP,null,(0,tt.tZ)(K.Z,null)))),(0,tt.tZ)(w.Z,{content:(0,tt.tZ)(ct,{columns:i,disabledColIds:a,hiddenColIds:r,onChangeColSort:t.onChangeColSort,onChangeHiddenCols:t.changeHiddenColumns}),title:"排序和选择列",placement:"bottomRight",trigger:"click"},(0,tt.tZ)(v.Z,{title:"点击排序和选择列"},(0,tt.tZ)(y.ZP,null,(0,tt.tZ)(q.Z,null)))),d?(0,tt.tZ)(y.ZP,{className:"hoverbig",title:"刷新",onClick:function(){d(null)}},(0,tt.tZ)(V.Z,null)):"")})),(0,h.Z)((0,u.Z)(t),"criteriaFormUseful",(function(){var e=t.props.ltmplConfig,r=e.buttons,n=e.criterias;return!!(r.includes("query")&&(n&&n.length>0||r.includes("drilling"))||t.checkBoxUseful())})),(0,h.Z)((0,u.Z)(t),"checkBoxUseful",(function(){var e=t.props.ltmplConfig,r=e.buttons,n=e.jumps,o=e.actions;return!!(r.includes("batchDelete")||o&&o.length>0||n&&n.length>0)})),(0,h.Z)((0,u.Z)(t),"renderCriteriaForm",(function(){var e=t.state,r=e.loading,n=e.selectedRows,o=e.selectedDatas,i=t.props,a=i.ltmplConfig,c=i.doSearch,u=i.criteriaData,s=i.serverKey;return(0,tt.tZ)(W.Z,{serverKey:s,loading:r,selectedDatas:o,selectedRows:n,ltmplConfig:a,data:u,doCQuery:t.doSelectedCQuery,doAction:t.doSelectedAction,doDelete:t.doDelete,doJump:t.doSelectedJump,doSearch:c})})),(0,h.Z)((0,u.Z)(t),"renderContent",(function(){var e=t.state,r=e.queryKey,n=e.loading,o=e.selectedRows,i=e.hiddenRowCodes,a=e.viewModels,c=e.sortedColConfigs,u=e.hiddenColIds,s=e.showL2ActTable,l=t.props,f=l.sourceId,h=l.ltmplConfig,d=l.funcMode,v=l.title,y=l.collapsible,m=l.pageSize,g=l.pageNo,w=l.onChangePage,Z=l.serverKey;if(!h||!f)return(0,tt.tZ)(p.Fragment,null,(0,tt.tZ)(k.Z,{loading:n}),(0,tt.tZ)(L.Z,{loading:n}));var b=t.buildTableColumns(h,u,i,c),x=h.buttons,O=!1;"simple"==d||"common"==d?O=!1:t.criteriaFormUseful()&&(O=!0);var S=[];if(c){var E,P=_t(c);try{for(P.s();!(E=P.n()).done;){var j=E.value;u.includes(j.id)||S.push(j)}}catch(t){P.e(t)}finally{P.f()}}return(0,tt.tZ)(p.Fragment,null,x.includes("analysis")&&s?(0,tt.tZ)("div",null,(0,tt.tZ)(Zt,{serverKey:Z,innerQueryKey:r.key,sourceId:f}),(0,tt.tZ)(C.Z,{dashed:!0,style:{borderTopColor:"#40a9ff"},plain:!0})):"",(0,tt.tZ)("div",{className:"actTable"},"complete"==d||"common"==d?y?null:(0,tt.tZ)("span",null,h.header?(0,tt.tZ)("div",{style:{padding:"6px"},dangerouslySetInnerHTML:{__html:h.header}}):null,(0,tt.tZ)("h3",null,"  ",v||h.title,(0,tt.tZ)("p",{className:"fr"},t.renderHeaderButtons()))):null,O?t.renderCriteriaForm():null,n?"":(0,tt.tZ)(U.Z,{serverKey:Z,onChangePage:w,viewModels:a,columnConfigs:S,maxSelectedRows:t.checkBoxUseful()?1e4:-1,selectedRows:o,columns:b,hiddenRowCodes:i,pageInfo:{pageNo:g||1,pageSize:m||h.defaultPageSize},queryKey:r,onChangeRowSelection:t.changeRowSelection}),h.footer?(0,tt.tZ)("div",{style:{padding:"6px"},dangerouslySetInnerHTML:{__html:h.footer}}):null))})),t}return(0,c.Z)(J,[{key:"componentDidMount",value:(r=(0,i.Z)(Tt().mark((function t(){var e,r;return Tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.props.ltmplConfig,r=void 0,e&&(r=[{id:"10000",title:"排序"}].concat((0,o.Z)(e.columns),[{id:"20000",title:"隐藏"}])),this.loadData(Gt,[],r);case 4:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"componentDidUpdate",value:(e=(0,i.Z)(Tt().mark((function t(e){var r,n,i,a,c,u,s,l,f,h,p;return Tt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=this.props,n=r.sourceId,i=r.criteriaData,a=r.ltmplConfig,c=e.ltmplConfig,u=e.criteriaData,s=e.sourceId,l=this.state,f=l.hiddenColIds,h=l.sortedColConfigs,(n&&s!=n||a&&(!c||a.id!=c.id)||$.Z.transQueryParamsToStr(i,!1,["pageSize","pageNo"])!=$.Z.transQueryParamsToStr(u,!1,["pageSize","pageNo"]))&&(a.id==c.id?this.loadData(f,[],h):(p=void 0,a&&(p=[{id:"10000",title:"排序"}].concat((0,o.Z)(a.columns),[{id:"20000",title:"隐藏"}])),this.setState({viewModels:["table"]}),this.loadData(Gt,[],p)));case 4:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"render",value:function(){var t=this.state,e=t.queryKey,r=t.loading,n=this.props,o=n.sourceId,i=n.ltmplConfig,a=n.title,c=n.collapsible,u=n.initCollapse,s=n.tip;return i&&o?(0,tt.tZ)(p.Fragment,null," ",c?(0,tt.tZ)(It.Z,{initCollapse:u,title:(0,tt.tZ)(p.Fragment,null,a||i.title,(0,tt.tZ)(Rt.Z,{content:s||(i?i.tip:null)})),id:e+i.id,className:"hoverable",headStyle:{background:"#f2f4f5"},loading:r,bodyStyle:{padding:"6px"},extra:this.renderHeaderButtons()},this.renderContent()):(0,tt.tZ)(p.Fragment,null,this.renderContent())):(0,tt.tZ)(p.Fragment,null,(0,tt.tZ)(k.Z,{loading:r}),(0,tt.tZ)(L.Z,{loading:r}))}}]),J}(p.PureComponent);(0,h.Z)(Mt,"defaultProps",{criteriaData:{},funcMode:"complete",collapsible:!1,initCollapse:!1});var Bt=Mt},16739:function(t,e,r){"use strict";r.d(e,{Z:function(){return A}});var n=r(32763),o=r(59755),i=r(20511),a=r(30698),c=r(90237),u=r(65337),s=r(95225),l=r(39576),f=r(61378),h=r(69905),p=r(15274),d=r(67294),v=r(18430),y=r(57995),m=r(16046),g=r(35137),w=r(20890),Z=r(49811),b=r(60452),x=r(52656);var k=function(t){(0,l.Z)(o,t);var e,r,n=(e=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,h.Z)(e);if(r){var o=(0,h.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,f.Z)(this,t)});function o(){return(0,c.Z)(this,o),n.apply(this,arguments)}return(0,u.Z)(o,[{key:"render",value:function(){var t,e=this.props,r=e.queryTotal,n=e.pageInfo,o=e.total,i=e.pageTo;if(e.touchEnd,!n)return(0,x.tZ)(d.Fragment,null);var a=!0,c="";return o&&o>=0?(t=o,a=!0,o>0&&(c="共".concat(o,"条"))):(a=!1,t=n.virtualEndPageNo*n.pageSize+1,c="点击查看总数"),!t||t<n.pageSize?"":(0,x.tZ)("div",{className:"Pagination"},(0,x.tZ)("span",{className:a?"sewTotal":"seeTotal",onClick:r},c),(0,x.tZ)(b.Z,{style:{display:"inline-block"},showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["5","10","20","50","100","500"],defaultCurrent:1,current:parseInt(n.pageNo.toString()),pageSize:n.pageSize,onChange:function(t,e){return i(t,e)},onShowSizeChange:function(t,e){return i(t,e)},hideOnSinglePage:0===o,total:t}))}}]),o}(d.PureComponent),L=k,C=r(95742),O=r(62748),S=r(25291),E=["className","style"];function P(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return j(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function I(){I=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(n||[]);return o(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function i(o,a,c,u){var s=f(t[o],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,n.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,c,u)}),(function(t){i("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return i("throw",t,c,u)}))}u(s.arg)}var a;o(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),s(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function R(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?R(Object(r),!0).forEach((function(e){(0,p.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}v.Z.Panel;var N=(0,C.W8)((function(t){return(0,x.tZ)("tr",t)})),T=(0,C.JN)((function(t){return(0,x.tZ)("tbody",t)})),D=function(t){(0,l.Z)(k,t);var e,r,n,v,b=(n=k,v=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,h.Z)(n);if(v){var r=(0,h.Z)(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return(0,f.Z)(this,t)});function k(){var t;(0,c.Z)(this,k);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=b.call.apply(b,[this].concat(r)),(0,p.Z)((0,s.Z)(t),"state",{queryDataCache:void 0,virtualEndPageNo:void 0,dataSource:void 0,loading:!0,touchEnd:void 0,total:void 0}),(0,p.Z)((0,s.Z)(t),"DraggableContainer",(function(e){return(0,x.tZ)(T,(0,a.Z)({useDragHandle:!0,disableAutoscroll:!0,helperClass:"row-dragging",onSortEnd:t.onSortEnd},e))})),(0,p.Z)((0,s.Z)(t),"DraggableBodyRow",(function(e){e.className,e.style;var r=(0,i.Z)(e,E),n=t.state.dataSource;if(n){var o=n.findIndex((function(t){return t.key===r["data-row-key"]}));return(0,x.tZ)(N,(0,a.Z)({key:o,index:o},r))}return(0,x.tZ)(d.Fragment,null)})),(0,p.Z)((0,s.Z)(t),"onSortEnd",(function(e){var r=e.oldIndex,n=e.newIndex,o=t.state.dataSource;if(r!==n){var i=(0,O.q)([].concat(o),r,n).filter((function(t){return!!t}));t.setState({dataSource:i})}})),(0,p.Z)((0,s.Z)(t),"loadData",function(){var e=(0,o.Z)(I().mark((function e(r,n,o){var i,a,c,u,s,l,f;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.setState({loading:!0}),i=t.state.queryDataCache,a=t.props.serverKey,o||!i?(c=new Map,t.setState({total:void 0})):c=i,!c.has(n.pageNo+"_"+n.pageSize)){e.next=9;break}u=c.get(n.pageNo+"_"+n.pageSize),t.setState({dataSource:u.dataSource,virtualEndPageNo:u.pageInfo.virtualEndPageNo,loading:!1}),e.next=18;break;case 9:return e.next=11,Z.Z.requestQueryData(a,r,n);case 11:s=e.sent,l=[],n=s.pageInfo,s.entities.forEach((function(t,e){var r=_(_({key:t.code,code:t.code},t.fieldMap),{},{index:e});l.push(r)})),f=s.touchEnd,c.set(n.pageNo+"_"+n.pageSize,{dataSource:l,pageInfo:n}),t.setState({dataSource:l,virtualEndPageNo:n.virtualEndPageNo,queryDataCache:c,touchEnd:f,loading:!1});case 18:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()),(0,p.Z)((0,s.Z)(t),"pageTo",function(){var e=(0,o.Z)(I().mark((function e(r,n){var o,i,a,c;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.props.onChangePage,i=t.state.virtualEndPageNo,a={pageNo:r,pageSize:n||10,virtualEndPageNo:i},c=t.props.queryKey,e.next=6,t.loadData(c.key,a);case 6:o(r,n);case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),(0,p.Z)((0,s.Z)(t),"queryTotal",(0,o.Z)(I().mark((function e(){var r,n,o,i;return I().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.props,n=r.queryKey,o=r.serverKey,e.next=3,Z.Z.requestQueryCount(o,n.key);case 3:i=e.sent,t.setState({total:i});case 5:case"end":return e.stop()}}),e)})))),(0,p.Z)((0,s.Z)(t),"getRowSelection",(function(){var e,r=t.props,n=r.columns,o=r.onChangeRowSelection,i=r.selectedRows,a=r.maxSelectedRows,c=t.state.dataSource,u=[],s=P(i);try{for(s.s();!(e=s.n()).done;){var l=e.value;u.push(l.code)}}catch(t){s.e(t)}finally{s.f()}var f=[];if(c){var h,p=P(c);try{for(p.s();!(h=p.n()).done;){var d=h.value;f.push(d.code)}}catch(t){p.e(t)}finally{p.f()}}if(-1==a)return null;var v={fixed:!0,type:1==a?"radio":"checkbox",selectedRowKeys:u,onChange:function(t,e){var r=[],i=[],a=null;n.forEach((function(t){"序号"==t.title||null!=a||(a=t.dataIndex)})),e.forEach((function(t){r.push({code:t.code,title:t[a]}),i.push(t)})),o&&o(r,i,f)}};return v})),(0,p.Z)((0,s.Z)(t),"getUnHidenDataSource",(function(){var e=t.state.dataSource,r=t.props.hiddenRowCodes,n=[];if(e){var o,i=P(e);try{for(i.s();!(o=i.n()).done;){var a=o.value;r.includes(a.code)||n.push(a)}}catch(t){i.e(t)}finally{i.f()}}return n})),(0,p.Z)((0,s.Z)(t),"initViewList",(function(e){var r=t.props,n=(r.columns,r.columnConfigs),o=r.serverKey,i=[];return n.length>0&&n.forEach((function(t,r){if("10000"!=t.id&&"操作"!=t.title&&"20000"!=t.id){var n=t.title,a=e?e[t.id]:void 0;"序号"==n&&(a=e.index),a=a||(t.defaultValue?t.defaultValue:void 0),t.id,Math.random();var c=(0,x.tZ)(y.Z.Item,{label:t.title,key:r,className:"labelcss"},(0,x.tZ)(S.Z,{serverKey:o,holderType:"table",value:a,fieldConfig:t}));i.push(c)}})),i})),t}return(0,u.Z)(k,[{key:"componentDidMount",value:(r=(0,o.Z)(I().mark((function t(){var e,r,n;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.props,r=e.queryKey,n=e.pageInfo,!r){t.next=4;break}return t.next=4,this.loadData(r.key,n);case 4:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){this.setState=function(){return!1}}},{key:"componentDidUpdate",value:(e=(0,o.Z)(I().mark((function t(e){var r,n,o,i,a;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.queryKey,n=e.pageInfo,o=this.props,i=o.queryKey,a=o.pageInfo,this.state.total,!i){t.next=12;break}if((null==r?void 0:r.key)==i.key){t.next=9;break}return t.next=7,this.loadData(i.key,a,!0);case 7:t.next=12;break;case 9:if((null==n?void 0:n.pageNo)==a.pageNo&&(null==n?void 0:n.pageSize)==a.pageSize){t.next=12;break}return t.next=12,this.loadData(i.key,a,!1);case 12:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"render",value:function(){var t=this,e=this.props,r=e.pageInfo,n=e.columns,o=e.viewModels,i=this.state,a=i.touchEnd,c=i.total,u=i.loading,s=i.virtualEndPageNo;return(0,x.tZ)(d.Fragment,null,o.includes("table")?(0,x.tZ)(m.Z,{size:"middle",rowSelection:this.getRowSelection(),columns:n||[],dataSource:this.getUnHidenDataSource(),bordered:!0,pagination:!1,style:{display:n?"block":"none"},loading:u,components:{body:{wrapper:this.DraggableContainer,row:this.DraggableBodyRow}}}):"",(0,x.tZ)(L,{touchEnd:a,pageInfo:_(_({},r),{},{virtualEndPageNo:s}),pageTo:this.pageTo,queryTotal:this.queryTotal,total:c}),o.includes("verticalList")?(0,x.tZ)(g.Z,{style:{marginTop:"10px"}},(0,x.tZ)(w.Z,{dataSource:this.getUnHidenDataSource(),renderItem:function(e){return(0,x.tZ)(w.Z.Item,{key:e.id},(0,x.tZ)(g.Z,{size:"small",bodyStyle:{padding:"4px"}},(0,x.tZ)(y.Z,{column:4},t.initViewList(e))))}})):"")}}]),k}(d.PureComponent);(0,p.Z)(D,"defaultProps",{pageInfo:{pageNo:1,pageSize:10,virtualEndPageNo:void 0},hiddenRowCodes:[],selectedRows:[],viewModels:["table"]});var A=D},29336:function(t,e,r){"use strict";r.d(e,{Z:function(){return xt}});var n=r(32763),o=r(1252),i=r(59755),a=r(90237),c=r(65337),u=r(95225),s=r(39576),l=r(61378),f=r(69905),h=r(15274),p=r(67294),d=r(45532),v=r(88710),y=r(71577),m=r(53807),g=r(32823),w=r(71230),Z=r(15746),b=r(18230),x=r(16046),k=r(76880),L=r(54977),C=r(47389),O=r(82061),S=r(30723),E=r(13105),P=r(15128),j=r(49192),I=r(25291),R=r(24019),_=r(85932),N=r(24071),T=r(49073),D=r(49811),A=r(16739),F=r(87200),G=r(12513),M=r(52656);function B(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var K=function(t){(0,s.Z)(o,t);var e,r,n=(e=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,f.Z)(e);if(r){var o=(0,f.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,l.Z)(this,t)});function o(){var t;(0,a.Z)(this,o);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return t=n.call.apply(n,[this].concat(r)),(0,h.Z)((0,u.Z)(t),"handleClose",(function(e){var r=t.props,n=r.onChange,o=r.value;if(n){var i,a=[],c=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return B(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?B(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(o);try{for(c.s();!(i=c.n()).done;){var u=i.value;u.code!=e.code&&a.push(u)}}catch(t){c.e(t)}finally{c.f()}n(a)}})),(0,h.Z)((0,u.Z)(t),"renderTag",(function(){var e=t.props.value,r=[];return e?(e.forEach((function(e,n){var o=e.title instanceof Array?e.title[0]:e.title;r.push((0,M.tZ)(G.Z,{key:n,style:{fontSize:14},color:"geekblue",closable:!0,onClose:function(r){r.preventDefault(),t.handleClose(e)}},o&&o.includes("@R@")?o.split("@R@")[1]:e.title))})),r):""})),t}return(0,c.Z)(o,[{key:"render",value:function(){return(0,M.tZ)("div",null,(0,M.tZ)("h3",null,"查询点选：",this.renderTag()))}}]),o}(p.PureComponent),q=K,V=r(31298);function H(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Y(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function z(){z=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(n||[]);return o(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function i(o,a,c,u){var s=f(t[o],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,n.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,c,u)}),(function(t){i("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return i("throw",t,c,u)}))}u(s.arg)}var a;o(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),s(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function U(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function W(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?U(Object(r),!0).forEach((function(e){(0,h.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Q=function(t){(0,s.Z)(y,t);var e,r,n,d,v=(n=y,d=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,f.Z)(n);if(d){var r=(0,f.Z)(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return(0,l.Z)(this,t)});function y(){var t;(0,a.Z)(this,y);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=v.call.apply(v,[this].concat(r)),(0,h.Z)((0,u.Z)(t),"state",{selectConfig:void 0,columns:void 0,queryKey:void 0,loading:!0,criteriaData:void 0,pageNo:void 0,pageSize:void 0,disableCols:void 0,selectedRows:[]}),(0,h.Z)((0,u.Z)(t),"loadData",function(){var e=(0,i.Z)(z().mark((function e(r,n){var o,i,a,c,u,s,l,f,h,p,d;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({loading:!0}),o=t.state,i=o.pageNo,a=o.pageSize,c=r.defaultPageSize,u={pageNo:i,pageSize:a||c,virtualEndPageNo:void 0},s=t.props,l=s.sourceId,f=s.exceptCodes,h=s.serverKey,p=s.mainCode,e.next=7,D.Z.requestLtmplQueryKey(h,l,W(W(W({exceptCodes:f},n),u),{},{mainCode:p}));case 7:d=e.sent,t.setState({queryKey:d,criteriaData:n,loading:!1});case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),(0,h.Z)((0,u.Z)(t),"loadConfig",(0,i.Z)(z().mark((function e(){var r,n,o,i,a,c;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.props,n=r.sourceId,r.exceptCodes,o=r.serverKey,t.setState({loading:!0}),e.next=4,T.Z.requestSelectConfig(o,n);case 4:return i=e.sent,a=[],c=0,i.columns.forEach((function(t){var e={};"操作"!=t.title&&a.push(e),e.title=t.title,e.dataIndex=t.id,c++;var r=P.Z.getSupportControlType(t);c<10&&j.Z.sort(e,r),"序号"===t.title?(e.render=function(t,e,r){return(0,M.tZ)("label",null,r+1)},t.sorter=void 0):e.render=function(e,r){return(0,M.tZ)(I.Z,{serverKey:o,fieldConfig:t,value:r[t.id],holderType:"table"})}})),t.setState({columns:a,selectConfig:i,loading:!1}),e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})))),(0,h.Z)((0,u.Z)(t),"doSearch",function(){var e=(0,i.Z)(z().mark((function e(r){var n,o;return z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state.selectConfig,o=W({},r),e.next=4,t.loadData(n,o);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,h.Z)((0,u.Z)(t),"onChangePage",(function(e,r){t.setState({pageNo:e,pageSize:r})})),(0,h.Z)((0,u.Z)(t),"handleOk",(function(){t.props.onOK(t.state.selectedRows),t.setState({selectedRows:[],queryKey:void 0})})),(0,h.Z)((0,u.Z)(t),"handleCancel",(function(){t.setState({queryKey:void 0}),t.props.onCancel()})),(0,h.Z)((0,u.Z)(t),"changeRowSelection",(function(e,r,n){var i=t.props.maxSelectedRows;if(n){var a=t.state.selectedRows,c=[],u=[];1!=i&&u.push.apply(u,(0,o.Z)(a));var s,l=!1,f=H(e);try{for(f.s();!(s=f.n()).done;){var h=s.value;l=!1;var p,d=H(u);try{for(d.s();!(p=d.n()).done;){var v=p.value;h.code==v.code&&(l=!0)}}catch(t){d.e(t)}finally{d.f()}l||u.push(h),c.push(h.code)}}catch(t){f.e(t)}finally{f.f()}var y=[];y.push.apply(y,u);for(var m=0,g=u;m<g.length;m++){var w=g[m];if(n.includes(w.code)&&!c.includes(w.code))for(var Z in y)y[Z].code==w.code&&y.splice(Number(Z),1)}t.setState({selectedRows:y})}else t.setState({selectedRows:e})})),t}return(0,c.Z)(y,[{key:"componentDidMount",value:(r=(0,i.Z)(z().mark((function t(){var e,r,n;return z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.props,r=e.sourceId,n=e.open,!r||!n){t.next=9;break}return t.t0=this,t.next=5,this.loadConfig();case 5:return t.t1=t.sent,t.t2={},t.next=9,t.t0.loadData.call(t.t0,t.t1,t.t2);case 9:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"componentDidUpdate",value:(e=(0,i.Z)(z().mark((function t(e){var r,n,o,i,a,c,u,s;return z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=this.props).exceptCodes,n=r.open,o=this.state,i=o.selectConfig,a=o.criteriaData,c=o.queryKey,u=o.loading,e.exceptCodes,e.open,s=i,!n){t.next=12;break}if(s){t.next=9;break}return t.next=8,this.loadConfig();case 8:s=t.sent;case 9:if(c||u){t.next=12;break}return t.next=12,this.loadData(s,a);case 12:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"render",value:function(){var t=this.props,e=t.open,r=t.maxSelectedRows,n=t.serverKey,o=this.state,i=o.queryKey,a=o.columns,c=o.selectConfig,u=o.criteriaData,s=o.loading,l=o.selectedRows,f=o.pageSize,h=o.pageNo;if(!c)return(0,M.tZ)(p.Fragment,null);var d=c.buttons,v=c.criterias,y=c.jumps,m=c.actions;return d.includes("batchDelete")||d.includes("query")&&v&&v.length>0||m&&m.length>0||y&&y.length,(0,M.tZ)(N.Z,{open:e,title:(0,M.tZ)(q,{value:l,onChange:this.changeRowSelection}),width:1150,destroyOnClose:!0,centered:!0,bodyStyle:{height:"80vh",overflow:"auto"},onCancel:this.handleCancel,onOk:this.handleOk},(0,M.tZ)(V.ZP,{style:{height:"80vh"},autoHide:!0,autoHideTimeout:1e3},(0,M.tZ)("div",{className:"actTable"},(0,M.tZ)(F.Z,{serverKey:n,selectedRows:l,ltmplConfig:c,data:u,doSearch:this.doSearch,loading:s}),(0,M.tZ)(A.Z,{serverKey:n,pageInfo:{pageNo:h||1,pageSize:f||c.defaultPageSize},onChangePage:this.onChangePage,maxSelectedRows:r,selectedRows:l,columns:a,queryKey:i,onChangeRowSelection:this.changeRowSelection}))," "))}}]),y}(p.PureComponent),$=Q,J=r(41307),X=r(55241),tt=r(57564),et=r(35137),rt=r(28508),nt=r(16117),ot=r(69165),it=r(94716);function at(){at=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(n||[]);return o(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function i(o,a,c,u){var s=f(t[o],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,n.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,c,u)}),(function(t){i("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return i("throw",t,c,u)}))}u(s.arg)}var a;o(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),s(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}var ct=function(t){(0,s.Z)(v,t);var e,r,n,o=(r=v,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,f.Z)(r);if(n){var o=(0,f.Z)(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return(0,l.Z)(this,t)});function v(){var t;(0,a.Z)(this,v);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=o.call.apply(o,[this].concat(r)),(0,h.Z)((0,u.Z)(t),"state",{}),(0,h.Z)((0,u.Z)(t),"onSubmit",(function(e){var r=t.props,n=r.dtmplData,o=r.fieldGroupConfig,i={code:n?n.code:"new"+it.Z.getRandomNum(6),editStatus:n&&n.code&&!n.code.startsWith("new")?"changed":"new",relationLabel:e.relationLabel?e.relationLabel:o.relationNames[0],fieldMap:e};t.props.onFinish(i)})),(0,h.Z)((0,u.Z)(t),"selectRelation",(function(){var e=t.props,r=e.fieldGroupConfig,n=e.dtmplData;return r.relationNames.length>1?(0,M.tZ)(d.Z.Item,{name:"relationLabel",initialValue:n?n.relationLabel:void 0,rules:[{required:!0,message:"请选择关系"}],label:"关系"},(0,M.tZ)(nt.ZP.Group,null,r.relationNames.map((function(t){return(0,M.tZ)(nt.ZP,{value:"item"},t)})))):""})),t}return(0,c.Z)(v,[{key:"componentDidMount",value:(e=(0,i.Z)(at().mark((function t(){return at().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})},{key:"render",value:function(){var t=this.props,e=t.formRef,r=t.fieldGroupConfig,n=t.dtmplData,o=t.serverKey;return(0,M.tZ)(p.Fragment,null,(0,M.tZ)(d.Z,{labelWrap:!0,ref:e,name:"control-hooks",onFinish:this.onSubmit},this.selectRelation(),(0,M.tZ)(ot.Z,{serverKey:o,formRef:e,nameAttr:"id",fields:r?r.fields:void 0,valueMap:n?n.fieldMap:{}})))}}]),v}(p.PureComponent);function ut(){ut=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(n||[]);return o(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function i(o,a,c,u){var s=f(t[o],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,n.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,c,u)}),(function(t){i("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return i("throw",t,c,u)}))}u(s.arg)}var a;o(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),s(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}var st=function(t){(0,s.Z)(v,t);var e,r,n,o,d=(n=v,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,f.Z)(n);if(o){var r=(0,f.Z)(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return(0,l.Z)(this,t)});function v(){var t;(0,a.Z)(this,v);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=d.call.apply(d,[this].concat(r)),(0,h.Z)((0,u.Z)(t),"formRef",p.createRef()),(0,h.Z)((0,u.Z)(t),"state",{isAdded:!1}),(0,h.Z)((0,u.Z)(t),"reset",(function(){})),(0,h.Z)((0,u.Z)(t),"onOk",(function(){t.setState({isAdded:!1}),t.formRef.current.submit()})),(0,h.Z)((0,u.Z)(t),"add",(function(){t.setState({isAdded:!0}),t.formRef.current.submit()})),(0,h.Z)((0,u.Z)(t),"getTitle",(function(){var e=t.props,r=e.fieldGroupConfig,n=e.dtmplData;return r.title+(n?"【行编辑】":"【新建一行】")})),t}return(0,c.Z)(v,[{key:"componentDidMount",value:(r=(0,i.Z)(ut().mark((function t(){return ut().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"componentDidUpdate",value:(e=(0,i.Z)(ut().mark((function t(){return ut().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})},{key:"render",value:function(){var t=this.props,e=(t.height,t.onOk),r=t.fieldGroupConfig,n=t.dtmplData,o=t.onCancel,i=t.okButtonType,a=t.needConfirm,c=t.okDanger,u=t.serverKey,s=this.state.isAdded;return(0,M.tZ)(et.Z,{style:{width:1e3},title:this.getTitle(),bodyStyle:{overflow:"auto"},extra:(0,M.tZ)(p.Fragment,null,(0,M.tZ)(b.Z,{size:[8,0]},function(t){return a?c?(0,M.tZ)(tt.Z,{placement:"rightBottom",title:"确定要执行提交吗？",onConfirm:t,okText:"确定",cancelText:"取消",okType:"danger"},(0,M.tZ)(y.ZP,{type:i,danger:!0,size:"small"},"确定")):(0,M.tZ)(tt.Z,{placement:"rightBottom",title:"确定要执行提交吗？",onConfirm:t,okText:"确定",cancelText:"取消"},(0,M.tZ)(y.ZP,{size:"small",type:i},"确定")):(0,M.tZ)(y.ZP,{type:i,size:"small",onClick:t},"确定")}(this.onOk),n?"":(0,M.tZ)(m.Z,{placement:"top",title:"可连续添加"},(0,M.tZ)(y.ZP,{type:"primary",size:"small",onClick:this.add},"添加")),o?(0,M.tZ)(y.ZP,{onClick:o},(0,M.tZ)(rt.Z,null)):""))},(0,M.tZ)(ct,{serverKey:u,fieldGroupConfig:r,formRef:this.formRef,onFinish:function(t){return e(t,!s)},dtmplData:n}))}}]),v}(p.PureComponent);function lt(){lt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(n||[]);return o(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function i(o,a,c,u){var s=f(t[o],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,n.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,c,u)}),(function(t){i("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return i("throw",t,c,u)}))}u(s.arg)}var a;o(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),s(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}(0,h.Z)(st,"defaultProps",{forceRender:!0,style:{maxWidth:"calc(100vw - 60px)",maxHeight:"calc(100vh - 50px)"},needConfirm:!1,okButtonType:"primary",okDanger:!1});var ft=function(t){(0,s.Z)(v,t);var e,r,n,o,d=(n=v,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,f.Z)(n);if(o){var r=(0,f.Z)(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return(0,l.Z)(this,t)});function v(){var t;(0,a.Z)(this,v);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=d.call.apply(d,[this].concat(r)),(0,h.Z)((0,u.Z)(t),"formRef",p.createRef()),(0,h.Z)((0,u.Z)(t),"state",{popoverOpen:!1}),(0,h.Z)((0,u.Z)(t),"onOk",(function(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&t.setState({popoverOpen:!1}),t.props.onOk(e)})),t}return(0,c.Z)(v,[{key:"componentDidMount",value:(r=(0,i.Z)(lt().mark((function t(){return lt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"componentDidUpdate",value:(e=(0,i.Z)(lt().mark((function t(){return lt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return e.apply(this,arguments)})},{key:"render",value:function(){var t=this,e=this.state.popoverOpen,r=this.props,n=r.disabled,o=r.buttonIcon,i=r.buttonTitle,a=r.tooltipTitle,c=r.fieldGroupConfig,u=r.dtmplData,s=r.buttonStyle,l=r.serverKey;return(0,M.tZ)(X.Z,{destroyTooltipOnHide:!0,placement:"leftBottom",open:e,content:(0,M.tZ)(st,{serverKey:l,fieldGroupConfig:c,dtmplData:u,onCancel:function(){t.setState({popoverOpen:!1})},onOk:this.onOk}),trigger:"click"},(0,M.tZ)(m.Z,{placement:"left",title:a},(0,M.tZ)(y.ZP,{disabled:n,style:s,icon:o,size:"small",onClick:function(){t.setState({popoverOpen:!e})}},i||"")))}}]),v}(p.PureComponent);(0,h.Z)(ft,"defaultProps",{buttonIcon:void 0,disabled:!1});var ht=r(62508),pt=r(92801);var dt=function(t){(0,s.Z)(o,t);var e,r,n=(e=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,n=(0,f.Z)(e);if(r){var o=(0,f.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,l.Z)(this,t)});function o(){var t;(0,a.Z)(this,o);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return t=n.call.apply(n,[this].concat(r)),(0,h.Z)((0,u.Z)(t),"onChange",(function(){var e=t.props,r=e.count,n=e.onChange,o=e.min;console.log("关系 this.props 修改",t.props),n((r||0==r)&&r>=Number(o)?1:null)})),t}return(0,c.Z)(o,[{key:"componentDidMount",value:function(){(0,pt.Z)(this.props),this.onChange()}},{key:"componentDidUpdate",value:function(t){var e=this.props.count;!e&&0!=e||t.count==e||this.onChange()}},{key:"render",value:function(){var t=this.props,e=(t.count,t.min,t.value);return console.log("关系 this.props",e),(0,M.tZ)(p.Fragment,null)}}]),o}(p.PureComponent);function vt(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return yt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function yt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function mt(){mt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new O(n||[]);return o(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function i(o,a,c,u){var s=f(t[o],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,n.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,c,u)}),(function(t){i("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return i("throw",t,c,u)}))}u(s.arg)}var a;o(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function S(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return d.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),s(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),C(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;C(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:S(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function gt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}(0,h.Z)(dt,"defaultProps",{min:0});var wt=d.Z.Item,Zt=v.Z.Text,bt=function(t){(0,s.Z)(N,t);var e,r,n,d,v=(n=N,d=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,f.Z)(n);if(d){var r=(0,f.Z)(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return(0,l.Z)(this,t)});function N(){var t;(0,a.Z)(this,N);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=v.call.apply(v,[this].concat(r)),(0,h.Z)((0,u.Z)(t),"state",{showDtmplView:!1,selectedCode:void 0,showSelectTable:!1,showDtmplEdit:!1,tableLoading:!1,showRowEdit:!1,selectedDtmplData:void 0,filterStr:void 0,pageSize:10}),(0,h.Z)((0,u.Z)(t),"buildDataSource",(function(){var e=t.state.filterStr,r=t.props.value,n=void 0;return r&&(n=[],r.forEach((function(t,r){var o=!0;if(e){o=!1;for(var i=0,a=Object.values(t.fieldMap);i<a.length;i++){var c=a[i];c&&c.toString().indexOf(e)>=0&&(o=!0)}}if(o){var u=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?gt(Object(r),!0).forEach((function(e){(0,h.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({key:r,relationLabel:t.relationLabel,code:t.code},t.fieldMap);n.push(u)}}))),n})),(0,h.Z)((0,u.Z)(t),"buildColumns",(function(){var e=t.props,r=e.viewOrEdit,n=(e.value,e.fieldGroupConfig),o=e.serverKey,i=(n.title,n.buttons),a=n.fields,c=n.showRelationName,u=n.relationNames,s=(n.showRowNum,n.disabled),l=[],f=0;if(a.forEach((function(t){var e={};l.push(e),e.title=t.title,e.dataIndex=t.id,f++;var r=P.Z.getControlType(t,null);1==f?j.Z.sort(e,r,"ascend"):f<10&&j.Z.sort(e,r),e.render=function(e,r){return(0,M.tZ)(I.Z,{serverKey:o,holderType:"table",fieldConfig:t,value:r[t.id]})}})),c){var h={dataIndex:"relationLabel",name:"relation",title:"关系",type:"relation",editable:!0,fieldAvailable:!0,id:"10000",options:u};l.unshift(h)}var p=i.includes("detail"),d=i.includes("rowEdit"),v=i.includes("dtmplEdit"),g=i.includes("singleDelete");if("edit"==r&&(p||d||v||g)){var w={};l.push(w),w.title="操作",w.fixed="right",w.key="action",w.render=function(e){return(0,M.tZ)("div",{className:"actionbtn"},p?(0,M.tZ)(y.ZP,{disabled:s,title:"当前实体",type:"primary",icon:(0,M.tZ)(k.Z,null),size:"small",onClick:function(){return t.showEntityView(e)}}):"",v?(0,M.tZ)(y.ZP,{disabled:s,title:"编辑当实体",icon:(0,M.tZ)(L.Z,null),size:"small",onClick:function(){return t.showEditDtmplModel(e)}}):"",n.rowActions&&n.rowActions.length>0?n.rowActions.map((function(r){return(0,M.tZ)(ht.Z,{serverKey:o,disabled:s,key:r.id,data:[e],actionConfig:r,doAction:t.doRowAction,buttonSize:"small"})})):"",d?(0,M.tZ)(ft,{serverKey:o,disabled:s,buttonIcon:(0,M.tZ)(C.Z,null),dtmplData:t.getRowEditData(e.code),fieldGroupConfig:n,onOk:t.handleRowEdit,tooltipTitle:"编辑当前行"}):"",g?(0,M.tZ)(m.Z,{placement:"right",title:"删除当前行"},(0,M.tZ)(y.ZP,{disabled:s,danger:!0,type:"primary",icon:(0,M.tZ)(O.Z,null),size:"small",onClick:function(){return t.delete(e)}})):"")}}else if("view"==r&&p){var Z={};l.push(Z),Z.title="操作",Z.fixed="right",Z.key="action",Z.render=function(e){return(0,M.tZ)("div",{className:"actionbtn"},p?(0,M.tZ)(y.ZP,{disabled:s,title:"当前实体",type:"primary",icon:(0,M.tZ)(k.Z,null),size:"small",onClick:function(){return t.showEntityView(e)}}):"")}}return l})),(0,h.Z)((0,u.Z)(t),"doRowAction",function(){var e=(0,i.Z)(mt().mark((function e(r,n,o){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.doAction(r,[{title:void 0,code:n[0]}],o);case 2:t.handleDtmplEdit(n[0]);case 3:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()),(0,h.Z)((0,u.Z)(t),"doAction",function(){var e=(0,i.Z)(mt().mark((function e(r,n,o){var i;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({tableLoading:!0}),i=t.props.serverKey,e.next=4,D.Z.postActions(i,r,n,o);case 4:e.sent,t.setState({tableLoading:!1});case 6:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()),(0,h.Z)((0,u.Z)(t),"showEntityView",(function(e){t.setState({selectedCode:e.code,showDtmplView:!0})})),(0,h.Z)((0,u.Z)(t),"hiddenEntityView",(function(){t.setState({showDtmplView:!1})})),(0,h.Z)((0,u.Z)(t),"hiddenEntityEdit",(function(){t.setState({showDtmplEdit:!1})})),(0,h.Z)((0,u.Z)(t),"editRow",(function(t){})),(0,h.Z)((0,u.Z)(t),"delete",(function(e){var r=t.props,n=r.value,o=r.fieldGroupConfig,i=r.onChange,a=[];if(n){var c,u=vt(n);try{for(u.s();!(c=u.n()).done;){var s=c.value;s.code!=e.code&&a.push(s)}}catch(t){u.e(t)}finally{u.f()}}i(o,a)})),(0,h.Z)((0,u.Z)(t),"searchValue",(function(e){t.setState({filterStr:e})})),(0,h.Z)((0,u.Z)(t),"tabChange",(function(e){t.setState({pageSize:e.pageSize})})),(0,h.Z)((0,u.Z)(t),"showSelect",(function(){t.setState({showSelectTable:!0})})),(0,h.Z)((0,u.Z)(t),"select",function(){var e=(0,i.Z)(mt().mark((function e(r){var n,o,i,a;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.setState({showSelectTable:!1}),r&&!(r.length<=0)){e.next=3;break}return e.abrupt("return");case 3:n=[],o=vt(r);try{for(o.s();!(i=o.n()).done;)a=i.value,n.push(a.code)}catch(t){o.e(t)}finally{o.f()}return e.next=8,t.add(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,h.Z)((0,u.Z)(t),"add",function(){var e=(0,i.Z)(mt().mark((function e(r){var n,i,a,c,u,s,l,f,h;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props,i=n.value,a=n.fieldGroupConfig,c=n.onChange,u=n.serverKey,s=a.relationNames,t.setState({tableLoading:!0}),e.next=5,D.Z.requestSelectedData(u,a.id,r);case 5:if(l=e.sent){f=vt(l);try{for(f.s();!(h=f.n()).done;)h.value.relationLabel=s[0]}catch(t){f.e(t)}finally{f.f()}}i&&l.unshift.apply(l,(0,o.Z)(i)),c(a,l),t.setState({tableLoading:!1});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,h.Z)((0,u.Z)(t),"getRowEditData",(function(e){var r=t.props.value,n=void 0;if(e){var o,i=vt(r);try{for(i.s();!(o=i.n()).done;){var a=o.value;if(e==a.code){n=a;break}}}catch(t){i.e(t)}finally{i.f()}}return n})),(0,h.Z)((0,u.Z)(t),"handleDtmplAdd",function(){var e=(0,i.Z)(mt().mark((function e(r){return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({showDtmplEdit:!1}),e.next=3,t.add([r]);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,h.Z)((0,u.Z)(t),"handleDtmplEdit",function(){var e=(0,i.Z)(mt().mark((function e(r){var n,i,a,c,u,s,l,f,h,p;return mt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props,i=n.value,a=n.fieldGroupConfig,c=n.onChange,a.title,a.fields,a.showRelationName,a.relationNames,a.showRowNum,u=a.serverKey,t.setState({tableLoading:!0,showDtmplEdit:!1}),e.next=5,D.Z.requestSelectedData(u,a.id,[r]);case 5:if(s=e.sent[0],(l=(0,o.Z)(i))&&s){f=vt(l);try{for(f.s();!(h=f.n()).done;)(p=h.value).code==s.code&&(p.fieldMap=s.fieldMap)}catch(t){f.e(t)}finally{f.f()}}c(a,l),t.setState({tableLoading:!1});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,h.Z)((0,u.Z)(t),"handleRowEdit",(function(e){var r=t.props,n=r.value,i=r.fieldGroupConfig,a=r.onChange,c=[];n&&(c=(0,o.Z)(n));var u,s=!0,l=vt(c);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(f.code==e.code){s=!1,f.editStatus=e.editStatus,f.fieldMap=e.fieldMap,f.relationLabel=e.relationLabel;break}}}catch(t){l.e(t)}finally{l.f()}s&&c.unshift(e),a(i,c),s?g.ZP.success("已添加"):g.ZP.success("已修改")})),(0,h.Z)((0,u.Z)(t),"showAddDtmplModel",(function(){t.setState({showDtmplEdit:!0,selectedCode:void 0})})),(0,h.Z)((0,u.Z)(t),"showEditDtmplModel",(function(e){t.setState({showDtmplEdit:!0,selectedCode:e.code})})),(0,h.Z)((0,u.Z)(t),"buildButtons",(function(){var e=t.props,r=e.fieldGroupConfig,n=e.viewOrEdit,o=e.value,i=e.serverKey,a=r.buttons,c=r.disabled,u=(t.state.showRowEdit,c||!!r.max&&r.max<=(o?o.length:0));return"edit"==n?(0,M.tZ)(w.Z,null,(0,M.tZ)(Z.Z,{span:20},(0,M.tZ)(b.Z,null,a.includes("rowAdd")?(0,M.tZ)(ft,{serverKey:i,disabled:u,buttonStyle:{marginBottom:10},buttonTitle:"新建一行",fieldGroupConfig:r,onOk:t.handleRowEdit}):"",a.includes("dtmplAdd")?(0,M.tZ)(y.ZP,{disabled:u,icon:(0,M.tZ)(S.Z,null),size:"small",onClick:t.showAddDtmplModel,style:{marginBottom:10}},"新增"):"",a.includes("selectAdd")?(0,M.tZ)(y.ZP,{disabled:u,type:"primary",icon:(0,M.tZ)(E.Z,null),size:"small",onClick:t.showSelect,style:{marginBottom:10}},"选择"):"",r.min&&(!o||o.length<=0)?(0,M.tZ)(Zt,{style:{color:"red"}},"请选择或添加",r.title):null,(0,M.tZ)(wt,{name:"$virtual"+r.id,style:{margin:0,maxHeight:"32px"},rules:r.min?[{required:!0,message:""}]:null},(0,M.tZ)(dt,{min:r.min+"",style:{marginBottom:10},count:o?o.length:0}))))):""})),t}return(0,c.Z)(N,[{key:"componentDidMount",value:(r=(0,i.Z)(mt().mark((function t(){return mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"componentDidUpdate",value:(e=(0,i.Z)(mt().mark((function t(e){var r,n;return mt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=this.props.fieldGroupConfig,n=e.fieldGroupConfig,r.disabled==n.disabled&&r.mainCode==n.mainCode||this.setState({filterStr:""});case 3:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"render",value:function(){var t=this,e=this.props,r=e.fieldGroupConfig,n=e.value,o=e.parentId,i=e.loading,a=e.initCollapse,c=e.mainCode,u=e.serverKey,s=this.state,l=s.pageSize,f=s.selectedCode,h=s.showDtmplView,d=s.showSelectTable,v=s.showDtmplEdit,y=s.tableLoading,m=(s.showRowEdit,s.selectedDtmplData,r.buttons),g=r.mainCode?r.mainCode:c||o,w={pageSize:l,hideOnSinglePage:!0,defaultCurrent:1,total:n?n.length:void 0,showTotal:function(t){return"共".concat(t,"条")}},Z=[];if(n){var b,k=vt(n);try{for(k.s();!(b=k.n()).done;){var L=b.value;Z.push(L.code)}}catch(t){k.e(t)}finally{k.f()}}return r.displayConfig.includes("nonDataNonDisplayed")&&(!n||n.length<=0)?"":(0,M.tZ)(p.Fragment,null,(0,M.tZ)(J.Z,{initCollapse:a||r.displayConfig.includes("folded"),title:r.title,tip:r.tip,id:o+r.id,className:"hoverable",headStyle:{background:"#f2f4f5"},loading:i,bodyStyle:{padding:"6px"}},(0,M.tZ)("div",{className:"editTableList"},this.buildButtons(),(0,M.tZ)(x.Z,{size:"small",locale:{emptyText:(0,M.tZ)("div",{style:{textAlign:"center",width:"100%"}},(0,M.tZ)(Zt,{disabled:!0},"暂无数据..."))},bordered:!0,loading:y,dataSource:this.buildDataSource(),columns:this.buildColumns(),pagination:w,onChange:this.tabChange}))),m.includes("detail")?(0,M.tZ)(R.Z,{serverKey:u,mainCode:g,open:h,onCancel:this.hiddenEntityView,sourceId:r.id,code:f}," "):"",m.includes("dtmplEdit")||m.includes("dtmplAdd")?(0,M.tZ)(_.Z,{serverKey:u,mainCode:g,open:v,onCancel:this.hiddenEntityEdit,sourceId:r.id,code:f,onOk:f?this.handleDtmplEdit:this.handleDtmplAdd}):"",m.includes("selectAdd")?(0,M.tZ)($,{serverKey:u,maxSelectedRows:r.max,open:d,onOK:this.select,onCancel:function(){t.setState({showSelectTable:!1})},exceptCodes:Z,mainCode:g,sourceId:r.id}):"")}}]),N}(p.PureComponent);(0,h.Z)(bt,"defaultProps",{});var xt=bt},55707:function(t,e,r){"use strict";var n=r(32763),o=r(92801),i=r(1252),a=r(59755),c=r(90237),u=r(65337),s=r(95225),l=r(39576),f=r(61378),h=r(69905),p=r(15274),d=r(67294),v=r(49192),y=r(15128),m=r(49073),g=r(49811),w=r(16739),Z=r(87200),b=r(25291),x=r(52656);function k(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return L(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function L(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function C(){C=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new S(n||[]);return o(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(E([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function i(o,a,c,u){var s=f(t[o],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,n.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,c,u)}),(function(t){i("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return i("throw",t,c,u)}))}u(s.arg)}var a;o(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=k(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function k(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,k(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),s(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=E,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function O(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function S(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?O(Object(r),!0).forEach((function(e){(0,p.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var E=function(t){(0,l.Z)(E,t);var e,r,n,L,O=(n=E,L=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=(0,h.Z)(n);if(L){var r=(0,h.Z)(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return(0,f.Z)(this,t)});function E(){var t;(0,c.Z)(this,E);for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t=O.call.apply(O,[this].concat(r)),(0,p.Z)((0,s.Z)(t),"state",{selectConfig:void 0,columns:void 0,queryKey:void 0,loading:!0,criteriaData:void 0,disableCols:void 0,pageNo:1,pageSize:void 0}),(0,p.Z)((0,s.Z)(t),"loadData",function(){var e=(0,a.Z)(C().mark((function e(r,n){var o,i,a,c,u,s,l,f,h,p;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({loading:!0}),o=t.props,i=o.mainCode,a=o.serverKey,c=o.sourceId,u=t.state,s=u.pageNo,l=u.pageSize,f=r.defaultPageSize,h={pageNo:s,pageSize:l||f||10,virtualEndPageNo:void 0},e.next=7,g.Z.requestLtmplQueryKey(a,c,S(S(S({},n),h),{},{mainCode:i}));case 7:p=e.sent,t.setState({queryKey:p,criteriaData:n,loading:!1});case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),(0,p.Z)((0,s.Z)(t),"loadConfig",(0,a.Z)(C().mark((function e(){var r,n,o,i,a,c;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.props,n=r.sourceId,o=r.serverKey,t.setState({loading:!0}),e.next=4,m.Z.requestSelectConfig(o,n);case 4:return i=e.sent,a=[],c=0,i.columns.forEach((function(t){var e={};"操作"!=t.title&&a.push(e),e.title=t.title,e.dataIndex=t.id,c++;var r=y.Z.getSupportControlType(t);c<10&&v.Z.sort(e,r),"序号"===t.title?(e.render=function(t,e,r){return(0,x.tZ)("label",null,r+1)},t.sorter=void 0):e.render=function(e,r){return(0,x.tZ)(b.Z,{serverKey:o,holderType:"table",fieldConfig:t,value:r[t.id]})}})),t.setState({columns:a,selectConfig:i,loading:!1}),e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})))),(0,p.Z)((0,s.Z)(t),"doSearch",function(){var e=(0,a.Z)(C().mark((function e(r){var n,o;return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state.selectConfig,o=S({},r),e.next=4,t.loadData(n,o);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,p.Z)((0,s.Z)(t),"changeRowSelection",(function(e,r,n){var o,a=[],c=t.props,u=c.selectedRows,s=c.selectedDatas,l=c.onChange,f=c.maxSelectedRows;if(n){var h=[],p=[];1!=f&&p.push.apply(p,(0,i.Z)(u));var d,v=!1,y=k(e);try{for(y.s();!(d=y.n()).done;){var m=d.value;v=!1;var g,w=k(p);try{for(w.s();!(g=w.n()).done;){var Z=g.value;m.code==Z.code&&(v=!0)}}catch(t){w.e(t)}finally{w.f()}v||p.push(m),h.push(m.code)}}catch(t){y.e(t)}finally{y.f()}var b=[];b.push.apply(b,p);for(var x=0,L=p;x<L.length;x++){var C=L[x];if(n.includes(C.code)&&!h.includes(C.code))for(var O in b)b[O].code==C.code&&b.splice(Number(O),1)}o=b}else o=e;var S,E=[].concat((0,i.Z)(s),(0,i.Z)(r)),P=k(o);try{for(P.s();!(S=P.n()).done;){var j,I=S.value,R=k(E);try{for(R.s();!(j=R.n()).done;){var _=j.value;_.code==I.code&&a.push(_)}}catch(t){R.e(t)}finally{R.f()}}}catch(t){P.e(t)}finally{P.f()}l(o,a)})),(0,p.Z)((0,s.Z)(t),"onChangePage",(function(e,r){t.setState({pageNo:e,pageSize:r})})),t}return(0,u.Z)(E,[{key:"componentDidMount",value:(r=(0,a.Z)(C().mark((function t(){return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,this.loadConfig();case 3:return t.t1=t.sent,t.t2={},t.next=7,t.t0.loadData.call(t.t0,t.t1,t.t2);case 7:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"componentDidUpdate",value:(e=(0,a.Z)(C().mark((function t(e){var r,n,i,a,c,u;return C().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((0,o.Z)(this.props),r=this.state,n=r.selectConfig,i=r.criteriaData,a=r.queryKey,c=r.loading,e.exceptCodes,e.open,u=n){t.next=8;break}return t.next=7,this.loadConfig();case 7:u=t.sent;case 8:if(a||c){t.next=11;break}return t.next=11,this.loadData(u,i);case 11:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"render",value:function(){var t=this.props,e=t.maxSelectedRows,r=t.selectedRows,n=t.selectedDatas,o=t.serverKey,i=this.state,a=i.queryKey,c=i.columns,u=i.selectConfig,s=i.criteriaData,l=i.loading,f=i.pageNo,h=i.pageSize;if(!u)return(0,x.tZ)(d.Fragment,null);var p=u.buttons,v=u.criterias,y=u.jumps,m=u.actions;return p.includes("batchDelete")||p.includes("query")&&v&&v.length>0||m&&m.length>0||y&&y.length,(0,x.tZ)("div",{className:"actTable"},(0,x.tZ)(Z.Z,{serverKey:o,selectedRows:r,selectedDatas:n,ltmplConfig:u,data:s,doSearch:this.doSearch,loading:l}),(0,x.tZ)(w.Z,{serverKey:o,maxSelectedRows:e,selectedRows:r,columns:c,pageInfo:{pageNo:f,pageSize:h||u.defaultPageSize},onChangePage:this.onChangePage,queryKey:a,onChangeRowSelection:this.changeRowSelection}))}}]),E}(d.PureComponent);(0,p.Z)(E,"defaultProps",{maxSelectedRows:1e3,selectedDatas:[]}),e.Z=E},49192:function(t,e){"use strict";e.Z={sort:function(t,e,r){var n=t.dataIndex;t.sorter="decimal"==e||"int"==e||"float"==e||"double"==e?function(t,e){return t[n]-e[n]}:"text"==e||"textarea"==e||"date"==e||"datetime"==e?function(t,e){return t[n]?t[n].localeCompare(e[n],"zh-CN"):-1}:function(t,e){return t[n]&&e[n]&&t[n].localeCompare?t[n]?t[n].localeCompare(e[n],"zh-CN"):-1:1},r&&(t.defaultSortOrder=r),t.showSorterTooltip=!1}}},15128:function(t,e,r){"use strict";var n=r(5301),o=new Set;function i(){}o.add("date-YY"),o.add("daterange-YY"),o.add("date-M1"),o.add("daterange-M1"),o.add("date"),o.add("daterange"),o.add("datetime-HH"),o.add("datetimerange-HH"),o.add("datetime-mm"),o.add("datetimerange-mm"),o.add("datetime"),o.add("datetimerange"),o.add("timestamp"),o.add("time-HH"),o.add("timerange-HH"),o.add("time-mm"),o.add("timerange-mm"),o.add("time"),o.add("timerange"),o.add("text"),o.add("textarea"),o.add("html"),o.add("steps"),o.add("progress"),o.add("password"),o.add("preselect"),o.add("select"),o.add("multiselect"),o.add("checkbox"),o.add("radio"),o.add("yes-no-radio"),o.add("yes-no-switch"),o.add("caselect"),o.add("relation"),o.add("file"),o.add("picture"),o.add("chemstruc"),o.add("sql-code-editor"),o.add("video"),o.add("takeVideo"),o.add("signature"),o.add("non-download-file"),o.add("decimal"),o.add("float"),o.add("double"),o.add("int"),o.add("relselect"),o.add("refselect"),o.add("range"),o.add("intrange"),o.add("decimalrange"),o.add("texttags"),o.add("entity-select"),o.add("table-entity-select"),o.add("modal-entity-select"),o.add("color"),o.add("url"),o.add("hidden"),o.add("lab-tree-select"),i.isSupport=function(t){return!!t&&(!!n.cB.getCustomViewControl(t)||o.has(t))},i.getSupportControlType=function(t){return this.isSupport(t.extControlType)?t.extControlType:this.isSupport(t.controlType)?t.controlType:"text"},i.getControlType=function(t,e){var r;return r=this.getSupportControlType(t),e&&"string"==typeof e&&-1===e.indexOf("@R@")&&"relselect"===r&&-1!=e.indexOf("download-files/")&&(r="file"),r},e.Z=i},49073:function(t,e,r){"use strict";var n=r(32763),o=r(1252),i=r(59755),a=r(49811),c=r(15128),u=r(32823);function s(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function f(){f=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),c=new S(n||[]);return o(a,"_invoke",{value:k(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var p={};function d(){}function v(){}function y(){}var m={};s(m,a,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(E([])));w&&w!==e&&r.call(w,a)&&(m=w);var Z=y.prototype=d.prototype=Object.create(m);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function i(o,a,c,u){var s=h(t[o],t,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==(0,n.Z)(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){i("next",t,c,u)}),(function(t){i("throw",t,c,u)})):e.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){return i("throw",t,c,u)}))}u(s.arg)}var a;o(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=L(a,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function L(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,L(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return v.prototype=y,o(Z,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:v,configurable:!0}),v.displayName=s(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,s(t,u,"GeneratorFunction")),t.prototype=Object.create(Z),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(Z),s(Z,u,"Generator"),s(Z,a,(function(){return this})),s(Z,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=E,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}var h,p=[],d=[],v=[],y=[],m=new Map,g=new Map,w=new Map,Z=new Map,b=new Map,x=new Map,k=new Map,L=new Map;function C(t){var e=[];return t&&t.forEach((function(t){var r=c.Z.getSupportControlType(t);"caselect"!=r&&"select"!=r&&"multiselect"!=r&&"steps"!=r&&"preselect"!=r&&"checkbox"!=r&&"radio"!=r||m.has(t.mstrucId)||e.push(t.mstrucId)})),e}function O(t){var e=[];return t&&t.forEach((function(t){var r=C(t.writes);P(e,r),r=C(t.preposes),P(e,r)})),e}function S(t,e){return E.apply(this,arguments)}function E(){return(E=(0,i.Z)(f().mark((function t(e,r){var n,o;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],r.groups&&r.groups.forEach((function(t){var e=C(t.fields);P(n,e)})),o=O(r.actions),P(n,o),t.next=6,N(e,n);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function P(t,e){return e&&e.forEach((function(e){t.includes(e)||t.push(e)})),t}function j(t,e){return I.apply(this,arguments)}function I(){return(I=(0,i.Z)(f().mark((function t(e,r){var n,o;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],o=C(r.columns),P(n,o),o=C(r.criterias),P(n,o),t.next=7,N(e,n);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function R(t,e){return _.apply(this,arguments)}function _(){return(_=(0,i.Z)(f().mark((function t(e,r){var n,o;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],o=C(r.columns),P(n,o),o=C(r.criterias),P(n,o),o=C(r.drillingParams),P(n,o),o=C(r.reStatParams),P(n,o),o=O(r.actions),P(n,o),o=O(r.rowActions),P(n,o),t.next=15,N(e,n);case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function N(t,e,r){return T.apply(this,arguments)}function T(){return(T=(0,i.Z)(f().mark((function t(e,r,n){var o,i,c,u,l,h;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r&&r.length>0)){t.next=5;break}return t.next=3,a.Z.requestEnum(e,r,n);case 3:for(i in o=t.sent){c=o[i],u=s(c);try{for(u.s();!(l=u.n()).done;)(h=l.value).css&&(h.color=h.css.color)}catch(t){u.e(t)}finally{u.f()}m.set(i,c)}case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function D(){}D.loadEnumOfFields=function(){var t=(0,i.Z)(f().mark((function t(e,r){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=C(r),t.next=3,N(e,n);case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),D.loadEnumOfFieldsWithPath=function(){var t=(0,i.Z)(f().mark((function t(e,r,n){var o;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=C(r),t.next=3,N(e,o,n);case 3:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),D.getOptions=function(){var t=(0,i.Z)(f().mark((function t(e,r){var n,o,i,c;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return",null);case 2:if(m.has(r)){t.next=7;break}return t.next=5,a.Z.requestOptions(e,r)[r];case 5:if(null!=(n=t.sent)){o=s(n);try{for(o.s();!(i=o.n()).done;)(c=i.value).css&&(c.color=c.css.color)}catch(t){o.e(t)}finally{o.f()}m.set(r,n)}case 7:return t.abrupt("return",m.get(r));case 8:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),D.requestLtmplConfig=function(){var t=(0,i.Z)(f().mark((function t(e,r){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(w.has(r)){t.next=10;break}return t.t0=w,t.t1=r,t.next=5,a.Z.requestLtmplConfig(e,r);case 5:return t.t2=t.sent,t.t0.set.call(t.t0,t.t1,t.t2),n=w.get(r),t.next=10,R(e,n.ltmplConfig);case 10:return t.abrupt("return",w.get(r));case 11:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),D.requestL2LtmplConfig=function(){var t=(0,i.Z)(f().mark((function t(e,r){var n;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Z.has(r)){t.next=10;break}return t.t0=Z,t.t1=r,t.next=5,a.Z.requestL2LtmplConfig(e,r);case 5:return t.t2=t.sent,t.t0.set.call(t.t0,t.t1,t.t2),n=Z.get(r),t.next=10,R(e,n.ltmplConfig);case 10:return t.abrupt("return",Z.get(r));case 11:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),D.requestSelectConfig=function(){var t=(0,i.Z)(f().mark((function t(e,r){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(g.has(r)){t.next=9;break}return t.t0=g,t.t1=r,t.next=5,a.Z.requestSelectConfig(e,r);case 5:return t.t2=t.sent,t.t0.set.call(t.t0,t.t1,t.t2),t.next=9,j(e,g.get(r));case 9:return t.abrupt("return",g.get(r));case 10:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),D.requestDtmplConfig=function(){var t=(0,i.Z)(f().mark((function t(e,r){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(b.has(r)){t.next=9;break}return t.t0=b,t.t1=r,t.next=5,a.Z.requestDtmplConfig(e,r);case 5:return t.t2=t.sent,t.t0.set.call(t.t0,t.t1,t.t2),t.next=9,S(e,b.get(r));case 9:return t.abrupt("return",b.get(r));case 10:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),D.requestViewDtmplConfig=function(){var t=(0,i.Z)(f().mark((function t(e,r){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(x.has(r)){t.next=9;break}return t.t0=x,t.t1=r,t.next=5,a.Z.requestViewDtmplConfig(e,r);case 5:return t.t2=t.sent,t.t0.set.call(t.t0,t.t1,t.t2),t.next=9,S(e,x.get(r));case 9:return t.abrupt("return",x.get(r));case 10:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),D.requestAddDtmplConfig=function(){var t=(0,i.Z)(f().mark((function t(e,r){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(k.has(r)){t.next=9;break}return t.t0=k,t.t1=r,t.next=5,a.Z.requestAddDtmplConfig(e,r);case 5:return t.t2=t.sent,t.t0.set.call(t.t0,t.t1,t.t2),t.next=9,S(e,k.get(r));case 9:return t.abrupt("return",k.get(r));case 10:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),D.getEnums=function(t){return m.get(t)},D.getEnumOption=function(t,e){if(!e)return null;var r=this.getEnums(t),n=void 0;return r&&r.forEach((function(t){t.value!==e||(n=t)})),n},D.getEnumValueColor=function(t,e){var r=D.getEnumOption(t,e);return r?r.color:void 0},D.requestBlocks=function(){var t=(0,i.Z)(f().mark((function t(e,r){var n,o,i,c,u;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(p.length<1)){t.next=10;break}return t.next=3,a.Z.requestBlocks(e||void 0,r||void 0);case 3:o=t.sent,i=s(o.blocks);try{for(i.s();!(c=i.n()).done;)u=c.value,p.push(u)}catch(t){i.e(t)}finally{i.f()}h=o.programName,n={blocks:o.blocks,l2MenuId:o.l2MenuId,blockId:o.blockId,programName:o.programName},t.next=11;break;case 10:n={blocks:p,blockId:r,l2MenuId:e,programName:h};case 11:return t.abrupt("return",n);case 12:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),D.quickEntranceMenus=(0,i.Z)(f().mark((function t(){var e;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(d.length<1)){t.next=5;break}return t.next=3,a.Z.requestFaceplate_menu();case 3:(e=t.sent)&&(d.splice(0,d.length),d.push.apply(d,(0,o.Z)(e)));case 5:return t.abrupt("return",[].concat(d));case 6:case"end":return t.stop()}}),t)}))),D.messageMenus=(0,i.Z)(f().mark((function t(){var e;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(v.length<1)){t.next=5;break}return t.next=3,a.Z.requestMessagebar();case 3:(e=t.sent)&&v.push.apply(v,(0,o.Z)(e));case 5:return t.abrupt("return",[].concat(v));case 6:case"end":return t.stop()}}),t)}))),D.workbenchMenus=(0,i.Z)(f().mark((function t(){var e;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(y.length<1)){t.next=5;break}return t.next=3,a.Z.requestFaceplateStatistic_menu();case 3:(e=t.sent)&&y.push.apply(y,(0,o.Z)(e));case 5:return t.abrupt("return",[].concat(y));case 6:case"end":return t.stop()}}),t)}))),D.reload=function(){var t=(0,i.Z)(f().mark((function t(e){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.Z.reload();case 2:if("success"==t.sent.status){t.next=5;break}return t.abrupt("return");case 5:this.clear(),u.ZP.success("执行成功");case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),D.cache=function(t){t&&L.set(t.code,t)},D.getFromCache=function(t){return L.get(t)},D.clear=(0,i.Z)(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:m.clear(),w.clear(),b.clear(),x.clear(),k.clear(),g.clear(),Z.clear(),p.splice(0,p.length),d.splice(0,d.length),v.splice(0,d.length),y.splice(0,y.length),L.clear();case 12:case"end":return t.stop()}}),t)}))),e.Z=D},49811:function(t,e,r){"use strict";r.d(e,{Z:function(){return L}});var n=r(32763),o=r(15274),i=r(59755),a=r(90237),c=r(65337),u=r(94716),s=r(38763),l=r(32823),f=r(81354),h=r.n(f),p=r(56084),d=function(){function t(){(0,a.Z)(this,t)}return(0,c.Z)(t,null,[{key:"aesEncrypt",value:function(t,e){e=e||"kuangkie";var r=h().enc.Utf8.parse(e),n=h().enc.Utf8.parse(t);return h().AES.encrypt(n,r,{mode:h().mode.ECB,padding:h().pad.Pkcs7}).toString()}},{key:"aesDecrypt",value:function(t,e){var r=e||"kuangkie",n=h().enc.Utf8.parse(r),o=h().AES.decrypt(t,n,{mode:h().mode.ECB,padding:h().pad.Pkcs7});return h().enc.Utf8.stringify(o).toString()}},{key:"rsaEncrypt",value:function(t,e){var r=new p.Z;return r.setPublicKey(e),r.encrypt(t)}},{key:"rsaDecrypt",value:function(t,e){var r=new p.Z;return r.setPrivateKey(e),r.decrypt(t)}}]),t}(),v=r(27484),y=r.n(v),m=r(49073),g=r(5301);function w(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Z(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Z(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Z(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function b(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function x(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(Object(r),!0).forEach((function(e){(0,o.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function k(){k=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof p?e:p,a=Object.create(i.prototype),c=new S(n||[]);return o(a,"_invoke",{value:x(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h={};function p(){}function d(){}function v(){}var y={};s(y,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(E([])));g&&g!==e&&r.call(g,a)&&(y=g);var w=v.prototype=p.prototype=Object.create(y);function Z(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function i(o,a,c,u){var s=f(t[o],t,a);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"==(0,n.Z)(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,c,u)}),(function(t){i("throw",t,c,u)})):e.resolve(h).then((function(t){l.value=t,c(l)}),(function(t){return i("throw",t,c,u)}))}u(s.arg)}var a;o(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function x(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=L(a,r);if(c){if(c===h)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=f(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function L(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,L(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=f(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return d.prototype=v,o(w,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,s(t,u,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},Z(b.prototype),s(b.prototype,c,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},Z(w),s(w,u,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=E,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}var L=function(){function t(){(0,a.Z)(this,t)}var e,r,o,f,h,p,v,Z,b,L,C,O,S,E,P,j,I,R,_,N,T,D,A,F,G,M,B,K,q,V,H,Y,z,U,W,Q,$,J,X,tt,et,rt,nt,ot,it,at,ct,ut,st,lt,ft;return(0,c.Z)(t,null,[{key:"requestEnum",value:(ft=(0,i.Z)(k().mark((function t(e,r,n){return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=6;break}return t.next=3,this.requestEnumWithPath(e,r,"/enum");case 3:case 8:return t.abrupt("return",t.sent);case 6:return t.next=8,this.requestEnumWithPath(e,r,n);case 9:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return ft.apply(this,arguments)})},{key:"requestEnumWithPath",value:(lt=(0,i.Z)(k().mark((function t(e,r,n){var o;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r.length>0)){t.next=7;break}return t.next=3,s.Z.super({url:u.Z.joinPath("/v3",n),serverKey:e,query:{mstrucIds:r}});case 3:return o=t.sent,t.abrupt("return",o.enumMap);case 7:return t.abrupt("return",{});case 8:case"end":return t.stop()}}),t)}))),function(t,e,r){return lt.apply(this,arguments)})},{key:"requestOptions",value:(st=(0,i.Z)(k().mark((function t(e,r){return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.requestEnum(e,[r],null);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(t,e){return st.apply(this,arguments)})},{key:"requestDtmplConfig",value:(ut=(0,i.Z)(k().mark((function t(e,r){var n;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,s.Z.super({url:"/v3/dtmpl/config",serverKey:e,method:"GET",query:{sourceId:r}});case 3:return n=t.sent,t.abrupt("return",n.dtmplConfig);case 5:case"end":return t.stop()}}),t)}))),function(t,e){return ut.apply(this,arguments)})},{key:"requestViewDtmplConfig",value:(ct=(0,i.Z)(k().mark((function t(e,r){var n;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,s.Z.super({url:"/v3/view-dtmpl/config",serverKey:e,method:"GET",query:{sourceId:r}});case 3:return n=t.sent,t.abrupt("return",n.dtmplConfig);case 5:case"end":return t.stop()}}),t)}))),function(t,e){return ct.apply(this,arguments)})},{key:"requestAddDtmplConfig",value:(at=(0,i.Z)(k().mark((function t(e,r){var n;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,s.Z.super({url:"/v3/add-dtmpl/config",serverKey:e,method:"GET",query:{sourceId:r}});case 3:return n=t.sent,t.abrupt("return",n.dtmplConfig);case 5:case"end":return t.stop()}}),t)}))),function(t,e){return at.apply(this,arguments)})},{key:"requestSelectConfig",value:(it=(0,i.Z)(k().mark((function t(e,r){var n;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,s.Z.super({url:"/v3/select/config",serverKey:e,method:"GET",query:{sourceId:r}});case 3:return n=t.sent,t.abrupt("return",n.selectConfig);case 5:case"end":return t.stop()}}),t)}))),function(t,e){return it.apply(this,arguments)})},{key:"requestLtmplConfig",value:(ot=(0,i.Z)(k().mark((function t(e,r){var n;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,s.Z.super({url:"/v3/ltmpl/config",serverKey:e,method:"GET",query:{sourceId:r}});case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)}))),function(t,e){return ot.apply(this,arguments)})},{key:"requestL2LtmplConfig",value:(nt=(0,i.Z)(k().mark((function t(e,r){var n;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,s.Z.super({url:"/v3/l2/ltmpl/config",serverKey:e,method:"GET",query:{sourceId:r}});case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)}))),function(t,e){return nt.apply(this,arguments)})},{key:"requestLtmplQueryKey",value:(rt=(0,i.Z)(k().mark((function t(e,r,n){var o;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,s.Z.super({url:"/v3/ltmpl/query/key",serverKey:e,method:"GET",query:x(x({},n),{},{sourceId:r})});case 3:return o=t.sent,t.abrupt("return",o);case 5:case"end":return t.stop()}}),t)}))),function(t,e,r){return rt.apply(this,arguments)})},{key:"requestLtmplQueryTop",value:(et=(0,i.Z)(k().mark((function t(e,r,n){return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,this.requestCommonLtmplQueryTop(e,r,n,"/v3/ltmpl/top-data");case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return et.apply(this,arguments)})},{key:"requestMstrucLtmplQueryTop",value:(tt=(0,i.Z)(k().mark((function t(e,r,n){return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,this.requestCommonLtmplQueryTop(e,r,n,"/v3/mstruc/ltmpl/top-data");case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return tt.apply(this,arguments)})},{key:"queryTop1",value:(X=(0,i.Z)(k().mark((function t(e,r){var n,o;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.requestMstrucLtmplQueryTop(e,r,{top:1});case 2:return n=t.sent,o=null,n&&n.entities&&n.entities[0]&&(o=n.entities[0].code),t.abrupt("return",o);case 6:case"end":return t.stop()}}),t,this)}))),function(t,e){return X.apply(this,arguments)})},{key:"requestCommonLtmplQueryTop",value:(J=(0,i.Z)(k().mark((function t(e,r,n,o){var i;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.Z.super({url:o,serverKey:e,method:"GET",query:x(x({},n),{},{sourceId:r})});case 2:return i=t.sent,t.abrupt("return",i);case 4:case"end":return t.stop()}}),t)}))),function(t,e,r,n){return J.apply(this,arguments)})},{key:"requestSelectedData",value:($=(0,i.Z)(k().mark((function t(e,r,n){var o;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=3;break}return l.ZP.warning("没有选择实体"),t.abrupt("return",null);case 3:return t.next=6,s.Z.super({url:"/v3/field-group/data/selected",serverKey:e,query:{codes:n,sourceId:r},method:"GET"});case 6:if("success"!==(o=t.sent).status){t.next=11;break}return t.abrupt("return",o.entities);case 11:return l.ZP.error("没有找到实体！"),t.abrupt("return",null);case 13:case"end":return t.stop()}}),t)}))),function(t,e,r){return $.apply(this,arguments)})},{key:"requestVersionList",value:(Q=(0,i.Z)(k().mark((function t(e,r,n){var o;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.Z.super({url:"/v3/dtmpl/data/versions",serverKey:e,query:{pageNo:1,sourceId:r,code:n},method:"GET"});case 2:return o=t.sent,t.abrupt("return",o.versions);case 4:case"end":return t.stop()}}),t)}))),function(t,e,r){return Q.apply(this,arguments)})},{key:"requestCommonDtmplData",value:(W=(0,i.Z)(k().mark((function t(e,r,n,o,i){var a;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.Z.super({url:i,serverKey:e,query:{code:n,versionId:o,sourceId:r},method:"GET"});case 2:if("success"!==(a=t.sent).status){t.next=7;break}return t.abrupt("return",a.entity);case 7:return l.ZP.error("实体不存在！"),t.abrupt("return",null);case 9:case"end":return t.stop()}}),t)}))),function(t,e,r,n,o){return W.apply(this,arguments)})},{key:"requestDtmplData",value:(U=(0,i.Z)(k().mark((function t(e,r,n,o){return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,this.requestCommonDtmplData(e,r,n,o,"/v3/dtmpl/data");case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)}))),function(t,e,r,n){return U.apply(this,arguments)})},{key:"requestMstrucDtmplData",value:(z=(0,i.Z)(k().mark((function t(e,r,n,o){return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,this.requestCommonDtmplData(e,r,n,o,"/v3/mstruc/dtmpl/data");case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)}))),function(t,e,r,n){return z.apply(this,arguments)})},{key:"requestViewDtmplData",value:(Y=(0,i.Z)(k().mark((function t(e,r,n,o){return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,this.requestCommonDtmplData(e,r,n,o,"/v3/view-dtmpl/data");case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)}))),function(t,e,r,n){return Y.apply(this,arguments)})},{key:"requestMstrucViewDtmplData",value:(H=(0,i.Z)(k().mark((function t(e,r,n,o){return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,this.requestCommonDtmplData(e,r,n,o,"/v3/mstruc/view-dtmpl/data");case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)}))),function(t,e,r,n){return H.apply(this,arguments)})},{key:"postCommonDtmplData",value:(V=(0,i.Z)(k().mark((function t(e,r,n,o,i){var a,c,u,l;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(c in a=new FormData,n)c.startsWith("$virtual")||a.append(c,n[c]||0==n[c]?n[c]:"");return a.append("sourceId",r.toString()),t.next=5,s.Z.super({url:i,serverKey:e,data:a,method:"POST"},"formdata");case 5:return u=t.sent,l=null,u?"success"===u.status&&(o&&(u.message?o.warning("保存成功! "+u.message,4):o.success("保存成功! ",1)),l=u.entityCode?u.entityCode:u.code):o&&o.error("保存失败"),t.abrupt("return",{code:l,status:u?u.status:"error"});case 9:case"end":return t.stop()}}),t)}))),function(t,e,r,n,o){return V.apply(this,arguments)})},{key:"postDtmplData",value:(q=(0,i.Z)(k().mark((function t(e,r,n,o){return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,this.postCommonDtmplData(e,r,n,o,"/v3/dtmpl/data");case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)}))),function(t,e,r,n){return q.apply(this,arguments)})},{key:"postMstrucDtmplData",value:(K=(0,i.Z)(k().mark((function t(e,r,n,o){return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,this.postCommonDtmplData(e,r,n,o,"/v3/mstruc/dtmpl/data");case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)}))),function(t,e,r,n){return K.apply(this,arguments)})},{key:"postFileAction",value:function(t,e){return u.Z.joinPath(u.Z.api(t),"/v3/upload")}},{key:"requestL2LtmplQueryKey",value:(B=(0,i.Z)(k().mark((function t(e,r,n){var o;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,s.Z.super({url:"v3/l2/ltmpl/query/key",serverKey:e,method:"GET",query:x(x({},n),{},{sourceId:r})});case 3:return o=t.sent,t.abrupt("return",o);case 5:case"end":return t.stop()}}),t)}))),function(t,e,r){return B.apply(this,arguments)})},{key:"requestLtmplCount",value:(M=(0,i.Z)(k().mark((function t(e,r){var n;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,s.Z.super({url:"/v3/ltmpl/data/count",serverKey:e,query:{sourceId:r},method:"GET"});case 3:return n=t.sent,t.abrupt("return",n.count);case 5:case"end":return t.stop()}}),t)}))),function(t,e){return M.apply(this,arguments)})},{key:"requestQueryData",value:(G=(0,i.Z)(k().mark((function t(e,r,n){var o;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.Z.super({url:"/v3/ltmpl/query/data",serverKey:e,method:"GET",query:x({queryKey:r},n)});case 2:return o=t.sent,t.abrupt("return",o);case 4:case"end":return t.stop()}}),t)}))),function(t,e,r){return G.apply(this,arguments)})},{key:"getCodesOfSelectedRows",value:function(t){var e=[];if(t&&!(t.length<1)){var r,n=w(t);try{for(n.s();!(r=n.n()).done;){var o=r.value;o.code?e.push(o.code):l.ZP.error("没找到所选数据的Code！！")}}catch(t){n.e(t)}finally{n.f()}return e.length<1&&l.ZP.error("没找到所选数据的Code！！"),e}}},{key:"deleteData",value:(F=(0,i.Z)(k().mark((function t(e,r,n){var o;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=this.getCodesOfSelectedRows(n),t.next=3,this.deleteByCode(e,r,o);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return F.apply(this,arguments)})},{key:"deleteByCode",value:(A=(0,i.Z)(k().mark((function t(e,r,n){return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.Z.super({url:"/v3/ltmpl/data",serverKey:e,data:{codes:n,sourceId:r},method:"DELETE"});case 2:if("success"!=t.sent.status){t.next=8;break}return l.ZP.success("删除成功",1),t.abrupt("return",!0);case 8:return l.ZP.error("删除失败"),t.abrupt("return",!1);case 10:case"end":return t.stop()}}),t)}))),function(t,e,r){return A.apply(this,arguments)})},{key:"requestQueryCount",value:(D=(0,i.Z)(k().mark((function t(e,r){var n;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.Z.super({url:"/v3/ltmpl/query/count",serverKey:e,method:"GET",query:{queryKey:r}});case 2:return n=t.sent,t.abrupt("return",n.count);case 4:case"end":return t.stop()}}),t)}))),function(t,e){return D.apply(this,arguments)})},{key:"postActions",value:(T=(0,i.Z)(k().mark((function t(e,r,n,o){var i,a,c,u;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(c in i=this.getCodesOfSelectedRows(n),a=new FormData,o)a.append(c,o[c]?o[c]:"");return a.append("sourceId",r.toString()),a.append("codes",i.join(",")),t.next=7,s.Z.super({url:"/v3/action",serverKey:e,data:a,method:"POST"},"formdata",null);case 7:return u=t.sent,t.abrupt("return",u);case 9:case"end":return t.stop()}}),t,this)}))),function(t,e,r,n){return T.apply(this,arguments)})},{key:"increCalc",value:(N=(0,i.Z)(k().mark((function t(e,r){var n,o,i=arguments;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:{},t.next=3,s.Z.super({url:"/v3/stat/increcalc",serverKey:e,method:"POST",data:x(x({},n),{},{sourceId:r})});case 3:return"success"===(o=t.sent).status?l.ZP.success("统计成功",1):l.ZP.error("统计失败"),t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)}))),function(t,e){return N.apply(this,arguments)})},{key:"doCopy",value:(_=(0,i.Z)(k().mark((function t(e,r,n,o,i){var a;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.Z.super({url:"/v3/mstruc/copy-data",serverKey:e,method:"POST",query:{sourceId:r,code:n,copyRelation:o,copyOpp2One:i}},null,null);case 2:return"success"!=(a=t.sent).status&&l.ZP.error("错误消息："+a.message,4),t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)}))),function(t,e,r,n,o){return _.apply(this,arguments)})},{key:"queryCode",value:(R=(0,i.Z)(k().mark((function t(e,r,n){var o;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=void 0,!r){t.next=16;break}if("listop"!=r){t.next=9;break}return t.next=5,this.queryTop1(n,e);case 5:(o=t.sent)||(o="bad-code"),t.next=16;break;case 9:if("listop-new"!=r){t.next=15;break}return t.next=12,this.queryTop1(n,e);case 12:o=t.sent,t.next=16;break;case 15:"new"==r&&(o=null);case 16:return t.abrupt("return",o);case 17:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return R.apply(this,arguments)})},{key:"download",value:function(t,e){var r=e.split("/"),n=r[r.length-1];u.Z.downloadFile(this.getFileUrl(t,e)+"&disposition=attachment",n)}},{key:"openfile",value:function(t,e,r){var n=e.split("/"),o=n[n.length-1];u.Z.openFile(this.getFileUrl(t,e),o,r)}},{key:"getFileUrl",value:function(t,e){var r=u.Z.hydrocarbonToken();return u.Z.joinPath(u.Z.api(t),u.Z.joinPath("/v3/files",e))+"?@token=".concat(r,"&@programToken=").concat(u.Z.programCode())}},{key:"getFileTxtUrl",value:function(t,e){var r=u.Z.hydrocarbonToken();return u.Z.joinPath(u.Z.api(t),u.Z.joinPath("/v3/files/text",e))+"?@token=".concat(r,"&@programToken=").concat(u.Z.programCode())}},{key:"loadFileTxt",value:(I=(0,i.Z)(k().mark((function t(e,r){var n;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.Z.super({url:u.Z.joinPath("/v3/files/text",r),serverKey:e,method:"GET"});case 2:return n=t.sent,t.abrupt("return",n.text);case 4:case"end":return t.stop()}}),t)}))),function(t,e){return I.apply(this,arguments)})},{key:"requestFaceplate_menu",value:(j=(0,i.Z)(k().mark((function t(){var e;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,s.Z.super({url:"/v3/menu/faceplate",method:"GET"});case 3:return e=t.sent,t.abrupt("return",e.l2Menus);case 5:case"end":return t.stop()}}),t)}))),function(){return j.apply(this,arguments)})},{key:"requestFaceplateStatistic_menu",value:(P=(0,i.Z)(k().mark((function t(){var e;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,s.Z.super({url:"/v3/menu/faceplate-statistic",method:"GET"});case 3:return e=t.sent,t.abrupt("return",e.l2Menus);case 5:case"end":return t.stop()}}),t)}))),function(){return P.apply(this,arguments)})},{key:"requestBlocks",value:(E=(0,i.Z)(k().mark((function t(e,r){var n;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,s.Z.super({url:"/v3/menu/blocks",method:"GET",query:{l2MenuId:e,blockId:r}});case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)}))),function(t,e){return E.apply(this,arguments)})},{key:"logout",value:(S=(0,i.Z)(k().mark((function t(){return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s.Z.super({url:"/v3/auth/token",method:"DELETE"}).then((function(t){u.Z.toLogin()}));case 1:case"end":return t.stop()}}),t)}))),function(){return S.apply(this,arguments)})},{key:"resetPassword",value:(O=(0,i.Z)(k().mark((function t(e,r,n,o){var i,a,c;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=d.rsaEncrypt(r,o),a=d.rsaEncrypt(n,o),t.next=4,s.Z.super({url:"/v3/auth/password",serverKey:e,query:{oldPassword:i,newPassword:a},method:"POST"});case 4:return c=t.sent,t.abrupt("return",c);case 6:case"end":return t.stop()}}),t)}))),function(t,e,r,n){return O.apply(this,arguments)})},{key:"getContextSourceConfig",value:(C=(0,i.Z)(k().mark((function t(){var e;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.Z.super({url:"/v3/context-source-config",method:"GET"});case 2:if(!(e=t.sent)){t.next=7;break}return t.abrupt("return",e.config);case 7:return t.abrupt("return",null);case 8:case"end":return t.stop()}}),t)}))),function(){return C.apply(this,arguments)})},{key:"getContextSourceValue",value:(L=(0,i.Z)(k().mark((function t(){var e;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.Z.super({url:"/v3/auth/context-source-value",method:"GET"});case 2:return e=t.sent,t.abrupt("return",e.value);case 4:case"end":return t.stop()}}),t)}))),function(){return L.apply(this,arguments)})},{key:"login",value:(b=(0,i.Z)(k().mark((function t(e,r,n,o){var i,a,c;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=y()(new Date).format("YYYY-MM-DD HH:mm:ss"),e.datetime=i,a=d.rsaEncrypt(JSON.stringify(e),o),t.next=5,s.Z.super({url:"/v3/auth/hctoken",query:{userInfo:a,kaptchaToken:r,kaptchaText:n},method:"GET"});case 5:return"success"===(c=t.sent).status&&(m.Z.clear(),window.location.hash="#/context-setter",u.Z.setHydrocarbonToken(c.token)),t.abrupt("return",c);case 8:case"end":return t.stop()}}),t)}))),function(t,e,r,n){return b.apply(this,arguments)})},{key:"setContext",value:(Z=(0,i.Z)(k().mark((function t(e){var r,n;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=new FormData).append("context",JSON.stringify(e)),t.next=4,s.Z.super({url:"/v3/auth/context",data:r,method:"POST"},"formdata");case 4:return"success"===(n=t.sent).status&&(window.location.hash="#/home"),t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)}))),function(t){return Z.apply(this,arguments)})},{key:"getKaptchaToken",value:(v=(0,i.Z)(k().mark((function t(){var e;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.Z.super({url:"/v3/auth/kaptcha",method:"POST"});case 2:if("success"!==(e=t.sent).status){t.next=7;break}return t.abrupt("return",e);case 7:return t.abrupt("return",null);case 8:case"end":return t.stop()}}),t)}))),function(){return v.apply(this,arguments)})},{key:"getRasPubkey",value:(p=(0,i.Z)(k().mark((function t(e){var r;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.Z.super({url:"/v3/auth/ras-pubkey",serverKey:e,method:"GET"});case 2:if("success"!==(r=t.sent).status){t.next=7;break}return t.abrupt("return",r.rasPubkey);case 7:return t.abrupt("return",null);case 8:case"end":return t.stop()}}),t)}))),function(t){return p.apply(this,arguments)})},{key:"getUser",value:(h=(0,i.Z)(k().mark((function t(){var e;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.Z.super({url:"/v3/current-user"});case 2:return e=t.sent,t.abrupt("return",e.user);case 4:case"end":return t.stop()}}),t)}))),function(){return h.apply(this,arguments)})},{key:"requestMessagebar",value:(f=(0,i.Z)(k().mark((function t(){var e;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,s.Z.super({url:"/v3/menu/messagebar",method:"GET"});case 3:return e=t.sent,t.abrupt("return",e.l2Menus);case 5:case"end":return t.stop()}}),t)}))),function(){return f.apply(this,arguments)})},{key:"requestSimpleCharts",value:(o=(0,i.Z)(k().mark((function t(){var e;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,s.Z.super({url:"/v3/menu/simple-charts",method:"GET"});case 3:return e=t.sent,t.abrupt("return",e.l2Menus);case 5:case"end":return t.stop()}}),t)}))),function(){return o.apply(this,arguments)})},{key:"reload",value:(r=(0,i.Z)(k().mark((function t(){var e;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,s.Z.super({url:"/v3/tmpl/reload",method:"GET"});case 3:return e=t.sent,t.abrupt("return",e);case 5:case"end":return t.stop()}}),t)}))),function(){return r.apply(this,arguments)})},{key:"initProgramConfig",value:(e=(0,i.Z)(k().mark((function t(e){var r,o,i,a,c,u;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.programCode&&g.cB.setProgramCode(e.programCode),e.hydrocarbonServer&&g.cB.setHydrocarbonServer(e.hydrocarbonServer),e.extendServer&&(r=e.extendServer,"object"==(0,n.Z)(r))){o=[],Array.isArray(r)?o=r:o.push(r),i=w(o);try{for(i.s();!(a=i.n()).done;)(c=a.value).key&&c.hydrocarbonServer&&(g.cB.setProgramCode(c.programCode,c.key),g.cB.setHydrocarbonServer(c.hydrocarbonServer,c.key))}catch(t){i.e(t)}finally{i.f()}}return g.cB.setProgramName(e.programName),g.cB.setProgramName_sub(e.programName_sub),g.cB.setProgramName_NavLeft(e.programName_NavLeft),g.cB.setProgramName_Logo(e.programName_Logo),t.next=9,s.Z.getProramConfig();case 9:(u=t.sent)&&(console.log("result",u),g.cB.setProgramCode(u.programCode),g.cB.setHydrocarbonServer(u.hydrocarbonServer),g.cB.setProgramName(u.programName),g.cB.setProgramName_sub(u.programName_NavLeft),g.cB.setProgramName_NavLeft(u.programName_NavLeft),g.cB.setProgramName_Logo(u.programName_Logo));case 11:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)})}]),t}()},38763:function(t,e,r){"use strict";r.d(e,{Z:function(){return s}});var n=r(90237),o=r(65337),i=r(80569),a=r.n(i),c=r(32823),u=r(94716),s=function(){function t(){(0,n.Z)(this,t)}return(0,o.Z)(t,null,[{key:"super",value:function(t,e,r){var n=u.Z.hydrocarbonToken()?u.Z.hydrocarbonToken():t.header&&t.header.hydrocarbonToken?t.header.hydrocarbonToken:u.Z.getAnoHydrocarbonToken(),o=t.serverKey,i=u.Z.programCode(o);t.data&&!1!==t.data.isShowLoading&&(document.getElementById("ajaxLoading").style.display=r||"block");var s="form";"formdata"===e?s=null:"json"===e&&(s="application/json");var l=t.method?t.method:"POST";return new Promise((function(e,r){var f=t.hydrocarbonServer?t.hydrocarbonServer:u.Z.api(o);a()(l,u.Z.joinPath(f,t.url)).type(s).set("hydrocarbon-token",n).set("hydrocarbon-program-token",i).query(t.query||"").send(t.data).end((function(n,o){if(o)if(t.data&&!1!==t.data.isShowLoading&&(document.getElementById("ajaxLoading").style.display="none"),200===o.status){var i=o.body;i&&"error"===i.status&&c.ZP.error("错误消息："+i.message,6),e(i)}else 201===o.status?e(o):403===o.status?u.Z.toLogin():405===o.status||406===o.status?(c.ZP.error("权限不足"),e(o)):404===o.status||504===o.status?(console.log("没找到服务("+t.url+")",5),e(o)):500===o.status?(c.ZP.error("后台处理错误("+o.text+")",5),e(o)):(c.ZP.error("请求服务失败!("+t.url+")",5),r(o.body));else c.ZP.error("服务器连接失败"),e(null)}))}))}},{key:"getProramConfig",value:function(){return new Promise((function(t,e){a().get("programConfig.json").end((function(r,n){n?200===n.status?t(n.body):e(n.body):e()}))})).catch((function(t){console.log(t)}))}},{key:"getHeaderObj",value:function(){return{"hydrocarbon-token":u.Z.hydrocarbonToken()?u.Z.hydrocarbonToken():u.Z.getAnoHydrocarbonToken(),"hydrocarbon-program-token":u.Z.programCode()}}}]),t}()},94716:function(t,e,r){"use strict";r.d(e,{Z:function(){return y}});var n=r(32763),o=r(27484),i=r.n(o);function a(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function u(){}u.current=function(t,e){var r=e;if(r||(r="YYYY-MM-DD HH:mm:ss SSS"),!t)return null;var n=[t];t.includes("~")&&(n=t.split("~"));var o=[];for(var i in n){var a=this.currentL1(n[i],r);o[i]=a||""}return 1==n.length?o[0]:o[0]+"~"+o[1]},u.currentL1=function(t,e){if(!t)return null;var r=new RegExp("current:?([-,+]?)([0-9]*)([D,M,Y,m,s,h]?)").exec(t);if(r){var n=r[3];if(""==n)return i()().format(e);var o=r[1];""==o&&(o="+");var a=r[2];""==a&&(a="1");var c=parseInt(a),u="days";switch(n){case"D":u="days";break;case"M":u="months";break;case"Y":u="years";break;case"W":u="weeks";break;case"h":u="hours";break;case"m":u="minutes";break;case"s":u="seconds"}return"-"==o?i()().subtract(c,u).format(e):i()().add(c,u).format(e)}return null},u.getFieldValueTitleOfMstrucId=function(t,e,r,n){var o=u.getFieldId(t,r),i=e&&e[o];return i?("null"==(i=i.indexOf("@R@")>0?e[o].split("@R@")[1]:e[o])&&(i=null),i):n},u.getFieldValueCodeOfMstrucId=function(t,e,r,n){var o=u.getFieldId(t,r),i=e&&e[o];if(!i)return n;if(i instanceof Array){var a=[];i.forEach((function(t){a.push(t.indexOf("@R@")>0?t.split("@R@")[0]:t)})),i=a.toString()}else i=i.indexOf("@R@")>0?i.split("@R@")[0]:i;return i},u.getFieldValueOfMstrucId=function(t,e,r,n){var o=u.getFieldId(t,r),i=e&&e[o];return i?i=i instanceof Array?i.toString():e[o]:n},u.getFieldId=function(t,e){var r=void 0,n=t.groups;if(null!=n){var o,i=a(n);try{for(i.s();!(o=i.n()).done;){var c,u=a(o.value.fields);try{for(u.s();!(c=u.n()).done;){var s=c.value;if(s.mstrucId==e){r=s.id;break}}}catch(t){u.e(t)}finally{u.f()}if(r)break}}catch(t){i.e(t)}finally{i.f()}}else{var l=t.columns;if(null!=l){var f,h=a(l);try{for(h.s();!(f=h.n()).done;){var p=f.value;if(p.mstrucId==e){r=p.id;break}}}catch(t){h.e(t)}finally{h.f()}}}return r},u.getRelMstrucFieldId=function(t,e,r){var n=u.getFieldId(t,r);return e&&e[n]?e[n].split("@R@")[0]:void 0};var s=u,l=void 0,f={},h={},p={},d={},v=void 0,y={setAntdUseToken:function(t){v=t},getAntdUseToken:function(){return v},setAppDtmplConfigFunc:function(t,e){p[t]=e},getAppDtmplConfig:function(t,e,r){return t&&p[t.id]?p[t.id](t,e,r):t},isDynamicDtmplConfig:function(t){return!(!t||!p[t.id])},setCustomPage:function(t,e){var r=t;r.startsWith("/")||(r="/"+r),f[r]=e},setCustomControl:function(t,e,r){var n=t;n.startsWith("/")||(n="/"+n),h[n]=e,d[n]=r},getCustomViewControl:function(t){return t?t.startsWith("/")?h[t]:h["/"+t]:null},getCustomEditControl:function(t){return t?t.startsWith("/")?d[t]:d["/"+t]:null},getCustomPage:function(t){return t?t.startsWith("/")?f[t]:f["/"+t]:null},setProgramCode:function(t,e){t&&(e?window.localStorage.setItem(e+"programCode",t):(window.localStorage.setItem("programCode",t),window.sessionStorage.setItem("programCode",t)))},setSessionProgramCode:function(t){t&&window.sessionStorage.setItem("programCode",t)},programCode:function(t){var e=null;return(e=t?window.localStorage.getItem(t+"programCode"):window.sessionStorage.getItem("programCode"))||(e=window.localStorage.getItem("programCode"),this.setSessionProgramCode(e)),e},setHydrocarbonServer:function(t,e){e?window.localStorage.setItem(e+"hydrocarbonServer",t):this.programCode()?window.localStorage.setItem(this.programCode()+"hydrocarbonServer",t):window.localStorage.setItem("hydrocarbonServer",t)},setProgramName_Logo:function(t){this.programCode()?window.localStorage.setItem(this.programCode()+"programName_Logo",t):window.localStorage.setItem("programName_Logo",t)},api:function(t){var e=null;if((e=t?window.localStorage.getItem(t+"hydrocarbonServer"):window.localStorage.getItem(this.programCode()+"hydrocarbonServer"))||(e=window.localStorage.getItem("hydrocarbonServer")),e)if("/"==e){var r=new URL(window.location.href),n=r.pathname.split("/kuangkie")[0];e=this.joinPath(r.origin,n)}else e.startsWith("http")||(e=this.joinPath(new URL(window.location.href).origin,e));else{var o=new URL(window.location.href),i=null;o.pathname.indexOf("/kuangkie")>0&&(i=o.pathname.split("/kuangkie")[0]),e=this.joinPath(o.origin,i)}return e},hydrocarbonToken:function(){var t=window.sessionStorage.getItem(this.programCode()+"hydrocarbonToken");return t||(t=window.sessionStorage.getItem("hydrocarbonToken")),t||((t=window.localStorage.getItem(this.programCode()+"hydrocarbonToken"))||(t=window.sessionStorage.getItem("hydrocarbonToken")),this.setSessionHydrocarbonToken(t)),t},setHydrocarbonToken:function(t){this.programCode()?(window.sessionStorage.setItem(this.programCode()+"hydrocarbonToken",t),window.localStorage.setItem(this.programCode()+"hydrocarbonToken",t)):(window.sessionStorage.setItem("hydrocarbonToken",t),window.localStorage.setItem("hydrocarbonToken",t))},setSessionHydrocarbonToken:function(t){this.programCode()?window.sessionStorage.setItem(this.programCode()+"hydrocarbonToken",t):window.sessionStorage.setItem("hydrocarbonToken",t)},setProgramName:function(t){this.programCode()?window.localStorage.setItem(this.programCode()+"programName",t):window.localStorage.setItem("programName",t)},programName:function(){return this.programCode()?window.localStorage.getItem(this.programCode()+"programName"):window.localStorage.getItem("programName")},setProgramName_sub:function(t){this.programCode()?window.localStorage.setItem(this.programCode()+"programName_sub",t):window.localStorage.setItem("programName_sub",t)},programName_sub:function(){return this.programCode()?window.localStorage.getItem(this.programCode()+"programName_sub"):window.localStorage.getItem("programName_sub")},setProgramName_NavLeft:function(t){this.programCode()?window.localStorage.setItem(this.programCode()+"programName_NavLeft",t):window.localStorage.setItem("programName_NavLeft",t)},programName_NavLeft:function(){var t;return this.programCode()&&(t=window.localStorage.getItem(this.programCode()+"programName_NavLeft")),t||(t=window.localStorage.getItem("programName_NavLeft")),t||"旷识科技"},programName_Logo:function(){var t=null;return this.programCode()&&(t=window.localStorage.getItem(this.programCode()+"programName_Logo")),t||(t=window.localStorage.getItem("programName_Logo")),t},formateDate:function(t){return t?i()(new Date(t)).format("YYYY-MM-DD HH:mm:ss"):""},dateToString:function(t){var e=t.getFullYear(),r=(t.getMonth()+1).toString(),n=t.getDate().toString();return 1===r.length&&(r="0"+r),1===n.length&&(n="0"+n),e+"-"+r+"-"+n},pagination:function(t,e){return{onchange:function(t){e(t)},current:t.pageInfo.pageNo,pageSize:t.pageInfo.pageSize,total:t.pageInfo.count,showTotal:function(){return"共".concat(t.pageInfo.count,"条")},showQuickIumper:!0}},openFile:function(t,e,r){try{var n=document.createElement("a");n.href=t+r,n.target="_blank",document.body.appendChild(n),n.click(),document.body.removeChild(n)}catch(t){console.log(t)}},toLogin:function(){var t=this.programCode();window.location.hash=t&&"null"!=t&&"undefined"!=t?"#/login/"+t:"#/login"},downloadFile:function(t,e){try{var r=document.createElement("a");r.download=e,r.href=t,document.body.appendChild(r),r.click(),document.body.removeChild(r)}catch(t){console.log(t)}},downloadFile_old:function(t){try{var e=document.createElement("form");e.action=t,document.body.appendChild(e),e.submit(),document.body.removeChild(e)}catch(t){console.log(t)}},getRandomNum:function(t){for(var e="",r=0;r<t;r++)e+=Math.floor(10*Math.random());return e},getStorageKeyPrefix:function(){return void 0===l&&(l=window.location.pathname||""),l},getLongTextStyle:function(t){if(!t)return{};var e={minWidth:"normal",maxWidth:"1000px",display:"block",textAlign:"left",whiteSpace:"normal",lineHeight:"20px"},r=t.length>200?"350px":t.length>150?"300px":t.length>100?"250px":t.length>50?"200px":t.length>=20?"160px":"80px";return e.minWidth=r,e},setLocalStorge:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60;if(t&&(t=this.getStorageKeyPrefix()+t),e){var n=r||60,o=new Date,i=60*n*1e3;localStorage.setItem(t,JSON.stringify({value:e,expireAddTime:i,expires:o.getTime()+i}))}else localStorage.removeItem(t)},getLocalStorge:function(t){t&&(t=this.getStorageKeyPrefix()+t);try{var e=JSON.parse(localStorage[t]);return!e||e.expires<Date.now()?null:(e.expires=Date.now()+e.expireAddTime,localStorage.setItem(t,JSON.stringify(e)),e.value)}catch(e){return localStorage[t]}},getAnoHydrocarbonToken:function(){var t=this.getLocalStorge("anoHydrocarbonToken");return t||(t="tmpl"+this.getRandomNum(6),this.setLocalStorge("anoHydrocarbonToken",t)),t},transQueryParamsToStr:function(t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"?":"",n=[],o=[];for(var i in t)if(!(e.indexOf(i)>=0)){var a=t[i];[void 0,null].includes(a)?a="":o.push(i)}o.sort();for(var c=function(){var e=s[u],r=t[e],o=encodeURI(e);r&&(r&&r.constructor===Array?r.forEach((function(t){n.push(o+"[]="+encodeURI(t))})):n.push(o+"="+encodeURI(r)))},u=0,s=o;u<s.length;u++)c();return n.length?r+n.join("&"):""},transQueryStrToParams:function(t){var e={},r=t.split("?");if(r&&2==r.length)for(var n=r[1].split("&"),o=0;o<n.length;o++)if(n[o].indexOf("[]=")>0){var i=n[o].split("[]="),a=i[0];e[a]||(e[a]=[]),e[a].push(decodeURI(this.configParamTrans(i[1])))}else{var c=n[o].split("="),u=c[0];u&&(e[u]=decodeURI(this.configParamTrans(c[1])))}return e},isConfigDefaultValue:function(t){return!!t&&t.startsWith("$$current")},configParamTrans:function(t){return t&&t.startsWith&&t.startsWith("$$current")?s.current(t):t},uniq:function(t,e){var r=[];return t.map((function(t){var n=!0;return r.map((function(r){return t[e]===r[e]&&(n=!1),!1})),n&&r.push(t),!1})),r},deepCopy:function(t){var e=Array.isArray(t)?[]:{};for(var r in t)t.hasOwnProperty(r)&&("object"===(0,n.Z)(t[r])?e[r]=this.deepCopy(t[r]):e[r]=t[r]);return e},getFileUrl:function(t){return t?t.constructor===String?t:t.constructor===Object?t.props.children.props?t.props.children.props.href:t.props.owlner?t.props.owlner:t:t:t},getOptionColor:function(t,e){return e?(t&&t.forEach((function(t){t.value!==e||t.color&&(r=t.color)})),r):null;var r},getFieldItemType:function(t){return t.extType?t.extType:t.msExtType?t.msExtType:t.msType?t.msType:t.type},isEmpty:function(t){if(!t)return!0;for(var e in t)return!1;return!0},getDayjsFormat:function(t){var e="YYYY-MM-DD HH:mm:ss";switch(t){case"daterange-YY":case"date-YY":e="YYYY";break;case"date-M1":case"daterange-M1":e="YYYY-MM";break;case"date":case"daterange":e="YYYY-MM-DD";break;case"datetime-HH":case"datetimerange-HH":e="YYYY-MM-DD HH";break;case"datetime-mm":case"datetimerange-mm":e="YYYY-MM-DD HH:mm";break;case"datetime":case"datetimerange":e="YYYY-MM-DD HH:mm:ss";break;case"timestamp":e="YYYY-MM-DD HH:mm:ss SSS";break;case"time-HH":case"timerange-HH":e="HH";break;case"time-mm":case"timerange-mm":e="HH:mm";break;case"time":case"timerange":e="HH:mm:ss"}return e},getDateTimeFormat:function(t){switch(t){case"time-HH":case"timerange-HH":case"datetime-HH":case"datetimerange-HH":return"HH";case"time-mm":case"timerange-mm":case"datetime-mm":case"datetimerange-mm":return"HH:mm";case"timestamp":case"time":case"timerange":case"datetime":case"datetimerange":return"HH:mm:ss";default:return""}return""},concatValue:function(t,e){var r=void 0;return r=t?t+"~":"~",e&&(r+=e),r},splitValue:function(t){var e,r;if(t)if(t.toString().indexOf("~")>=0){var n=t.split("~");e=n[0]?n[0]:void 0,r=n[1]?n[1]:void 0}else e=t;return{valueBegin:e,valueEnd:r}},str2UTF8:function(t){var e,r,n=new Array;e=t.length;for(var o=0;o<e;o++)(r=t.charCodeAt(o))>=65536&&r<=1114111?(n.push(r>>18&7|240),n.push(r>>12&63|128),n.push(r>>6&63|128),n.push(63&r|128)):r>=2048&&r<=65535?(n.push(r>>12&15|224),n.push(r>>6&63|128),n.push(63&r|128)):r>=128&&r<=2047?(n.push(r>>6&31|192),n.push(63&r|128)):n.push(255&r);return n},joinPath:function(t,e){var r=t;return r.endsWith("/")||r.endsWith("\\")||(r+="/"),e&&(e.startsWith("/")||r.startsWith("\\")?r+=e.slice(1):r+=e),r},setProgramCode4RoutePath:function(t){var e=t.programCode;this.setProgramCode(e)},setSessionProgramCode4RoutePath:function(t){var e=t.programCode;this.setSessionProgramCode(e)}}},50056:function(t,e,r){"use strict";var n=r(32763),o=r(59755),i=(r(21926),r(67294),r(20745)),a=r(57764),c=(r(32733),r(40684)),u=r(5301),s=JSON.parse('{"hydrocarbonServer1":"http://8.140.102.166:98/hydrogen","programName_NavLeft":"物料","programName":"应用","programName_sub":"CARBON","programName_Logo":"logo_03.png","programCode1":"253564453860974594","programCodev2":"232229551710445570","programCode111":"299227289874112514"}'),l=r(52656);function f(){f=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),c=new S(n||[]);return o(a,"_invoke",{value:k(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var p={};function d(){}function v(){}function y(){}var m={};s(m,a,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(E([])));w&&w!==e&&r.call(w,a)&&(m=w);var Z=y.prototype=d.prototype=Object.create(m);function b(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function i(o,a,c,u){var s=h(t[o],t,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==(0,n.Z)(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){i("next",t,c,u)}),(function(t){i("throw",t,c,u)})):e.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){return i("throw",t,c,u)}))}u(s.arg)}var a;o(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){i(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=L(a,r);if(c){if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function L(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,L(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:P}}function P(){return{value:void 0,done:!0}}return v.prototype=y,o(Z,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:v,configurable:!0}),v.displayName=s(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,s(t,u,"GeneratorFunction")),t.prototype=Object.create(Z),t},t.awrap=function(t){return{__await:t}},b(x.prototype),s(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},b(Z),s(Z,u,"Generator"),s(Z,a,(function(){return this})),s(Z,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=E,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function h(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return p(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}(0,c.TA)((0,o.Z)(f().mark((function t(){var e;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=(0,i.s)(document.getElementById("root")),u.cB.setAppDtmplConfigFunc("229650889220097",(function(t,e){var r=t.groups[0].fields[0];return r.shouldUpdate=function(t,e){return!0},r.mainCode=function(t){return console.log("调用了 update",r.title),t.getFieldValue(r.id),t.getFieldInstance(r.id),r.id},r.updateSelf=function(t){return"11"==t.getFieldValue(0xd0ddc3aca007)?r.required=!0:r.required=!1,r},t.onValuesChange=function(t,e,r){"22"==t[0xd0ddc3aca007]&&r.setFieldValue("229650889220101",e.fieldMap[0xd0ddc3aca005]+23)},t})),u.cB.setAppDtmplConfigFunc("281357880958977",(function(t,e){var r,n=t.groups[0],o=t.groups[1],i=e?e.fieldMap[0xffe4d9aca005]:void 0,a=h(n.fields);try{for(a.s();!(r=a.n()).done;){var c=r.value;if("bf3977ff49f1946ff35366e6b3e9bd16"==c.mstrucId)if(c.shouldUpdate=function(t,e){return!0},i&&i.length>0){var u=i.split("@R@")[0];c.disabled=!1,c.mainCode=u,o.disabled=!1,o.mainCode=u}else c.disabled=!0,o.disabled=!0;else"281358369595397"==c.id&&(c.shouldUpdate=function(t,e){return!0})}}catch(t){a.e(t)}finally{a.f()}return t.onValuesChange=function(e,r,n){var o="281358369595397",i="281358369595399",a=e[o],c=t.groups[0],u=t.groups[1];if(null!=a){var s,l=h(c.fields);try{for(l.s();!(s=l.n()).done;){var f=s.value;if(f.id==i)if(n.isFieldTouched(i),n.setFieldValue(i,[]),n.setFieldValue("$virtual281358369595402",1),a&&a.length>0){var p=a[0].split("@R@")[0];f.disabled=!1,f.mainCode=p,u.disabled=!1,u.mainCode=p}else f.disabled=!0,u.disabled=!0}}catch(t){l.e(t)}finally{l.f()}}else if(e.hasOwnProperty("$virtual281358369595402"))if(e.$virtual281358369595402>0){var d,v=h(c.fields);try{for(v.s();!(d=v.n()).done;){var y=d.value;y.id==o&&(y.disabled=!0)}}catch(t){v.e(t)}finally{v.f()}}else{var m,g=h(c.fields);try{for(g.s();!(m=g.n()).done;){var w=m.value;w.id==o&&(w.disabled=!1)}}catch(t){g.e(t)}finally{g.f()}}},t})),t.next=5,u.QC.initProgramConfig(s);case 5:e.render((0,l.tZ)(a.Z,null));case 6:case"end":return t.stop()}}),t)}))))},57764:function(t,e,r){"use strict";r.d(e,{Z:function(){return g}});var n=r(90237),o=r(65337),i=r(39576),a=r(61378),c=r(69905),u=r(67294),s=r(79655),l=r(89250),f=r(40684),h=r(36646),p=r(5301),d=r(52656);function v(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=(0,c.Z)(t);if(e){var o=(0,c.Z)(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return(0,a.Z)(this,r)}}var y=(0,d.tZ)(h.Z,{tip:"Loading..."}),m=(0,f.ZP)({resolved:{},chunkName:function(){return"App"},isReady:function(t){var e=this.resolve(t);return!0===this.resolved[e]&&!!r.m[e]},importAsync:function(){return Promise.all([r.e(537),r.e(288),r.e(74),r.e(10),r.e(592),r.e(768)]).then(r.bind(r,70102))},requireAsync:function(t){var e=this,r=this.resolve(t);return this.resolved[r]=!1,this.importAsync(t).then((function(t){return e.resolved[r]=!0,t}))},requireSync:function(t){var e=this.resolve(t);return r(e)},resolve:function(){return 70102}},{fallback:y}),g=function(t){(0,i.Z)(r,t);var e=v(r);function r(){return(0,n.Z)(this,r),e.apply(this,arguments)}return(0,o.Z)(r,[{key:"render",value:function(){return(0,d.tZ)(s.UT,null,(0,d.tZ)(m,null,(0,d.tZ)(l.Z5,null,(0,d.tZ)(l.AW,{path:"login",element:(0,d.tZ)(p.xe,null)}),(0,d.tZ)(l.AW,{path:"login/:programCode",element:(0,d.tZ)(p.xe,null)}),(0,d.tZ)(l.AW,{path:"context-setter",element:(0,d.tZ)(p.UL,null)}),(0,d.tZ)(l.AW,{path:"*",element:(0,d.tZ)(p.hE,null,(0,d.tZ)(l.Z5,null,(0,d.tZ)(l.AW,{path:"/home/:programCode",element:p.cB.getCustomPage(p.cB.programCode())?u.createElement(p.cB.getCustomPage(p.cB.programCode())):(0,d.tZ)(p.B$,null)}," "),(0,d.tZ)(l.AW,{path:"/home",element:p.cB.getCustomPage(p.cB.programCode())?u.createElement(p.cB.getCustomPage(p.cB.programCode())):(0,d.tZ)(p.B$,null)}," "),(0,d.tZ)(l.AW,{path:"/page/:sourceId/:pageName",element:(0,d.tZ)(p.C0,null),exact:!0}),(0,d.tZ)(l.AW,{path:"/:sourceId/act-table",element:(0,d.tZ)(p.cS,null),exact:!0}),(0,d.tZ)(l.AW,{path:"/:sourceId/detail-view",element:(0,d.tZ)(p.H5,null),exact:!0}),(0,d.tZ)(l.AW,{path:"/:sourceId/detail-edit",element:(0,d.tZ)(p.H5,null),exact:!0}),(0,d.tZ)(l.AW,{path:"/:sourceId/importer",element:(0,d.tZ)(p.zM,null),exact:!0})))}))))}}]),r}(u.Component)},42480:function(){}},a={};function c(t){var e=a[t];if(void 0!==e)return e.exports;var r=a[t]={id:t,loaded:!1,exports:{}};return i[t].call(r.exports,r,r.exports,c),r.loaded=!0,r.exports}c.m=i,c.amdO={},t=[],c.O=function(e,r,n,o){if(!r){var i=1/0;for(l=0;l<t.length;l++){r=t[l][0],n=t[l][1],o=t[l][2];for(var a=!0,u=0;u<r.length;u++)(!1&o||i>=o)&&Object.keys(c.O).every((function(t){return c.O[t](r[u])}))?r.splice(u--,1):(a=!1,o<i&&(i=o));if(a){t.splice(l--,1);var s=n();void 0!==s&&(e=s)}}return e}o=o||0;for(var l=t.length;l>0&&t[l-1][2]>o;l--)t[l]=t[l-1];t[l]=[r,n,o]},c.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return c.d(e,{a:e}),e},r=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__},c.t=function(t,n){if(1&n&&(t=this(t)),8&n)return t;if("object"==typeof t&&t){if(4&n&&t.__esModule)return t;if(16&n&&"function"==typeof t.then)return t}var o=Object.create(null);c.r(o);var i={};e=e||[null,r({}),r([]),r(r)];for(var a=2&n&&t;"object"==typeof a&&!~e.indexOf(a);a=r(a))Object.getOwnPropertyNames(a).forEach((function(e){i[e]=function(){return t[e]}}));return i.default=function(){return t},c.d(o,i),o},c.d=function(t,e){for(var r in e)c.o(e,r)&&!c.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},c.f={},c.e=function(t){return Promise.all(Object.keys(c.f).reduce((function(e,r){return c.f[r](t,e),e}),[]))},c.u=function(t){return"bundle."+{14:"f3686addbbd9e06a50e8",66:"36208d1f6ac6144102f2",76:"258e7f2bf2fd5efcd6ed",211:"105f359e12de8a4add9f",367:"4326c850a277b61bd991",429:"0f8d60a2df45beaa7b6c",432:"3ca02b68d1656c7146b2",441:"f0b4202a7e99f8bf8e48",466:"64aa676f12a5c9851641",486:"1f144dd7e5ab9e31ef9f",510:"380788d7c9343bb937a6",556:"9473ddf149aa256297e7",590:"a3d759738441626e940b",591:"44565881079a5494d285",592:"8b1bbf2f2109563c9a11",623:"64aaeee495710a8f8cbc",636:"5db3f5935cba4bfdf61e",679:"8bc213008c252dbd0618",743:"45f5df50c275cdbad182",768:"2cb3d255880a7cd7e580",836:"d36ce64baef3517b17c6",867:"48c4cb6f0c3fb9eed46d",958:"f993b70f5a575e6ddf2d"}[t]+".js"},c.miniCssF=function(t){return"css/"+{510:"html-editor-draft",590:"chemstruc-graph",592:"common"}[t]+"-"+{510:"5e8e152675ab7d201c00",590:"15d5053934e613f20d2b",592:"901df6b21f13391f2a53"}[t]+".css"},c.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n={},o="aldehyde:",c.l=function(t,e,r,i){if(n[t])n[t].push(e);else{var a,u;if(void 0!==r)for(var s=document.getElementsByTagName("script"),l=0;l<s.length;l++){var f=s[l];if(f.getAttribute("src")==t||f.getAttribute("data-webpack")==o+r){a=f;break}}a||(u=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,c.nc&&a.setAttribute("nonce",c.nc),a.setAttribute("data-webpack",o+r),a.src=t),n[t]=[e];var h=function(e,r){a.onerror=a.onload=null,clearTimeout(p);var o=n[t];if(delete n[t],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((function(t){return t(r)})),e)return e(r)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),u&&document.head.appendChild(a)}},c.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t},function(){var t;c.g.importScripts&&(t=c.g.location+"");var e=c.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");r.length&&(t=r[r.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),c.p=t}(),function(){if("undefined"!=typeof document){var t={179:0};c.f.miniCss=function(e,r){t[e]?r.push(t[e]):0!==t[e]&&{510:1,590:1,592:1}[e]&&r.push(t[e]=function(t){return new Promise((function(e,r){var n=c.miniCssF(t),o=c.p+n;if(function(t,e){for(var r=document.getElementsByTagName("link"),n=0;n<r.length;n++){var o=(a=r[n]).getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(o===t||o===e))return a}var i=document.getElementsByTagName("style");for(n=0;n<i.length;n++){var a;if((o=(a=i[n]).getAttribute("data-href"))===t||o===e)return a}}(n,o))return e();!function(t,e,r,n,o){var i=document.createElement("link");i.rel="stylesheet",i.type="text/css",i.onerror=i.onload=function(r){if(i.onerror=i.onload=null,"load"===r.type)n();else{var a=r&&("load"===r.type?"missing":r.type),c=r&&r.target&&r.target.href||e,u=new Error("Loading CSS chunk "+t+" failed.\n("+c+")");u.code="CSS_CHUNK_LOAD_FAILED",u.type=a,u.request=c,i.parentNode&&i.parentNode.removeChild(i),o(u)}},i.href=e,document.head.appendChild(i)}(t,o,0,e,r)}))}(e).then((function(){t[e]=0}),(function(r){throw delete t[e],r})))}}}(),function(){var t={179:0};c.f.j=function(e,r){var n=c.o(t,e)?t[e]:void 0;if(0!==n)if(n)r.push(n[2]);else if(590!=e){var o=new Promise((function(r,o){n=t[e]=[r,o]}));r.push(n[2]=o);var i=c.p+c.u(e),a=new Error;c.l(i,(function(r){if(c.o(t,e)&&(0!==(n=t[e])&&(t[e]=void 0),n)){var o=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;a.message="Loading chunk "+e+" failed.\n("+o+": "+i+")",a.name="ChunkLoadError",a.type=o,a.request=i,n[1](a)}}),"chunk-"+e,e)}else t[e]=0},c.O.j=function(e){return 0===t[e]};var e=function(e,r){var n,o,i=r[0],a=r[1],u=r[2],s=0;if(i.some((function(e){return 0!==t[e]}))){for(n in a)c.o(a,n)&&(c.m[n]=a[n]);if(u)var l=u(c)}for(e&&e(r);s<i.length;s++)o=i[s],c.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return c.O(l)},r=self.webpackChunkaldehyde=self.webpackChunkaldehyde||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}(),c.nc=void 0;var u=c.O(void 0,[537,288,74,10,861,716,621,595,689,553,527,725,576],(function(){return c(50056)}));u=c.O(u)}();